[{"content":"æ»‘åŠ¨çª—å£ä¸åŒæŒ‡é’ˆ çµç¥é¢˜å•ï¼šåˆ†äº«ä¸¨ã€ç®—æ³•é¢˜å•ã€‘æ»‘åŠ¨çª—å£ä¸åŒæŒ‡é’ˆï¼ˆå®šé•¿/ä¸å®šé•¿/å•åºåˆ—/åŒåºåˆ—/ä¸‰æŒ‡é’ˆ/åˆ†ç»„å¾ªç¯ï¼‰- è®¨è®º - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nåœºæ™¯ï¼šè¿ç»­ã€éå†å„æƒ…å†µ\nå°šæœªåˆ†ç±» ä¸¤æ•°ä¹‹å’Œ 1. ä¸¤æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆï¼Œå¹¶ä¸”ä½ ä¸èƒ½ä½¿ç”¨ä¸¤æ¬¡ç›¸åŒçš„å…ƒç´ ã€‚\nä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚\nç¤ºä¾‹\n1 2 è¾“å…¥ï¼šnums = [3,2,4], target = 6 è¾“å‡ºï¼š[1,2] ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Solution: def twoSum(self, nums: List[int], target: int) -\u0026gt; List[int]: # #éå† # for i in range(len(nums)-1): # for j in range(i+1,len(nums)): # if nums[i]+nums[j]==target: # return [i,j] # å“ˆå¸Œè¡¨ python å­—å…¸æœ€å¥½ é”®ä¸å­˜åœ¨å³0ä¸ªï¼Œä½†æ˜¯è¦å­˜ç´¢å¼• dic=dict() for i,e in enumerate(nums): # if dic.get(target-e) is not None: # inæ–¹æ³•å°±æ˜¯ç”¨çš„å“ˆå¸Œè¡¨æŸ¥æ‰¾ if target-e in dic: return [dic[target-e], i] dic[e]=i what I learn\nå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾ç”¨inæ–¹æ³•å¯å®ç°ï¼Œç”¨dict()æˆ–set()æœ€å¥½ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚ é›†åˆã€å­—å…¸çš„ in æ–¹æ³•æ—¶é—´å¤æ‚åº¦O(1)ï¼Œåˆ—è¡¨å’Œå…ƒç»„çš„ in æ—¶é—´å¤æ‚åº¦O(n)ã€‚ åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ 26. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ª éä¸¥æ ¼é€’å¢æ’åˆ— çš„æ•°ç»„ nums ï¼Œè¯·ä½ ** åŸåœ°** åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  åªå‡ºç°ä¸€æ¬¡ ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚å…ƒç´ çš„ ç›¸å¯¹é¡ºåº åº”è¯¥ä¿æŒ ä¸€è‡´ ã€‚ç„¶åè¿”å› nums ä¸­å”¯ä¸€å…ƒç´ çš„ä¸ªæ•°ã€‚\nè€ƒè™‘ nums çš„å”¯ä¸€å…ƒç´ çš„æ•°é‡ä¸º k ï¼Œä½ éœ€è¦åšä»¥ä¸‹äº‹æƒ…ç¡®ä¿ä½ çš„é¢˜è§£å¯ä»¥è¢«é€šè¿‡ï¼š\næ›´æ”¹æ•°ç»„ nums ï¼Œä½¿ nums çš„å‰ k ä¸ªå…ƒç´ åŒ…å«å”¯ä¸€å…ƒç´ ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬æœ€åˆåœ¨ nums ä¸­å‡ºç°çš„é¡ºåºæ’åˆ—ã€‚nums çš„å…¶ä½™å…ƒç´ ä¸ nums çš„å¤§å°ä¸é‡è¦ã€‚\nè¿”å› k ã€‚\nç¤ºä¾‹\n1 2 è¾“å…¥ï¼šnums = [0,0,1,1,1,2,2,3,3,4] è¾“å‡ºï¼š5, nums = [0,1,2,3,4] ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Solution: def removeDuplicates(self, nums: List[int]) -\u0026gt; int: # å“ˆå¸Œè¡¨ ç©ºé—´æ¢æ—¶é—´ # dic=set() # for e in nums: # if e not in dic: # dic.add(e) # nums[len(dic)-1]=e # # print(dic) # # print(nums) # # print(\u0026#34;----\u0026#34;) # return len(dic) # åŒæŒ‡é’ˆ åˆ©ç”¨æœ‰åºæ€§ p=0 for e in nums: if e!=nums[p]: p+=1 nums[p]=e return p+1 what I learn\nå¿«æ…¢æŒ‡é’ˆï¼Œæ•°æ®éœ€è¦æœ‰æœ‰åºæ€§ã€‚ æœç´¢æ’å…¥ä½ç½® 35. æœç´¢æ’å…¥ä½ç½® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n**ï¼ˆäºŒåˆ†æ³•ï¼‰**è®°ä½å°±å¥½äº† T-T\nç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚\nè¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚\nç¤ºä¾‹ï¼š\n1 2 è¾“å…¥: nums = [1,3,5,6], target = 5 è¾“å‡º: 2 ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 class Solution: def searchInsert(self, nums: List[int], target: int) -\u0026gt; int: # ä¸Šä¸‹ç•Œé™è®¾ç½®ï¼Œtarget æœ€å¤§æ—¶è¦æ”¾åœ¨â€œç¬¬len(nums)ä¸ªä½ç½®â€ï¼Œæœ€å°æ—¶è¦æ”¾åœ¨â€œç¬¬0ä¸ªä½ç½®â€ up=len(nums) low=0 while(True): # iä¸º æ­£ä¸­ï¼ˆå¥‡ï¼‰æˆ– åä¸Šï¼ˆå¶ï¼‰ i=(low+up)//2 # é‡åˆå³ä¸ºæœ€ç»ˆä½ç½® if low==up: return low # å› ä¸ºæ˜¯å‘ä¸‹å–æ•´çš„iï¼Œä¸Šç•Œä¸‹ç§»åˆ°i;ä¸‹ç•Œä¸Šç§»åˆ°i+1ã€‚ # æ¯”å¦‚low=0,up=5ï¼Œåˆ™ï¼šmid=2.5,i=2ï¼Œå°çš„åŒºåŸŸä¸º0~2(i)ï¼Œå¤§çš„åŒºåŸŸä¸º3(i+1)~5 if target\u0026lt;nums[i]: up=i elif target\u0026gt;nums[i]: low=i+1 else: return i what I learn\näºŒåˆ†æ³•æ¡†æ¶ï¼š ä¸Šä¸‹ç•Œup=len(nums) low=0 å–ä¸­é—´(low+up)//2 ç»ˆæ­¢æ¡ä»¶ low==up ä¸Šç•Œé™ up=mid ä¸‹ç•Œå‡ low=mid+1 åŠ ä¸€ 66. åŠ ä¸€ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªç”± æ•´æ•° ç»„æˆçš„ éç©º æ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚\næœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚\nä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚\nç¤ºä¾‹ 1ï¼š\n1 2 3 è¾“å…¥ï¼šdigits = [1,2,3] è¾“å‡ºï¼š[1,2,4] è§£é‡Šï¼šè¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 123ã€‚ ç¤ºä¾‹ 2ï¼š 1 2 3 4 5 è¾“å…¥ï¼šdigits = [9] è¾“å‡ºï¼š[1,0] è§£é‡Šï¼šè¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 9ã€‚ åŠ  1 å¾—åˆ°äº† 9 + 1 = 10ã€‚ å› æ­¤ï¼Œç»“æœåº”è¯¥æ˜¯ [1,0]ã€‚ ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 class Solution: def plusOne(self, digits: List[int]) -\u0026gt; List[int]: # é€†åºï¼Œä»ä½ä½å¼€å§‹ï¼Œå‘ç°å°äº9çš„è¯´æ˜ä¸ç”¨è¿›ä½ï¼ŒåŠ ä¸€é€€å‡ºï¼Œå¦åˆ™+1æ˜¯10ï¼Œå½“å‰ä½ä¸º0ï¼Œè¿›å…¥ä¸‹ä¸€ä½é‡å¤ for i in range(len(digits)-1,-1,-1): if digits[i]\u0026lt;9: digits[i]+=1 break digits[i]=0 # å¦‚æœæœ€é«˜ä½ä¸º0ï¼Œè¯´æ˜è¿›ä½äº†ï¼Œå‰é¢æ’å…¥1 if not digits[0]: digits.insert(0,1) return digits what I learn\né€†åºç´¢å¼• range(len(digits)-1,-1,-1) ä»len(digits)-1å¼€å§‹ï¼Œæ­¥é•¿ä¸º-1(é€’å‡)ï¼Œåˆ°-1ï¼Œå·¦é—­å³å¼€[len(digits)-1, -1)ã€‚ å®šé•¿æ»‘åŠ¨çª—å£ åŠå¾„ä¸º k çš„å­æ•°ç»„å¹³å‡å€¼ 2090. åŠå¾„ä¸º k çš„å­æ•°ç»„å¹³å‡å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•°ç»„ nums ï¼Œæ•°ç»„ä¸­æœ‰ n ä¸ªæ•´æ•°ï¼Œå¦ç»™ä½ ä¸€ä¸ªæ•´æ•° k ã€‚\nåŠå¾„ä¸º k çš„å­æ•°ç»„å¹³å‡å€¼ æ˜¯æŒ‡ï¼šnums ä¸­ä¸€ä¸ªä»¥ä¸‹æ ‡ i ä¸º ä¸­å¿ƒ ä¸” åŠå¾„ ä¸º k çš„å­æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ï¼Œå³ä¸‹æ ‡åœ¨ i - k å’Œ i + k èŒƒå›´ï¼ˆå« i - k å’Œ i + kï¼‰å†…æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ã€‚å¦‚æœåœ¨ä¸‹æ ‡ i å‰æˆ–åä¸è¶³ k ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆ åŠå¾„ä¸º k çš„å­æ•°ç»„å¹³å‡å€¼ æ˜¯ -1 ã€‚\næ„å»ºå¹¶è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ avgs ï¼Œå…¶ä¸­ avgs[i] æ˜¯ä»¥ä¸‹æ ‡ i ä¸ºä¸­å¿ƒçš„å­æ•°ç»„çš„ åŠå¾„ä¸º k çš„å­æ•°ç»„å¹³å‡å€¼ ã€‚\nx ä¸ªå…ƒç´ çš„ å¹³å‡å€¼ æ˜¯ x ä¸ªå…ƒç´ ç›¸åŠ ä¹‹å’Œé™¤ä»¥ x ï¼Œæ­¤æ—¶ä½¿ç”¨æˆªæ–­å¼ æ•´æ•°é™¤æ³• ï¼Œå³éœ€è¦å»æ‰ç»“æœçš„å°æ•°éƒ¨åˆ†ã€‚\nä¾‹å¦‚ï¼Œå››ä¸ªå…ƒç´  2ã€3ã€1 å’Œ 5 çš„å¹³å‡å€¼æ˜¯ (2 + 3 + 1 + 5) / 4 = 11 / 4 = 2.75ï¼Œæˆªæ–­åå¾—åˆ° 2 ã€‚\n1 2 è¾“å…¥ï¼šnums = [7,4,3,9,1,8,5,2,6], k = 3 è¾“å‡ºï¼š[-1,-1,-1,5,4,4,-1,-1,-1] ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Solution: def getAverages(self, nums: List[int], k: int) -\u0026gt; List[int]: # æˆ‘è€æƒ³ç€åŠ¨æ€å¾—å»åˆ¤æ–­åŠ -1è¿›resultåˆ—è¡¨ avgs = [-1] * len(nums) s = 0 # ç»´æŠ¤çª—å£å…ƒç´ å’Œ for i, x in enumerate(nums): # 1. è¿›å…¥çª—å£ s += x if i \u0026lt; k * 2: # çª—å£å¤§å°ä¸è¶³ 2k+1 continue # 2. è®°å½•ç­”æ¡ˆ avgs[i - k] = s // (k * 2 + 1) # 3. ç¦»å¼€çª—å£ s -= nums[i - k * 2] return avgs # ä½œè€…-çµç¥ what I learn\nè§‚å¯Ÿé—®é¢˜çš„æœ¬è´¨ï¼Œä¸è¦è¢«æ–¹æ³•å¸¦ç€èµ°ã€‚ é—®é¢˜çš„æœ¬è´¨ï¼šå¾…åˆ°è¦å¤„ç†çš„ç´¢å¼•æ—¶ï¼Œå¾—å‡ºå¹³å‡å€¼æ”¾å…¥æ•°ç»„ã€‚ æ–¹æ³•å¸¦åï¼šæƒ³ç€è¾¹éå†è¾¹appendï¼Œå¼€å¤´å»append -1ï¼Œç»“æŸäº†å†è¡¥å……-1ã€‚ è§£å†³çš„å…³é”®ï¼šåˆå§‹åŒ–numsé•¿åº¦çš„ -1æ•°ç»„ï¼Œå³ [-1] * len(nums)ã€‚ å‡ ä¹å”¯ä¸€å­æ•°ç»„çš„æœ€å¤§å’Œ 2841. å‡ ä¹å”¯ä¸€å­æ•°ç»„çš„æœ€å¤§å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸¤ä¸ªæ­£æ•´æ•° m å’Œ k ã€‚\nè¯·ä½ è¿”å› nums ä¸­é•¿åº¦ä¸º k çš„ å‡ ä¹å”¯ä¸€ å­æ•°ç»„çš„ æœ€å¤§å’Œ ï¼Œå¦‚æœä¸å­˜åœ¨å‡ ä¹å”¯ä¸€å­æ•°ç»„ï¼Œè¯·ä½ è¿”å› 0 ã€‚\nå¦‚æœ nums çš„ä¸€ä¸ªå­æ•°ç»„æœ‰è‡³å°‘ m ä¸ªäº’ä¸ç›¸åŒçš„å…ƒç´ ï¼Œæˆ‘ä»¬ç§°å®ƒæ˜¯ å‡ ä¹å”¯ä¸€ å­æ•°ç»„ã€‚\nå­æ•°ç»„æŒ‡çš„æ˜¯ä¸€ä¸ªæ•°ç»„ä¸­ä¸€æ®µè¿ç»­ éç©º çš„å…ƒç´ åºåˆ—ã€‚\nç¤ºä¾‹\n1 2 3 è¾“å…¥ï¼šnums = [2,6,7,3,1,7], m = 3, k = 4 è¾“å‡ºï¼š18 è§£é‡Šï¼šæ€»å…±æœ‰ 3 ä¸ªé•¿åº¦ä¸º k = 4 çš„å‡ ä¹å”¯ä¸€å­æ•°ç»„ã€‚åˆ†åˆ«ä¸º [2, 6, 7, 3] ï¼Œ[6, 7, 3, 1] å’Œ [7, 3, 1, 7] ã€‚è¿™äº›å­æ•°ç»„ä¸­ï¼Œå’Œæœ€å¤§çš„æ˜¯ [2, 6, 7, 3] ï¼Œå’Œä¸º 18 ã€‚ ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Solution: def maxSum(self, nums: List[int], m: int, k: int) -\u0026gt; int: sum_n = max_sum = 0 dif_n=defaultdict(int) for i, element in enumerate(nums): dif_n[element] += 1 sum_n += element left = i-k+1\tif left \u0026lt; 0: continue if len(dif_n) \u0026gt;= m: max_sum = max(sum_n,max_sum) out=nums[left] sum_n -= out dif_n[out] -= 1 if dif_n[out] == 0: del dif_n[out] return max_sum what I learn\nsum_n = max_sum = 0 ä½¿ç”¨defaultdict é»˜è®¤å€¼ä¸º0ï¼Œdif_n=defaultdict(int) å› ä¸ºint()è¿”å›0ï¼ˆä¸å¦‚Counterï¼‰ if dif_n[out] == 0: del dif_n[out] åˆ é™¤å…¶ä¸­å€¼ä¸º0çš„é”®å€¼å¯¹ max_sum = max(sum_n,max_sum) è€Œä¸ç”¨ if æ¡ä»¶åˆ¤æ–­ left = i-k+1 \u0026hellip;. out=nums[left] ä½¿ä»£ç æ›´ç®€æ´ç¾è§‚ æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ 438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nwhat I learn\nCounter 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 from collections import Counter # ç¤ºä¾‹ 1ï¼šç»Ÿè®¡å­—æ¯é¢‘æ¬¡ cnt_p = Counter(\u0026#34;aabbc\u0026#34;) print(cnt_p) # è¾“å‡ºï¼šCounter({\u0026#39;a\u0026#39;: 2, \u0026#39;b\u0026#39;: 2, \u0026#39;c\u0026#39;: 1}) # ç¤ºä¾‹ 2ï¼šè®¿é—®ä¸å­˜åœ¨çš„é”® print(cnt_p[\u0026#34;d\u0026#34;]) # è¾“å‡ºï¼š0ï¼ˆä¸ä¼šæŠ¥é”™ï¼ï¼‰ # æ”¹å˜å€¼ï¼Œç±»ä¼¼å­—å…¸ cnt_p[\u0026#34;a\u0026#34;]+=1 # æ¯”è¾ƒå’Œé›†åˆæ“ä½œ cnt_1 = Counter(\u0026#34;bcd\u0026#34;) cnt_2 = Counter(\u0026#34;abc\u0026#34;) print(cnt_1==cnt2) print(cnt_1-cnt_2) print(cnt_1+cnt_2) é‡æ–°å®‰æ’ä¼šè®®å¾—åˆ°æœ€å¤šç©ºä½™æ—¶é—´ I 3439. é‡æ–°å®‰æ’ä¼šè®®å¾—åˆ°æœ€å¤šç©ºä½™æ—¶é—´ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç†è§£é¢˜ç›®æ„æ€ï¼Œè½¬åŒ–é—®é¢˜ï¼ˆso called å»ºæ¨¡ï¼‰ä¸ºæŸç§æ–¹æ³•è§£å†³ï¼Œæ­¤é¢˜å¾ˆæ˜æ˜¾ï¼Œå¼„å‡ºæ‰€æœ‰æ—¶é—´å·®gapï¼Œç„¶åæ±‚æœ€å¤§è¿ç»­å­æ•°ç»„å³å¯ã€‚ æ³¨æ„ä¸€äº›å˜é‡çš„å€¼éœ€è¦å˜åŒ–ï¼Œæ¯”å¦‚è¿™é¢˜ä¸­çš„â€œå¯ä»¥ç§»åŠ¨kä¸ªâ€ï¼Œè½¬åŒ–ä¸ºk+1ä¸ªè¿ç»­å­æ•°ç»„ æ³¨æ„å…¨é¢æ€§ï¼Œæ¯”å¦‚gapè¿˜åŒ…æ‹¬â€œstartTime-ç¬¬ä¸€ä¸ªä¼šè®®å¼€å§‹æ—¶åˆ»â€ â€œendTime-æœ€åä¸€ä¸ªä¼šè®®ç»“æŸæ—¶åˆ»â€ã€‚ ä½¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—ç¬¦äº¤æ›¿çš„æœ€å°‘åè½¬æ¬¡æ•° 1888. ä½¿äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—ç¬¦äº¤æ›¿çš„æœ€å°‘åè½¬æ¬¡æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\næšä¸¾æ³•ï¼ˆs + s ä¸Šçš„æ»‘åŠ¨çª—å£ï¼‰ï¼Œä¸è¦æƒ³å½“ç„¶å¾—è§‰å¾— æƒ³å‡ºçš„ç®—æ³•èƒ½é€‚åº”æ‰€æœ‰æƒ…å†µï¼Œå½“æµ‹è¯•ä¸é€šè¿‡æ—¶ï¼Œå¤§èƒ†æš´åŠ›ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯ ç”Ÿæˆæ‰€æœ‰ç¬¬ä¸€ç§æ“ä½œè€Œæˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åæ»‘åŠ¨éå†æ‰€æœ‰æƒ…å†µã€‚ ans=min(cnt, k - cnt, ans)ï¼Œåœ¨å½“å‰æƒ…å†µä¸‹çš„ä¸¤ç§å¯èƒ½å’Œå…¨å±€æœ€å° ä¸­ å–æœ€å°ã€‚ ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²ï¼ˆæ¬¡å®šé•¿æ»‘çª—ï¼‰ 30. ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n\u0026ldquo;barfoothefoobarman\u0026rdquo;ï¼Œå•ä¸ªâ€œè¯â€é•¿åº¦3ï¼Œæœ¬å› 3ä¸ª3ä¸ªæ£€æŸ¥ï¼Œäºæ˜¯ä¸ºéå†æ‰€æœ‰æƒ…å†µï¼Œèµ·å§‹ä½ç½®éœ€ä¸º0/1ï¼Œå¯¹ä»0/1ä½ç½®å¼€å§‹çš„å­—ç¬¦ä¸²åˆ†åˆ«æ»‘çª—ã€‚ ä¸å®šé•¿æ»‘åŠ¨çª—å£ æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² 3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nâ€‹\tç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿ å­ä¸² çš„é•¿åº¦ã€‚\nç¤ºä¾‹\n1 2 3 è¾“å…¥: s = \u0026#34;abcabcbb\u0026#34; è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \u0026#34;abc\u0026#34;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 class Solution: def lengthOfLongestSubstring(self, s: str) -\u0026gt; int: ans = left = 0 cnt = defaultdict(int) # ç»´æŠ¤ä»ä¸‹æ ‡ left åˆ°ä¸‹æ ‡ right çš„å­—ç¬¦åŠå…¶å‡ºç°æ¬¡æ•° for right, c in enumerate(s): cnt[c] += 1 while cnt[c] \u0026gt; 1: # çª—å£å†…æœ‰é‡å¤å­—æ¯ cnt[s[left]] -= 1 # ç§»é™¤çª—å£å·¦ç«¯ç‚¹å­—æ¯ left += 1 # ç¼©å°çª—å£ ans = max(ans, right - left + 1) # æ›´æ–°çª—å£é•¿åº¦æœ€å¤§å€¼ return ans ä½œè€…ï¼šçµç¥ æ€æƒ³\nåŸºç¡€æ¨¡æ¿ï¼šå·¦æŒ‡é’ˆwhileè°ƒæ•´ï¼Œå³æŒ‡é’ˆâ€œ+1ç§»åŠ¨â€ï¼Œcntä¸ºintæˆ–defaultdict(int)è®°å½•ä¿¡æ¯ã€‚ å°† x å‡åˆ° 0 çš„æœ€å°æ“ä½œæ•° 1658. å°† x å‡åˆ° 0 çš„æœ€å°æ“ä½œæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\né€†å‘æ€ç»´ ç‰¹æ®Šæƒ…å†µåˆ†æ ","date":"2025-07-25T00:00:00Z","permalink":"https://rooobeam.github.io/p/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/","title":"æ»‘åŠ¨çª—å£"},{"content":"æ‘˜è¦ RAGäºQAæ˜¯æœ‰æ•ˆçš„ã€‚ç„¶è€Œåˆ†å—å¤„ç†æ²¡æœ‰å¾—åˆ°è¶³å¤Ÿé‡è§†ã€‚è¿™ç¯‡æ–‡ç« è¯æ˜äº†åˆ†å—çš„å…³é”®ä½œç”¨ã€‚å¹¶æå‡ºäº†LGMGCï¼Œä¸€ä¸ªæ–°çš„åˆ†å—æ¡†æ¶ï¼Œå°†é•¿æ–‡æ¡£åˆ†æˆä¸Šä¸‹æ–‡å…³è”ã€â€œè‡ªåŒ…å«â€çš„å°ºå¯¸ä¸ä¸€çš„å—ã€‚å®éªŒç»“æœåœ¨ä¸¤ä¸ªåŸºå‡†æµ‹è¯•ä¸Šè¿›è¡Œï¼Œè¯æ˜äº†æé«˜æ£€ç´¢å¹¶è¶…è¿‡ç°å­˜åˆ†å—æ–¹æ³•å½“åº”ç”¨äºä¸€ä¸ªRAGæµç¨‹æ—¶ã€‚\nä»‹ç» å¼€æ”¾é¢†åŸŸQAï¼Œå·²ç»å¯è§RAGæ˜¯æœ‰ä½œç”¨çš„ã€‚æ¨¡å‹åˆ©ç”¨LLMå’Œretrieval systemæ¥å¢å¼ºç­”æ¡ˆç”Ÿæˆã€‚åœ¨ç»å…¸RAGæµç¨‹ï¼Œæ–‡æ¡£è¢«åˆ†ä¸ºç‹¬ç«‹å—ï¼Œç„¶åå¯¹queryå®¶å®‰æ‰€ç›¸å…³chunkï¼Œç„¶åäºŒè€…ä»¥ææä¾›ç»™LLMã€‚åç»­ç ”ç©¶è€…é›†ä¸­åœ¨æ£€ç´¢å’Œç”Ÿæˆ/æ•´åˆï¼Œå¾ˆå°‘é›†ä¸­äºåˆç†çš„åˆ†å—ã€‚æ£€ç´¢ç²¾åº¦ å— ä¿¡æ¯ç²’åº¦ï¼ˆgranularityï¼‰ å’Œ è¯­ä¹‰ï¼ˆsemanticsï¼‰å½±å“ã€‚æ­¤å¤–ï¼Œä¸Šä¸‹æ–‡ä¿¡æ¯çš„ç¼ºå¤±å’Œè¿‡åº¦ä¸ç›¸å¹²ä¿¡æ¯åœ¨åŒä¸€ä¸ªchunkä¼šå½±å“LLMä»ä¸­å‡†ç¡®æå–å…³é”®ä¿¡æ¯ã€‚\nä¸ºæ­¤ï¼Œæå‡ºLGMGCæ¡†æ¶ã€‚å®ƒæ•´åˆä¸¤ä¸ªåˆ†å—æ¨¡å‹ï¼ˆä¸€ä¸ªæ˜¯LG chunkerï¼Œä¸€ä¸ªæ˜¯MG chunkerï¼‰äºä¸€ä¸ªç»Ÿä¸€æ¡†æ¶ã€‚è¿‡ç¨‹å§‹äº åˆ†ä¸º è¯­ä¹‰å’Œä¸Šä¸‹æ–‡å…³è”çš„å•å…ƒï¼Œé€šè¿‡åˆ©ç”¨ä»å°è§„æ¨¡LLMå¾—åˆ°çš„ â€œlogits informationâ€ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 1. Logits æ˜¯ä»€ä¹ˆï¼Ÿ å®šä¹‰ï¼šLogits æ˜¯è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¾“å‡ºçš„åŸå§‹é¢„æµ‹åˆ†æ•°ï¼ˆæœªç»è¿‡ Softmax å½’ä¸€åŒ–çš„æ•°å€¼ï¼‰ï¼Œè¡¨ç¤ºæ¨¡å‹å¯¹æ¯ä¸ªå¯èƒ½tokençš„â€œç½®ä¿¡åº¦â€ã€‚ ç¤ºä¾‹ï¼š å½“æ¨¡å‹å¤„ç†å¥å­ \u0026#34;Paris is the capital of [MASK].\u0026#34; æ—¶ï¼Œ[MASK] ä½ç½®çš„ logits å¯èƒ½æ˜¯ï¼š France: 8.2 Germany: 2.1 city: 1.5 è¾ƒé«˜çš„ logits å€¼ï¼ˆå¦‚ 8.2ï¼‰è¡¨ç¤ºæ¨¡å‹æ›´å€¾å‘äºé€‰æ‹© Franceã€‚ 2. å¦‚ä½•ç”¨äºæ–‡æ¡£åˆ†å‰²ï¼Ÿ æ–‡æœ¬éå†ï¼š å°†æ–‡æ¡£è¾“å…¥å°è§„æ¨¡ LLMï¼ˆå¦‚ DistilBERTï¼‰ï¼Œé€ä½ç½®ï¼ˆå¦‚é€è¯/é€å¥ï¼‰è®¡ç®— logitsã€‚ æ£€æµ‹è¯­ä¹‰çªå˜ç‚¹ï¼š è®¡ç®—ç›¸é‚»æ–‡æœ¬å•å…ƒçš„ logits ç›¸ä¼¼åº¦ï¼ˆå¦‚ä½™å¼¦è·ç¦»ï¼‰ã€‚ è‹¥æŸä½ç½®çš„ logits ä¸å‰ä¸€å•å…ƒå·®å¼‚æ˜¾è‘—ï¼ˆè¶…è¿‡é˜ˆå€¼ï¼‰ï¼Œåˆ¤å®šä¸ºè¯­ä¹‰è¾¹ç•Œã€‚ â–º ä¾‹å¦‚ï¼šä»â€œç§‘æŠ€â€è¯é¢˜çªç„¶è½¬å‘â€œæ”¿æ²»â€ï¼Œlogits åˆ†å¸ƒä¼šå‰§çƒˆå˜åŒ–ã€‚ åˆ†å‰²æ–‡æ¡£ï¼š åœ¨è¾¹ç•Œå¤„åˆ‡åˆ†æ–‡æ¡£ï¼Œç”Ÿæˆè¯­ä¹‰è¿è´¯çš„å—ï¼ˆå¦‚è¯é¢˜ä¸€è‡´çš„æ®µè½ç»„ï¼‰ã€‚ éšåè¿™äº›å—è§†ä¸ºçˆ¶å—ï¼Œè¿›ä¸€æ­¥è¢«MG chunkeråˆ†ä¸ºå°ºå¯¸ä¸åŒçš„å­å—ï¼Œå½“MG chunkerå“åº”ä¸åŒç±»åˆ«çš„queryæ—¶ã€‚æˆ‘ä»¬çš„ç»“æœè¯æ˜æˆ‘ä»¬å¥½ã€‚\nç›¸å…³å·¥ä½œ é€’å½’åˆ†å—ï¼ˆRecursive Chunkingï¼‰ä½¿ç”¨ä¸€ä¸ªåˆ†å±‚åˆ†å‰²å™¨è¿ç”¨äºå•å…ƒåŸºäºä¸€ä¸ªé¢„å®šä¹‰çš„ç»“æ„ã€‚å°½ç®¡å®ƒç®€å•ï¼Œä»–åˆ†çš„å—å†…éƒ¨ç¼ºå°‘ä¸Šä¸‹æ–‡å…³è”ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSmall2-Bigé‡‡å– æ£€ç´¢å°chunkç„¶åæ‰©å±•ä¸ºå¤§å—æ¥ä¸ºLLMæä¾›é¢å¤–ä¸Šä¸‹æ–‡ã€‚è¯­ä¹‰åˆ†å—ï¼ˆSemantic Chunkingï¼‰é€šè¿‡è®¡ç®—passageé—´çš„embeddingè·ç¦»æ¥è¯†åˆ«æ–­ç‚¹ï¼Œä»¥ä¿è¯åˆ†çš„å—æœ‰æ„ä¹‰å’Œå†…å®¹â€œè‡ªç›¸å…³â€ã€‚ä½†æ˜¯ï¼Œåˆ†å¤„åˆç†çš„å—ä»æ˜¯æŒ‘æˆ˜æ€§ä»»åŠ¡ã€‚\nè¿‘æœŸç ”ç©¶åŒæ ·åˆ©ç”¨LLMæå–æœ‰æ•ˆçš„å—ã€‚ä¸€ç§æ–¹æ³•ç”¨LLMå°†docè½¬ä¸ºâ€œå‘½é¢˜ä»¬â€è¶…è¿‡äº†ä¼ ç»Ÿçš„passageçº§æˆ–å¥å­çº§åˆ†å—æŠ€æœ¯ã€‚å‘½é¢˜æ˜¯ä¸€ç§è¡¨ç¤ºè¡¨ç¤ºï¼Œå°è£…äº†ä¸åŒçš„äº‹å®ã€‚\n1 2 3 åŸæ–‡ï¼šâ€œå·´é»æ˜¯æ³•å›½é¦–éƒ½ï¼Œä¹Ÿæ˜¯æ¬§æ´²äººå£æœ€å¯†é›†çš„åŸå¸‚ä¹‹ä¸€ã€‚â€ â†’ å‘½é¢˜1ï¼šâ€œå·´é»æ˜¯æ³•å›½é¦–éƒ½ã€‚â€ â†’ å‘½é¢˜2ï¼šâ€œå·´é»æ˜¯æ¬§æ´²äººå£æœ€å¯†é›†çš„åŸå¸‚ä¹‹ä¸€ã€‚â€ LumberChunkeré€šè¿‡è¿­ä»£å¼å‘å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¾“å…¥æ–‡æœ¬æ®µè½ï¼Œè‡ªä¸»è¯†åˆ«æœ€ä¼˜åˆ†å‰²ç‚¹ã€‚ä¸€ç§æ–¹æ³•æ–¹æ³•é€šè¿‡æå–LLMå¤„ç†æ–‡æ¡£æ—¶äº§ç”Ÿçš„éšå±‚çŠ¶æ€å‘é‡ä½œä¸ºæ–‡æ¡£è¡¨å¾ï¼Œç›´æ¥åœ¨æ¨¡å‹å†…éƒ¨å®ç°ç›¸å…³æ€§åŒ¹é…ä¸æ®µè½å®šä½ï¼Œä»è€Œè·³è¿‡äº†æ˜¾å¼çš„æ–‡æ¡£åˆ†å—æ­¥éª¤ã€‚è¿™äº›LLMé©±åŠ¨æµ‹ç‡è¯´æ˜LLMçš„æ½œåŠ›ï¼Œç„¶è€Œå¢åŠ æˆæœ¬å’Œæ—¶é—´ã€‚ç›¸æ¯”è€Œè¨€ï¼Œæˆ‘ä»¬çš„åŸºäºLLMçš„æ–¹æ³•åªç”¨ä»ä¸€ä¸ªå•å‘ä¼ é€’å¾—åˆ°logitsä¿¡æ¯ï¼Œä½¿å¾—åˆ†å—è®¡ç®—é«˜æ•ˆã€‚\næ–¹æ³• logitsæŒ‡å¯¼çš„åˆ†å—å™¨ï¼ˆLogits-Guided Chunkerï¼‰ å‡å®šLLMæœ‰è¶³å¤Ÿä¸Šä¸‹æ–‡ç†è§£ï¼Œè¿™é‡Œæå‡ºæ–¹æ³• è¯†åˆ« å®Œå…¨è¯­ä¹‰ç‹¬ç«‹çš„å•å…ƒä¹‹é—´çš„ è¾¹ç•Œã€‚LLMèƒ½åœ¨å·²æœ‰ä¸€æ®µåºåˆ—åå¾—åˆ°æ¥ä¸‹æ¥çš„tokensçš„æ¦‚ç‡åˆ†å¸ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°[EOS] (End of Sequence)å‘ç”Ÿçš„æ¦‚ç‡ï¼ˆåœ¨æ¯å¥åï¼‰ï¼Œå‡å®šæœ‰ä¸ªpromptæŒ‡å¯¼LLMæŒç»­å†™å†…å®¹ã€‚ç›´è§‚è€Œè¨€ï¼Œ[EOS]æ ‡è®°çš„è¾ƒé«˜æ¦‚ç‡è¡¨æ˜å¤§å‹è¯­è¨€æ¨¡å‹å€¾å‘äºåœ¨è¯¥ä½ç½®ç»ˆæ­¢æ–‡æœ¬ç”Ÿæˆï¼Œè¿™é¢„ç¤ºç€å‰æ–‡å·²è¾¾åˆ°è¯­ä¹‰å®Œæ•´æ€§ã€‚å®è·µä¸­ï¼Œè¾“å…¥docé²œå‘è½¬ä¸º ä¸€è¿ä¸²çš„å—ï¼Œå—ç”±é€’å½’åˆ†å—åˆ‡åˆ†çš„ å›ºå®šå¤§å°Î¸ä¸ªè¯ï¼ˆé€’å½’å®ƒä¸è€ƒè™‘ä¸Šä¸‹æ–‡ï¼‰ã€‚æˆ‘ä»¬ç„¶åè®¡ç®—å—å†…æ¯ä¸ªå¥å­åçš„[EOS]æ¦‚ç‡ï¼Œç„¶åé€‰æ‹©æœ€é«˜æ¦‚ç‡é‚£ä¸ªä½œä¸º æ–­ç‚¹ã€‚å…¬å¼å¦‚ä¸‹\n1 2 3 4 5 b[EOS] = argmaxáµ¢ p([EOS] | Ï âŠ• sâ‚ âŠ• Â· Â· Â· âŠ• sáµ¢) ï¼ˆå…¶ä¸­ï¼š âŠ• è¡¨ç¤ºæ–‡æœ¬æ‹¼æ¥ Ï ä¸ºç»­å†™æŒ‡ä»¤æç¤º argmaxáµ¢ è¡¨ç¤ºå–ä½¿æ¦‚ç‡æœ€å¤§åŒ–çš„ç´¢å¼•ä½ç½® i ï¼‰ ç¬¬ä¸€ä¸ªå—ä¸­ï¼Œæ–­ç‚¹ä¹‹å‰çš„ä½œä¸ºä¸€ä¸ªç‹¬ç«‹å—ï¼Œæ–­ç‚¹ä¹‹åçš„å’Œç¬¬äºŒä¸ªå—è¿›è¡Œè¿æ¥ï¼Œå†è¿›è¡Œåˆ†å‰²ï¼Œç›´åˆ°è¾“å…¥åˆ†å‰²å™¨çš„é•¿åº¦å°äºé˜ˆå€¼ã€‚\n1 2 3 ä¸¤ç§æƒ…å†µï¼š 1 æœ€åä¸€ä¸ªå—å’Œå€’æ•°ç¬¬äºŒä¸ªå—æ–­ç‚¹åè¿æ¥åçš„ æ–‡æœ¬ é•¿åº¦ä¸å¤Ÿã€‚ 2 æœ€åä¸€ä¸ªå—å’Œå€’æ•°ç¬¬äºŒä¸ªå—æ–­ç‚¹åçš„ æ–‡æœ¬æ‰“æ–­ç‚¹åï¼Œå‰©ä½™å†…å®¹é•¿åº¦ä¸å¤Ÿã€‚ å€¼å¾—ä»¥æçš„æ˜¯ï¼Œå°½ç®¡è¿™æ ·äº§ç”Ÿçš„å—é•¿åº¦ä¸ä¸€ï¼Œä½†æœ€å¤§é•¿åº¦å—åˆ°é™åˆ¶ã€‚\nå¤šç²’åº¦åˆ†å—å™¨ï¼ˆMulti-Granular Chunkerï¼‰ æ–‡çŒ®æŒ‡å‡ºï¼Œå°†ç”¨äºæ£€ç´¢å’Œç”Ÿæˆçš„æ–‡æœ¬å—è§£è€¦ï¼ˆåˆ†è§£ï¼‰æœ‰ç›Šã€‚è¯¥æ–¹æ³•ç”¨è¾ƒå°çš„å—æ£€ç´¢ç„¶åå°† å°å—æ‰€åœ¨å¤§å—æä¾›ç»™LLMã€‚åŸºäºè¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å¼•å…¥å¤šç²’åº¦åˆ†å—å™¨å°†æ–‡æœ¬åˆ‡åˆ†æˆå­å—ï¼ˆchild chunksï¼‰åœ¨ä¸åŒçš„ç²’åº¦ä¸Šã€‚èµ·åˆdocç”¨é€’å½’åˆ†å—æ³•åˆ†ä¸ºçˆ¶å—(Î¸ words)ã€‚æ¯ä¸ªçˆ¶å—ç„¶åå†é€’å½’åœ°å†åˆ†å—ä¸ºä¸¤ç§å­å—ï¼ŒÎ¸/2 wordså’ŒÎ¸/4 wordsï¼ŒåŒæ—¶æ˜¯ä¿è¯å¥å­ä¸ä¼šå› åˆ†å—æ–­å¼€ã€‚è®¡ç®—ç›¸ä¼¼åº¦æ—¶ï¼Œçˆ¶å—çš„ç›¸ä¼¼åº¦ï¼šçˆ¶å—ã€æ‰€æœ‰ä¸¤ç§å­å—å¾—åˆ†çš„æœ€å¤§å€¼ã€‚å°†å¾—åˆ†å‰kä¸ªçš„çˆ¶å—è¾“ç»™LLMã€‚\nlogitsæŒ‡å¯¼çš„å¤šç²’åº¦åˆ†å—å™¨ï¼ˆLGMGCï¼‰ å¤šç²’åº¦åˆ†å—å™¨å¾—åˆ°çš„è¾“å‡ºä½œä¸ºçˆ¶å—è¾“å…¥ç»™å¤šç²’åº¦åˆ†å—å™¨ï¼Œæ£€ç´¢æ—¶å‚è€ƒå¤šç²’åº¦åˆ†å—å™¨æ£€ç´¢çš„æ£€ç´¢æ–¹æ³•ã€‚å…·ä½“æ¥è¯´ï¼Œç¬¬ä¸€ä¸ªlogits chunkerå¾—åˆ°çš„çˆ¶å—é•¿ä¸ºÎ¸_1 wordsï¼Œç„¶å\u0026hellip;ï¼Œç¬¬äºŒä¸ª çˆ¶å—é•¿ä¸ºÎ¸_2 wordsã€‚\nå®éªŒè®¾ç½® ä¸ºè¯„ä¼°Logitså¼•å¯¼çš„å¤šç²’åº¦åˆ†å—å™¨ï¼ˆLogits-Guided Multi-Granular Chunkerï¼‰çš„å½±å“ï¼Œæˆ‘ä»¬é€šè¿‡æ£€ç´¢å’Œä¸‹æ¸¸é—®ç­”ä»»åŠ¡æµ‹è¯•å…¶æ€§èƒ½ã€‚ æ•°æ®é›†ä¸æŒ‡æ ‡\næ£€ç´¢è¯„ä¼°ï¼š é‡‡ç”¨GutenQAåŸºå‡†æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«æºè‡ªå™äº‹ä¹¦ç±çš„\u0026quot;å¤§æµ·æé’ˆ\u0026quot;ï¼ˆneedle in a haystackï¼‰ç±»é—®ç­”å¯¹ã€‚å› æ¯ä¸ªé—®é¢˜çš„è¯æ®ä»…ç”±1-2ä¸ªå¥å­ç»„æˆï¼Œè¯æ®ä¸ä¼šåˆ†æ•£åœ¨ä¸åŒåˆ†å—ä¸­ã€‚éµå¾ªå…¶è¯„ä¼°æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä½¿ç”¨DCG@kå’ŒRecall@kä½œä¸ºæŒ‡æ ‡ã€‚ æ•°æ®é‡æ ‡æ³¨ï¼š è§‚å¯Ÿåˆ°éƒ¨åˆ†è¯æ®æœªç›´æ¥å‡ºç°åœ¨åŸå§‹æ–‡æœ¬ä¸­ï¼ˆå¯èƒ½æºäºLLMåˆæˆç”Ÿæˆï¼‰ï¼Œè¿™ç§å·®å¼‚ä¼šé™ä½åŒ¹é…ç‡å¹¶å‰Šå¼±æ£€ç´¢å—ä¸æŸ¥è¯¢ç›¸å…³æ€§çš„è¯„ä¼°ä»·å€¼ã€‚æˆ‘ä»¬ä¸ºæ¯ä¸ªè¯æ®è®¡ç®—å…¶ä¸å„åˆ†å—çš„ROUGEåˆ†æ•°ï¼Œå¹¶é€‰æ‹©æœ€é«˜åˆ†åˆ†å—ä½œä¸ºæŸ¥è¯¢å…³è”å—ã€‚ ç«¯åˆ°ç«¯RAGè¯„ä¼°ï¼š é‡‡ç”¨LongBenchçš„ä¸‰ä¸ªå•æ–‡æ¡£QAæ•°æ®é›†ï¼š â–¶ NarrativeQAï¼šå™äº‹æ–‡æœ¬é—®ç­” â–¶ QasperQAï¼šç§‘ç ”è®ºæ–‡é—®ç­” â–¶ MultifieldQAï¼šå¤šé¢†åŸŸäº‹å®é—®ç­” è¿™äº›ä»»åŠ¡æ—¨åœ¨ä¿¡æ¯æŠ½å–ï¼Œæ— éœ€å¤æ‚æ¨ç†ã€‚æŒ‰æ ‡å‡†ï¼Œä½¿ç”¨F1å€¼ä½œä¸ºè¯„ä¼°æŒ‡æ ‡ï¼š $$\\text{Precision} = \\frac{|\\text{BOW}(pred) \\cap \\text{BOW}(gt)|}{|\\text{BOW}(pred)|},\\quad \\text{Recall} = \\frac{|\\text{BOW}(pred) \\cap \\text{BOW}(gt)|}{|\\text{BOW}(gt)|},\\quad \\text{F1} = \\frac{2 \\cdot \\text{P} \\cdot \\text{R}}{\\text{P} + \\text{R}}$$ å…¶ä¸­ï¼š $\\text{BOW}(A)$ è¡¨ç¤ºé¢„æµ‹ç­”æ¡ˆ($pred$)æˆ–çœŸå®ç­”æ¡ˆ($gt$)çš„è¯è¢‹é›†åˆ $\\cap$ è¿ç®—å¯¹å…±æœ‰è¯å–å…¶æœ€å°è¯é¢‘ åŸºçº¿æ–¹æ³• è¯„ä¼°å¯¹æ¯”ä»¥ä¸‹ä¸»æµæ–¹æ³•ï¼š\né€šç”¨åˆ†å—å™¨ Recursive Chunkerï¼šé€’å½’åˆ†å— Semantic Chunkerï¼šè¯­ä¹‰åˆ†å— æ®µè½æ£€ç´¢ä¸“ç”¨ Para Chunkerï¼šæ®µè½çº§åˆ†å— LumberChunkerï¼šLLMè¿­ä»£åˆ†å— æ¶ˆèå¯¹ç…§ MG Chunkerï¼šå¤šç²’åº¦åˆ†å—å™¨ï¼ˆæ— Logitså¼•å¯¼ï¼‰ LG Chunkerï¼šLogitså¼•å¯¼åˆ†å—å™¨ï¼ˆæ— å¤šç²’åº¦ï¼‰ â–¶ æ³¨ï¼šLG Chunkerä¸LGMGCä½¿ç”¨8ä½é‡åŒ–Llama3-8b â–¶ æ‰€æœ‰æ–¹æ³•åœ¨Î¸={200, 300, 500}è¯çš„åˆ†å—å°ºå¯¸ä¸‹æµ‹è¯•è¶…å‚æ•°æ•æ„Ÿæ€§ å®ç°ç»†èŠ‚\næ¶æ„ï¼š é‡‡ç”¨ç‹¬ç«‹æ£€ç´¢å™¨ä¸åˆæˆå™¨ï¼Œä¸åŒåˆ†å—ç­–ç•¥æ¥å…¥ç»Ÿä¸€æ¡†æ¶ æ£€ç´¢å™¨ï¼š â–¶ ç¨ å¯†æ£€ç´¢å™¨ï¼šBGE-Largeï¼ˆæ®µè½æ£€ç´¢ï¼‰ + E5-Largeï¼ˆä¸‹æ¸¸QAï¼‰ åˆæˆå™¨ï¼š â–¶ LLama3-8b-Instructï¼ˆ4ä½é‡åŒ–ï¼‰ â–¶ LLama3-70b-Instructï¼ˆfp16ï¼‰ æ§åˆ¶å˜é‡ï¼š ç”Ÿæˆç­”æ¡ˆé‡‡ç”¨è´ªå¿ƒæœç´¢é™ä½éšæœºæ€§ ä¸ºå…¬å¹³æ¯”è¾ƒä¸åŒåˆ†å—å°ºå¯¸ï¼š åˆæˆå™¨è¾“å…¥ä¸Šä¸‹æ–‡é•¿åº¦ä¸Šé™=1500è¯ Top kåˆ†å—é¡ºåºæ‹¼æ¥ç›´è‡³è¾¾ä¸Šé™ æ— æ£€ç´¢åŸºçº¿ï¼šå› ç®—åŠ›é™åˆ¶æˆªæ–­æ–‡æ¡£è‡³3500è¯/ ","date":"2025-07-23T00:00:00Z","permalink":"https://rooobeam.github.io/p/lgmgc%E8%A7%A3%E8%AF%BB/","title":"LGMGCè§£è¯»"},{"content":"2.3 Baselines Vanilla RAG åˆ†å—100tokensï¼Œè¾¹ç•Œå¤„ä¿ç•™å®Œæ•´å¥å­ï¼Œä¹Ÿå°±æ˜¯è¯´100+tokensï¼Œç”¨Snowflake Arctic-embed-m 1.5 embdding æ–‡æœ¬å—å’Œqueryï¼ŒæŸ¥è¯¢æ—¶è®¡ç®— cosine similarityï¼Œæ’åºï¼Œå–æ’åé å‰çš„å—ï¼Œç›´åˆ°åˆ°è¾¾æœ€å¤§è¾“å…¥tokensï¼Œæœ€åæŒ‰é™åºæ–¹å¼å’Œqueryç»™LLMã€‚\nFull-Document Baseline ä»…åœ¨ QuALITY ä¸Šæµ‹è¯•ï¼ˆå…¶docéƒ½åœ¨æœ€å¤§inputèŒƒå›´å†…ï¼‰ï¼Œä¿è¯æ— keyinfä¸¢å¤±ã€‚\nDOS RAG ä¸Vanilla RAGä¸åŒä¹‹å¤„åœ¨äºï¼Œæœ€åæŒ‰åŸæ–‡æ¡£é›†é‡Œå‡ºç°çš„é¡ºåºå’Œqueryæäº¤ç»™LLMã€‚\n","date":"2025-07-21T18:04:13+08:00","permalink":"https://rooobeam.github.io/p/%E6%96%AF%E5%9D%A6%E7%A6%8F%E9%87%8D%E8%AE%BErag%E6%96%B0%E5%9F%BA%E7%BA%BF%E4%B9%8Bdos_rag/","title":"æ–¯å¦ç¦é‡è®¾RAGæ–°åŸºçº¿ä¹‹DOS_RAG"},{"content":"å¤§å­¦ç”ŸLaTeX æŠ¥å‘Šæ¨¡æ¿ æœ¬æ¨¡æ¿é€‚ç”¨äºæ’°å†™å¤§ä½œä¸šæŠ¥å‘Šï¼ŒåŸºäºæˆéƒ½ç†å·¥å¤§å­¦ï¼ˆCDUTï¼‰çš„æŠ¥å‘Šæ ¼å¼è§„èŒƒè¿›è¡Œä¿®æ”¹ï¼ŒåŒ…å«å®Œæ•´çš„æ–‡æ¡£ç»“æ„ï¼ˆæ ‡é¢˜é¡µã€æ‘˜è¦ã€ç›®å½•ã€ç« èŠ‚ã€å‚è€ƒæ–‡çŒ®ã€é™„å½•ç­‰ï¼‰ï¼Œé¡µé¢å’Œè‹±æ–‡å­—ä½“è®¾ç½®éµå¾ªä¸€ä¸ªè‹±å›½é¡¹ç›®è§„èŒƒResearch_Project_Guide.pdfï¼Œå¹¶æä¾›äº†è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ã€‚\nğŸ“ æ–‡ä»¶ç»“æ„ ä»¥ä¸‹æ˜¯æ¨¡æ¿çš„æ–‡ä»¶ç»“æ„åŠå„æ–‡ä»¶ç”¨é€”è¯´æ˜ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 â”œâ”€â”€ main.tex # ä¸»æ–‡æ¡£æ–‡ä»¶ï¼ˆæ•´åˆæ‰€æœ‰å­æ–‡ä»¶ï¼Œç¼–è¯‘å…¥å£ï¼‰ â”œâ”€â”€ titlepage.tex # æ ‡é¢˜é¡µæ¨¡æ¿ï¼ˆåŒ…å«æ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸç­‰ï¼‰ â”œâ”€â”€ abstract.tex # æ‘˜è¦éƒ¨åˆ†ï¼ˆä¸­è‹±æ–‡æ‘˜è¦ï¼‰ â”œâ”€â”€ chapter1.tex # ç¬¬ä¸€ç« å†…å®¹ï¼ˆå¯æ‰©å±•ä¸ºchapter2.texã€chapter3.texç­‰ï¼‰ â”œâ”€â”€ reference.tex # å‚è€ƒæ–‡çŒ®éƒ¨åˆ†ï¼ˆå¼•ç”¨bibæ•°æ®åº“ï¼‰ â”œâ”€â”€ appendix.tex # é™„å½•éƒ¨åˆ†ï¼ˆè¡¥å……æ•°æ®ã€ä»£ç ç­‰ï¼‰ â”œâ”€â”€ backpage.tex # å°åº•é¡µï¼ˆå¯é€‰ï¼‰ â”œâ”€â”€ manual.tex # ä½¿ç”¨æ‰‹å†Œï¼ˆè¯¦ç»†è¯´æ˜å…¬å¼ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰æ’å…¥æ–¹æ³•ï¼‰ â”œâ”€â”€ ref.bib # å‚è€ƒæ–‡çŒ®æ•°æ®åº“ï¼ˆBibTeXæ ¼å¼ï¼Œéœ€ä¸reference.texå…³è”ï¼‰ â”œâ”€â”€ Research_Project_Guide.pdf # ä¸€ä¸ªè‹±å›½é¡¹ç›®çš„è§„èŒƒæŒ‡å¯¼ä¹¦ â”œâ”€â”€ configuration/ # é…ç½®æ–‡ä»¶å¤¹ï¼ˆæ ¼å¼ã€å­—ä½“ã€è‡ªå®šä¹‰å‘½ä»¤ï¼‰ â”‚ â”œâ”€â”€ CDUTReport.cls # æ ¸å¿ƒç±»æ–‡ä»¶ï¼ˆå®šä¹‰é¡µé¢å¸ƒå±€ã€ç« èŠ‚æ ¼å¼ç­‰ï¼‰ â”‚ â”œâ”€â”€ Mycommand.sty # è‡ªå®šä¹‰å‘½ä»¤ï¼ˆå¿«æ·æ’å…¥å›¾ç‰‡ã€è¡¨æ ¼ç­‰ï¼‰ â”‚ â”œâ”€â”€ Font set.tex # å­—ä½“è®¾ç½®ï¼ˆä½¿ç”¨Fandolç³»åˆ—ä¸­æ–‡å­—ä½“ï¼‰ â”‚ â”œâ”€â”€ Title set.tex # æ ‡é¢˜æ ¼å¼è®¾ç½®ï¼ˆæ ‡é¢˜é¡µã€ç« èŠ‚æ ‡é¢˜æ ·å¼ï¼‰ â”‚ â””â”€â”€ Fandol*.otf # Fandolå­—ä½“æ–‡ä»¶ï¼ˆé»‘ä½“ã€å®‹ä½“ã€æ¥·ä½“ï¼Œéœ€å®‰è£…æˆ–ä¿ç•™ï¼‰ â”œâ”€â”€ figs/ # å›¾ç‰‡æ–‡ä»¶å¤¹ï¼ˆå­˜æ”¾æ–‡æ¡£ä¸­ä½¿ç”¨çš„æ‰€æœ‰å›¾ç‰‡ï¼‰ â””â”€â”€ README.md # æœ¬è¯´æ˜æ–‡ä»¶ ğŸš€ ä½¿ç”¨è¯´æ˜ 1. ç¯å¢ƒè¦æ±‚ LaTeX ç¼–è¯‘å™¨ï¼šéœ€ä½¿ç”¨ XeLaTeXã€‚ å­—ä½“ä¾èµ–ï¼šconfigurationæ–‡ä»¶å¤¹ä¸­çš„Fandolå­—ä½“ï¼ˆFandolHei-Bold.otfã€FandolSong-Regular.otfç­‰ï¼‰éœ€ä¿ç•™ï¼Œæˆ–å®‰è£…åˆ°ç³»ç»Ÿå­—ä½“ç›®å½•ã€‚ 2. ç¼–è¯‘æ­¥éª¤ å…‹éš†ä»“åº“ï¼š 1 git clone https://github.com/rooobeam/General-LaTeX-Template-for-College-Students.git ç¼–è¯‘ä¸»æ–‡æ¡£ï¼ˆéœ€å¤šæ¬¡è¿è¡Œä»¥ç¡®ä¿äº¤å‰å¼•ç”¨å’Œå‚è€ƒæ–‡çŒ®æ­£ç¡®ï¼‰ï¼š ç¬¬ä¸€æ­¥ï¼šxelatex main.texï¼ˆç”Ÿæˆè¾…åŠ©æ–‡ä»¶ï¼‰ ç¬¬äºŒæ­¥ï¼šbibtex mainï¼ˆç¼–è¯‘å‚è€ƒæ–‡çŒ®ï¼Œè‹¥ä½¿ç”¨ref.bibæ•°æ®åº“ï¼‰ ç¬¬ä¸‰æ­¥ï¼šxelatex main.texï¼ˆæ›´æ–°å‚è€ƒæ–‡çŒ®å¼•ç”¨ï¼‰ ç¬¬å››æ­¥ï¼šxelatex main.texï¼ˆç¡®ä¿æ‰€æœ‰äº¤å‰å¼•ç”¨æ­£ç¡®ï¼‰ 3. å†…å®¹å¡«å…… æ ‡é¢˜é¡µï¼šä¿®æ”¹titlepage.texä¸­çš„æ ‡é¢˜ã€ä½œè€…ã€æ—¥æœŸç­‰ä¿¡æ¯ã€‚ æ‘˜è¦ï¼šåœ¨abstract.texä¸­å¡«å†™ä¸­è‹±æ–‡æ‘˜è¦ã€‚ ç« èŠ‚å†…å®¹ï¼šåœ¨chapter1.texã€chapter2.texç­‰æ–‡ä»¶ä¸­æ’°å†™ç« èŠ‚å†…å®¹ï¼Œå¯é€šè¿‡\\input{chapter1}åœ¨main.texä¸­å¼•ç”¨ã€‚ å‚è€ƒæ–‡çŒ®ï¼šå°†æ–‡çŒ®æ¡ç›®æ·»åŠ åˆ°ref.bibæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨\\cite{key}åœ¨æ–‡æ¡£ä¸­å¼•ç”¨ï¼Œreference.texä¼šè‡ªåŠ¨ç”Ÿæˆå‚è€ƒæ–‡çŒ®åˆ—è¡¨ã€‚ å›¾ç‰‡ï¼šå°†å›¾ç‰‡æ”¾åœ¨figsæ–‡ä»¶å¤¹ä¸­ï¼Œä½¿ç”¨\\includegraphics{figs/figure1.png}å¼•ç”¨ï¼ˆéœ€åŠ è½½graphicxåŒ…ï¼Œæ¨¡æ¿å·²åŒ…å«ï¼‰ã€‚ âš™ï¸ é…ç½®è¯´æ˜ 1. ç±»æ–‡ä»¶ï¼ˆCDUTReport.clsï¼‰ å®šä¹‰äº†æŠ¥å‘Šçš„æ ¸å¿ƒæ ¼å¼ï¼ŒåŒ…æ‹¬ï¼š\né¡µé¢å¸ƒå±€ï¼ˆA4çº¸ã€é¡µè¾¹è·ã€é¡µçœ‰é¡µè„šï¼‰ï¼› ç« èŠ‚æ ·å¼ï¼ˆæ ‡é¢˜å­—ä½“ã€ç¼–å·æ ¼å¼ï¼‰ï¼› ç›®å½•ç”Ÿæˆï¼ˆè‡ªåŠ¨æå–ç« èŠ‚æ ‡é¢˜ï¼‰ã€‚ å¦‚éœ€ä¿®æ”¹æ ¼å¼ï¼Œå¯ç¼–è¾‘æ­¤ç±»æ–‡ä»¶ï¼Œä½†å»ºè®®å…ˆå¤‡ä»½ã€‚ 2. è‡ªå®šä¹‰å‘½ä»¤ï¼ˆMycommand.styï¼‰ æä¾›äº†å¿«æ·å‘½ä»¤ï¼Œç®€åŒ–é‡å¤æ“ä½œï¼Œä¾‹å¦‚ï¼š\n\\fig{path}{caption}ï¼šæ’å…¥å›¾ç‰‡å¹¶æ·»åŠ è¯´æ˜ï¼› \\tab{label}{caption}{table content}ï¼šæ’å…¥è¡¨æ ¼å¹¶æ·»åŠ æ ‡ç­¾ï¼› \\code{language}{code content}ï¼šæ’å…¥ä»£ç å—ï¼ˆä½¿ç”¨listingsåŒ…ï¼‰ã€‚ å¯æ ¹æ®éœ€è¦æ·»åŠ æˆ–ä¿®æ”¹è‡ªå®šä¹‰å‘½ä»¤ã€‚ 3. å­—ä½“è®¾ç½®ï¼ˆFont_set.texï¼‰ Font_set.tex æ˜¯æ¨¡æ¿çš„æ ¸å¿ƒå­—ä½“é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸­æ–‡ã€è¥¿æ–‡ã€ç« èŠ‚æ ‡é¢˜åŠè¡¨æ ¼çš„å­—ä½“æ ·å¼ï¼Œç¡®ä¿æ–‡æ¡£ç¬¦åˆå­¦æœ¯è§„èŒƒä¸”æ˜¾ç¤ºæ¸…æ™°ã€‚ä»¥ä¸‹æ˜¯å…³é”®é…ç½®è¯´æ˜ï¼ˆè¯¦ç»†ä½¿ç”¨ç¤ºä¾‹è¯·å‚è€ƒ manual.tex ä¸­çš„ 1.8 å­—ä½“ ç« èŠ‚ï¼Œç¬¬3é¡µï¼‰ï¼š\nï¼ˆ1ï¼‰åŸºç¡€å­—ä½“é€‰æ‹© æ¨¡æ¿ä½¿ç”¨å¸¸è§è¥¿æ–‡å­—ä½“(Arial)å¹¶æ­é…Fandolç³»åˆ—ä¸­æ–‡å­—ä½“ï¼ˆéœ€ä¿ç•™ configuration æ–‡ä»¶å¤¹ä¸­çš„ .otf å­—ä½“æ–‡ä»¶ï¼‰ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\nä¸­æ–‡å­—ä½“ï¼š ä¸»å­—ä½“ï¼ˆé»˜è®¤æ­£æ–‡ï¼‰ï¼šFandolSong-Regular.otfï¼ˆå®‹ä½“ï¼‰ï¼ŒåŠ ç²—æ—¶è‡ªåŠ¨åˆ‡æ¢ä¸º FandolSong-Bold.otfï¼Œæ–œä½“æ—¶ä½¿ç”¨ FandolKai-Regular.otfï¼ˆæ¥·ä½“ï¼‰ï¼› æ— è¡¬çº¿å­—ä½“ï¼ˆç”¨äºæ ‡é¢˜/å¼ºè°ƒï¼‰ï¼šFandolHei-Regular.otfï¼ˆé»‘ä½“ï¼‰ï¼ŒåŠ ç²—æ—¶ä½¿ç”¨ FandolHei-Bold.otfï¼› ç­‰å®½å­—ä½“ï¼ˆç”¨äºä»£ç /æ•°æ®ï¼‰ï¼šFandolHei-Regular.otfï¼ˆé»‘ä½“ï¼‰ï¼ŒåŠ ç²—æ—¶ä½¿ç”¨ FandolHei-Bold.otfã€‚ è¥¿æ–‡å­—ä½“ï¼š ä¸»å­—ä½“/æ— è¡¬çº¿å­—ä½“ï¼šArialï¼ˆç³»ç»Ÿé»˜è®¤å®‰è£…ï¼Œç¡®ä¿è¥¿æ–‡æ˜¾ç¤ºæ¸…æ™°ï¼‰ï¼› æ­£å¼è¥¿æ–‡å­—ä½“ï¼ˆç”¨äºè¡¨æ ¼/å…¬å¼ï¼‰ï¼šTimes New Romanï¼ˆé€šè¿‡ \\timesnewroman å‘½ä»¤è°ƒç”¨ï¼‰ã€‚ ï¼ˆ2ï¼‰è‡ªå®šä¹‰å­—ä½“å¿«æ·å‘½ä»¤ ä¸ºæ–¹ä¾¿åˆ‡æ¢å­—ä½“ï¼Œæ¨¡æ¿å®šä¹‰äº†ä»¥ä¸‹å¸¸ç”¨å‘½ä»¤ï¼ˆåœ¨ manual.tex ä¸­æœ‰è¯¦ç»†ç¤ºä¾‹ï¼‰ï¼š\n\\songtiï¼šåˆ‡æ¢ä¸ºå®‹ä½“ï¼ˆä¸­æ–‡æ­£æ–‡é»˜è®¤å­—ä½“ï¼Œé€‚åˆå¤§æ®µæ–‡å­—ï¼‰ï¼› \\heitiï¼šåˆ‡æ¢ä¸ºé»‘ä½“ï¼ˆç”¨äºç« èŠ‚æ ‡é¢˜ã€é‡ç‚¹å†…å®¹ï¼Œå¢å¼ºè§†è§‰å±‚æ¬¡æ„Ÿï¼‰ï¼› \\kaishuï¼šåˆ‡æ¢ä¸ºæ¥·ä½“ï¼ˆç”¨äºå¼•ç”¨ã€æ³¨é‡Šæˆ–éœ€è¦åŒºåˆ†çš„å†…å®¹ï¼Œé£æ ¼æ›´æ­£å¼ï¼‰ã€‚ ï¼ˆ3ï¼‰ç« èŠ‚æ ‡é¢˜å­—ä½“è®¾ç½® é€šè¿‡ titlesec åŒ…ä¼˜åŒ–äº†ç« èŠ‚æ ‡é¢˜çš„æ ¼å¼ï¼Œç¡®ä¿å±‚çº§æ¸…æ™°ï¼š\nç« èŠ‚ï¼ˆsectionï¼‰ï¼šé»‘ä½“ã€16ptã€åŠ ç²—ã€å±…ä¸­æ˜¾ç¤ºï¼Œæ ‡é¢˜å‰è‡ªåŠ¨æ·»åŠ â€œç¬¬Xç« â€ï¼ˆå¦‚â€œ2. Problem Restatementâ€ï¼‰ï¼› å°èŠ‚ï¼ˆsubsectionï¼‰ï¼šé»‘ä½“ã€14ptã€åŠ ç²—ï¼Œå·¦ä¾§æ˜¾ç¤ºå°èŠ‚ç¼–å·ï¼ˆå¦‚â€œ2.1 Problem Backgroundâ€ï¼‰ï¼› å­å°èŠ‚ï¼ˆsubsubsectionï¼‰ï¼šé»‘ä½“ã€12ptã€åŠ ç²—ï¼Œå·¦ä¾§æ˜¾ç¤ºå­å°èŠ‚ç¼–å·ï¼ˆå¦‚â€œ1.1.1 abcdâ€ï¼‰ã€‚ ï¼ˆ4ï¼‰è¡¨æ ¼å­—ä½“é…ç½® è¡¨æ ¼å†…å®¹é»˜è®¤ä½¿ç”¨Times New Roman 10ptå­—ä½“ï¼ˆç¬¦åˆå­¦æœ¯æ–‡æ¡£çš„ä¸¥è°¨é£æ ¼ï¼‰ï¼Œé€šè¿‡é‡å®šä¹‰ tabular å’Œ tabularx ç¯å¢ƒå®ç°ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®ã€‚\nï¼ˆ5ï¼‰æ³¨æ„äº‹é¡¹ å­—ä½“å®‰è£…ï¼šè‹¥ç³»ç»Ÿæœªå®‰è£…Fandolå­—ä½“ï¼Œéœ€å°† configuration æ–‡ä»¶å¤¹ä¸­çš„å­—ä½“æ–‡ä»¶ï¼ˆå¦‚ FandolHei-Bold.otfã€FandolSong-Regular.otf ç­‰ï¼‰å¤åˆ¶åˆ°ç³»ç»Ÿå­—ä½“ç›®å½•ï¼ˆå¦‚ Windows çš„ C:\\Windows\\Fontsï¼‰ï¼› è¥¿æ–‡å­—ä½“ä¾èµ–ï¼šArial æ˜¯å¤§å¤šæ•°ç³»ç»Ÿçš„é»˜è®¤å­—ä½“ï¼Œè‹¥æœªå®‰è£…éœ€æ‰‹åŠ¨æ·»åŠ ï¼› ä¿®æ”¹å­—ä½“ï¼šè‹¥éœ€è°ƒæ•´å­—ä½“æ ·å¼ï¼ˆå¦‚å¢å¤§æ ‡é¢˜å­—ä½“ï¼‰ï¼Œå¯ç¼–è¾‘ Font_set.tex ä¸­çš„ \\titleformat æˆ– \\setCJKmainfont å‘½ä»¤ï¼Œä½†å»ºè®®å…ˆå¤‡ä»½åŸæ–‡ä»¶ã€‚ é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œæ¨¡æ¿ç¡®ä¿äº†æ–‡æ¡£çš„å­—ä½“ä¸€è‡´æ€§å’Œå­¦æœ¯è§„èŒƒæ€§ï¼ŒåŒæ—¶æä¾›äº†çµæ´»çš„å­—ä½“åˆ‡æ¢åŠŸèƒ½ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚å¦‚éœ€æ›´è¯¦ç»†çš„å­—ä½“ä½¿ç”¨è¯´æ˜ï¼Œè¯·å‚è€ƒ manual.tex ä¸­çš„ 1.8 å­—ä½“ ç« èŠ‚ï¼ˆç¬¬3é¡µï¼‰ã€‚\nğŸ“– ç¤ºä¾‹ä¸æ‰‹å†Œ manual.texæ˜¯è¯¦ç»†çš„ä½¿ç”¨æ‰‹å†Œï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\næ–‡ä»¶ç»“æ„ æ’å…¥å…¬å¼ æ’å…¥å›¾ç‰‡ æ’å…¥è¡¨æ ¼ æ’å…¥ä¼ªä»£ç  ç²˜è´´ä»£ç  å¼•ç”¨ å­—ä½“ æ·»åŠ è„šæ³¨å¹¶è®¾ç½®é“¾æ¥ å»ºè®®ç”¨æˆ·å…ˆæŸ¥çœ‹manual.texï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨æ¨¡æ¿çš„å„é¡¹åŠŸèƒ½ã€‚\nâš ï¸ æ³¨æ„äº‹é¡¹ ç¼–è¯‘ç¯å¢ƒï¼šå¿…é¡»ä½¿ç”¨XeLaTeXç¼–è¯‘ï¼Œå¦åˆ™ä¸­æ–‡å­—ä½“å¯èƒ½æ— æ³•æ­£ç¡®æ˜¾ç¤ºã€‚ å›¾ç‰‡è·¯å¾„ï¼šæ‰€æœ‰å›¾ç‰‡è¯·æ”¾åœ¨figsæ–‡ä»¶å¤¹ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨ï¼ˆå¦‚figs/figure1.pngï¼‰ï¼Œé¿å…ç»å¯¹è·¯å¾„å¯¼è‡´çš„é—®é¢˜ã€‚ å‚è€ƒæ–‡çŒ®ï¼šref.bibæ–‡ä»¶éœ€ä¸ºBibTeXæ ¼å¼ï¼Œå¹¶åœ¨reference.texä¸­ä½¿ç”¨\\bibliography{ref}å¼•ç”¨ã€‚ è‡ªå®šä¹‰å‘½ä»¤ï¼šä¿®æ”¹Mycommand.styå‰è¯·å¤‡ä»½ï¼Œé¿å…è¯¯æ“ä½œå¯¼è‡´æ¨¡æ¿æ— æ³•ç¼–è¯‘ã€‚ äº¤å‰å¼•ç”¨ï¼šä½¿ç”¨\\label{chapter1}ä¸ºç« èŠ‚æ·»åŠ æ ‡ç­¾ï¼Œä½¿ç”¨\\ref{chapter1}å¼•ç”¨ï¼Œç¼–è¯‘æ—¶éœ€å¤šæ¬¡è¿è¡ŒXeLaTeXä»¥ç¡®ä¿å¼•ç”¨æ­£ç¡®ã€‚ ğŸ“ è”ç³»æ–¹å¼ è‹¥æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ä½œè€…ï¼š\nGitHub Issuesï¼šhttps://github.com/rooobeam/General-LaTeX-Template-for-College-Students.git/issues Emailï¼šrooobeam@uir.edu.cn LaTeX Template for College Students\u0026rsquo; Reports This template is suitable for writing term paper reports. It is modified based on the report format specifications of Chengdu University of Technology (CDUT) and includes a complete document structure (title page, abstract, table of contents, chapters, references, appendices, etc.). The page and English font settings adhere to the British project specification Research_Project_Guide.pdf, and detailed usage instructions are provided.\nğŸ“ File Structure The following is the file structure of the template and explanations of each file\u0026rsquo;s purpose:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 â”œâ”€â”€ main.tex # Main document file (integrates all subfiles, compilation entry point) â”œâ”€â”€ titlepage.tex # Title page template (includes title, author, date, etc.) â”œâ”€â”€ abstract.tex # Abstract section (Chinese and English abstracts) â”œâ”€â”€ chapter1.tex # Chapter 1 content (can be extended to chapter2.tex, chapter3.tex, etc.) â”œâ”€â”€ reference.tex # References section (cites the bib database) â”œâ”€â”€ appendix.tex # Appendix section (supplementary data, code, etc.) â”œâ”€â”€ backpage.tex # Back cover page (optional) â”œâ”€â”€ manual.tex # User manual (details on inserting equations, images, tables, etc.) â”œâ”€â”€ ref.bib # Bibliography database (BibTeX format, must be linked to reference.tex) â”œâ”€â”€ Research_Project_Guide.pdf # British project specification guide â”œâ”€â”€ configuration/ # Configuration folder (format, fonts, custom commands) â”‚ â”œâ”€â”€ CDUTReport.cls # Core class file (defines page layout, chapter styles, etc.) â”‚ â”œâ”€â”€ Mycommand.sty # Custom commands (quick insertion of images, tables, etc.) â”‚ â”œâ”€â”€ Font set.tex # Font settings (uses Fandol series Chinese fonts) â”‚ â”œâ”€â”€ Title set.tex # Title format settings (title page, chapter title styles) â”‚ â””â”€â”€ Fandol*.otf # Fandol font files (Hei, Song, Kai; must be retained or installed) â”œâ”€â”€ figs/ # Image folder (stores all images used in the document) â””â”€â”€ README.md # This instruction file ğŸš€ Usage Instructions 1. Environment Requirements LaTeX Compiler: XeLaTeX is required. Font Dependencies: Fandol fonts in the configuration folder (e.g., FandolHei-Bold.otf, FandolSong-Regular.otf) must be retained or installed to the system font directory (e.g., C:\\Windows\\Fonts for Windows). 2. Compilation Steps Clone the Repository: 1 git clone https://github.com/rooobeam/General-LaTeX-Template-for-College-Students.git Compile the Main Document (run multiple times to ensure correct cross-references and references): Step 1: xelatex main.tex (generate auxiliary files) Step 2: bibtex main (compile references if using ref.bib) Step 3: xelatex main.tex (update reference citations) Step 4: xelatex main.tex (ensure all cross-references are correct) 3. Content Filling Title Page: Modify the title, author, date, and other information in titlepage.tex. Abstract: Fill in the Chinese and English abstracts in abstract.tex. Chapter Content: Write chapter content in chapter1.tex, chapter2.tex, etc., and reference them in main.tex using \\input{chapter1}. References: Add bibliographic entries to ref.bib and cite them in the document using \\cite{key}. The reference.tex file will automatically generate the references list. Images: Place images in the figs folder and reference them using \\includegraphics{figs/figure1.png} (the graphicx package is included in the template). âš™ï¸ Configuration Instructions 1. Class File (CDUTReport.cls) Defines the core format of the report, including:\nPage layout (A4 paper, margins, header/footer); Chapter styles (title fonts, numbering format); Table of contents generation (automatically extracts chapter titles).\nTo modify the format, edit this file, but backup first. 2. Custom Commands (Mycommand.sty) Provides shortcut commands to simplify repetitive operations, e.g.:\n\\fig{path}{caption}: Insert an image with a caption; \\tab{label}{caption}{table content}: Insert a table with a label; \\code{language}{code content}: Insert a code block (uses the listings package).\nAdd or modify custom commands as needed. 3. Font Settings (Font_set.tex) Font_set.tex is the core font configuration file of the template, defining the font styles for Chinese, Western text, chapter titles, and tables to ensure the document complies with academic standards and displays clearly. Below are key configuration explanations (for detailed usage examples, refer to Section 1.8 Fonts in manual.tex, Page 3):\n(1) Basic Font Selection The template uses common Western fonts (Arial) paired with Fandol series Chinese fonts (retain the .otf files in the configuration folder):\nChinese Fonts: Main font (default body text): FandolSong-Regular.otf (SimSun), automatically switches to FandolSong-Bold.otf when bold, and uses FandolKai-Regular.otf (KaiTi) for italics; Sans-serif font (for titles/emphasis): FandolHei-Regular.otf (HeiTi), switches to FandolHei-Bold.otf when bold; Monospace font (for code/data): FandolHei-Regular.otf (HeiTi), switches to FandolHei-Bold.otf when bold. Western Fonts: Main/sans-serif font: Arial (preinstalled on most systems, ensures clear Western text display); Formal Western font (for tables/equations): Times New Roman (called via \\timesnewroman). (2) Custom Font Shortcut Commands To facilitate font switching, the template defines the following common commands (examples in manual.tex):\n\\songti: Switch to SimSun (default Chinese body text, suitable for long passages); \\heiti: Switch to HeiTi (for chapter titles, key content, enhances visual hierarchy); \\kaishu: Switch to KaiTi (for quotes, annotations, or differentiated content, more formal style). (3) Chapter Title Font Settings Optimizes chapter title formats using the titlesec package for clear hierarchy:\nSection: HeiTi, 16pt, bold, centered, automatically adds \u0026ldquo;Chapter X\u0026rdquo; before the title (e.g., \u0026ldquo;2. Problem Restatement\u0026rdquo;); Subsection: HeiTi, 14pt, bold, left-aligned with subsection number (e.g., \u0026ldquo;2.1 Problem Background\u0026rdquo;); Subsubsection: HeiTi, 12pt, bold, left-aligned with subsubsection number (e.g., \u0026ldquo;1.1.1 abcd\u0026rdquo;). (4) Table Font Configuration Table content uses Times New Roman 10pt by default (complies with academic document rigor), implemented by redefining the tabular and tabularx environmentsâ€”no manual setting required.\n(5) Notes Font Installation: If Fandol fonts are not installed, copy the font files (e.g., FandolHei-Bold.otf, FandolSong-Regular.otf) from the configuration folder to the system font directory (e.g., C:\\Windows\\Fonts for Windows); Western Font Dependencies: Arial is a default font on most systemsâ€”install manually if missing; Modifying Fonts: To adjust font styles (e.g., increase title font size), edit the \\titleformat or \\setCJKmainfont commands in Font_set.tex, but backup first. Through the above configurations, the template ensures font consistency and academicè§„èŒƒæ€§ (academic standardization) while providing flexible font switching to meet different needs. For more detailed font usage instructions, refer to Section 1.8 Fonts in manual.tex (Page 3).\nğŸ“– Examples and Manual manual.tex is a detailed user manual covering the following content:\nFile Structure Insert Equations Insert Images Insert Tables Insert Pseudocode Paste Code Citations Fonts Add Footnotes and Set Links It is recommended to read manual.tex first to learn how to use the template\u0026rsquo;s features.\nâš ï¸ Notes Compilation Environment: XeLaTeX must be used for compilationâ€”otherwise, Chinese fonts may not display correctly. Image Path: All images must be placed in the figs folder and referenced using relative paths (e.g., figs/figure1.png) to avoid issues with absolute paths. References: The ref.bib file must be in BibTeX format and referenced in reference.tex using \\bibliography{ref}. Custom Commands: Backup Mycommand.sty before modifying to avoid template compilation failures due to incorrect operations. Cross-References: Use \\label{chapter1} to add labels to chapters and \\ref{chapter1} to cite themâ€”run XeLaTeX multiple times to ensure correct cross-references. ğŸ“ Contact Information For questions or suggestions, contact the author via:\nGitHub Issues: https://github.com/rooobeam/General-LaTeX-Template-for-College-Students.git/issues Email: rooobeam@uir.edu.cn ","date":"2025-07-02T12:36:24+08:00","permalink":"https://rooobeam.github.io/p/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%8A%A5%E5%91%8Alatex%E6%A8%A1%E6%9D%BF/","title":"å¤§å­¦ç”ŸæŠ¥å‘ŠLaTeXæ¨¡æ¿"},{"content":"ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ— ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘\n","date":"2025-06-28T12:49:17+08:00","permalink":"https://rooobeam.github.io/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%A2%98%E5%8D%95/","title":"æ•°æ®ç»“æ„é¢˜å•"},{"content":"ç”¨æ³•ç†è§£ ä»0åˆ°1ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ä½¿ç”¨å“ˆå·¥å¤§NLPå·¥å…·â€”â€”PyLTP-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘\nåœ¨çº¿æ¼”ç¤º è¯­è¨€æŠ€æœ¯å¹³å°ï¼ˆ Language Technology Plantform | LTP ï¼‰\nä»£ç å®ç° è¯­è¨€æŠ€æœ¯å¹³å°ï¼ˆ Language Technology Plantform | LTP ï¼‰\næœ¬åœ°ä¸‹è½½æ¨¡å‹åˆ°\u0026quot;./ltp_models/small\u0026quot;ï¼Œä¸‹è½½å†…å®¹ï¼šLTP/small at main\n1 2 3 4 5 6 7 8 from ltp import LTP import os MODEL_DIR = \u0026#34;./ltp_models/small\u0026#34; os.makedirs(MODEL_DIR, exist_ok=True) ltp = LTP(MODEL_DIR) result = ltp.pipeline([\u0026#34;ä»–å«æ±¤å§†å»æ‹¿å¤–è¡£ã€‚\u0026#34;], tasks = [\u0026#34;cws\u0026#34;,\u0026#34;dep\u0026#34;]) print(result.dep) äº‘è®¡ç®—èƒŒæ™¯\näº”å¤§ç‰¹å¾ èµ„æºæ± åŒ–\u0026hellip;æŒ‰éœ€\u0026hellip; äº‘æœåŠ¡åº”ç”¨çš„å››ç§éƒ¨ç½²æ¨¡å‹ï¼šå…¬æœ‰ ç§æœ‰ ç¤¾åŒº æ··åˆ ä¸‰ç§æœåŠ¡æ¨¡å¼ï¼šSAS PAS IAS å¤§æ•°æ®ä¸‰Vç‰¹å¾ äº‘æ•°æ®é¢ä¸´çš„å¨èƒï¼šæ•°æ®æ³„éœ²ã€æŸåã€å†—ä½™ é—¨é™å®‰å…¨å»é‡\näº‘å­˜å‚¨çš„ä¼˜åŠ¿ æ•°æ®å»é‡ç­–ç•¥åˆ†ç±»å“ªå‡ ç§ï¼Œæ–‡ä»¶çº§å—çº§ï¼Œä¼˜ç¼ºç‚¹ æ”»å‡»è€… ä¸¤å¤§ç‰¹å¾é‡è¦ï¼šå®¢æˆ·ç«¯å»é‡ç‰¹æ€§ï¼Œç›®æ ‡ç«¯å»é‡ç‰¹æ€§ æ”»å‡»è€… å¦‚ä½•åˆ¤æ–­å»é‡æ˜¯å¦å‘ç”Ÿï¼šè§‚å¯Ÿæµé‡åˆ¤æ–­å»é‡æ˜¯å¦å‘ç”Ÿï¼Œä¼ªè£…æˆç”¨æˆ·éå†æ‰€æœ‰ç‰ˆæœ¬ éšæœºé˜ˆå€¼æ–¹æ¡ˆï¼šä¸ºä»€ä¹ˆè¦åˆ†é…éšæœºé˜ˆå€¼ï¼Œä¸ºä»€ä¹ˆæ˜¯éšæœºé˜ˆå€¼ï¼Œå‡å¦‚è®¾ç½®ä¸€ä¸ªå…¨å±€é˜ˆå€¼ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ éšæœºå†—ä½™å—æ–¹æ¡ˆ\næ•°æ®å»é‡ä¸­LRIæ”»å‡»å¸¦æ¥çš„æŒ‘æˆ˜æ˜¯ï¼ŸCEæˆ–MAIRçš„å±€é™æ€§æ˜¯ï¼Ÿ ç°æœ‰è§£å†³LRIçš„æ¨¡å‹ é€šç”¨æ¨¡å‹ RRCSçš„åŸºæœ¬æ€è·¯æ˜¯ï¼Ÿ RRCSåŒ…æ‹¬ä¸‰ä¸ªå…³é”®åŠŸèƒ½æ¨¡å—æ˜¯ä»€ä¹ˆï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼šèŒƒå›´ç”Ÿæˆã€è¾¹ç•Œè®¾ç½®ï¼Œå®‰å…¨æ— å…³æ¶ˆé™¤ ä¸€èˆ¬æƒ…å†µä¸‹çš„LRIæ”»å‡»ï¼Œæœ‰é™„åŠ å—çš„LRIæ”»å‡»ï¼Œåˆ†åˆ«ç»™å‡ºéšç§æ³„éœ²çš„æ¦‚ç‡ï¼Œä»¥è¯¾ä¸Šè®²çš„ä¸ºå‡†ï¼Œè¯¾ä»¶æœ‰è¯¯ã€‚ è¯·æ±‚åˆå¹¶æ–¹æ¡ˆ\næµé‡æ··æ·†çš„å±€é™æ€§ï¼šæ— æ³•ç¡®å®šæ•æ„Ÿå—å…·ä½“ä½ç½®ï¼Œæ— æ³•æŠµæŠ—é™„åŠ å—æ”»å‡» æè¿°è¯·æ±‚åˆå¹¶æ–¹æ¡ˆçš„ç³»ç»Ÿæ¨¡å‹å’Œå¨èƒæ¨¡å‹ï¼šç³»ç»Ÿ-æœ‰é‚£å‡ ä¸ªå‚ä¸æ–¹ï¼Œæ€ä¹ˆäº¤äº’ï¼Œä¸Šä¼ å‰åˆ‡å—ï¼Œè®¡ç®—å“ˆå¸Œ\u0026hellip;ã€‚å¨èƒ-åªæœ‰ä¸€ä¸ªæ•æ„Ÿå—ï¼Œå…¶ä»–éƒ½å…¬å¼€å—ï¼Œå­˜åœ¨ä»€ä¹ˆå®‰å…¨å¨èƒ åˆ†æè¯·æ±‚åˆå¹¶æ–¹æ¡ˆåœ¨æœ‰é™„åŠ å—ä¸‹çš„å®‰å…¨æ€§ï¼Œåˆ†å¤šç§æƒ…å†µï¼Œæƒ…å†µè¯¾ä»¶ä¸Šã€‚ å®™æ–¯+IARE\nåŒºåˆ† å­˜åœ¨æ€§éšç§ã€å¼±å­˜åœ¨æ€§éšç§ã€ä¸å­˜åœ¨æ€§éšç§ä¿æŠ¤\nZOUSæ–¹æ¡ˆä¸‰å¤§ä¼˜ç‚¹æ˜¯ï¼Ÿ\nZOUSåŒ…å«çš„ä¸‰ç§æŠ€æœ¯æ˜¯ä»€ä¹ˆï¼šï¼Ÿã€soræ··åˆã€è„å—åˆ—è¡¨\nZOUSåœ¨å•æ¬¡å»é‡æ£€æŸ¥ å¤šæ¬¡å»é‡æ£€æŸ¥ çš„ å®‰å…¨æ€§åˆ†æï¼Œè¦æ±‚ç»™å‡ºæ¦‚ç‡åˆ†æï¼Œå¯¹åº”åˆ°ä¸‰ç§éšç§ä¿æŠ¤\nRAREç›¸å¯¹ZOUSçš„æ”¹è¿›åœ¨å“ªé‡Œ\nç¼–ç å®¢æˆ·ç«¯å»é‡\nè·¨ç”¨æˆ·çš„å®¢æˆ·ç«¯æ•°æ®å»é‡é¢ä¸´çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿäº‘ç«¯é€éœ²ä¸€äº›æ•°æ®çš„å­˜åœ¨æ€§çŠ¶æ€ç¡®ä¿å»é‡å‘ç”Ÿä»¥åŠèŠ‚çœå¸¦å®½ï¼Œå¦ä¸€æ–¹é¢ï¼Œåˆå¸Œæœ›æ•°æ®ä¿¡æ¯å­˜åœ¨æ€§éšç§å¾—åˆ°ä¿æŠ¤ã€‚ CIDERçš„è¿”å›å€¼åŒºé—´ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾ç½®ï¼Œèƒ½å¦æ›´æ”¹è¿”å›å€¼åŒºé—´ æ¯æ¬¡éƒ½è¦æ±‚ä¸Šä¼ 100ä¸ªä¼šæœ‰ä»€ä¹ˆé—®é¢˜ è¿”å›å€¼ä¸æ˜¯è¿ç»­é€’å¢çš„è¯ä¼šæ€ä¹ˆæ · 8 9 10æ²¡å‘½ä¸­ï¼Œè¦æ±‚ä¸Šä¼ 11 12ï¼Œæåˆ°è¿‡çš„ä¸Šä¼ çš„é—®é¢˜ æ–­å±‚é—®é¢˜ ç†è§£å„ç§æƒ…å†µï¼Œç†è§£CIDERå“åº”è¡¨ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ CIDERçš„å®‰å…¨æ€§åˆ†æï¼šæ”»å‡»è€…ä¸åŒï¼Œä¸åŒå“åº”å€¼çš„åˆ†æ å¹¿ä¹‰å»é‡\nå°±æ˜¯æŠŠè¿™ä¸ªåˆ†ä¸º..ï¼Œåˆ†ä¸ºåŸºå’Œåç§»é‡ï¼Œå¯¹åŸºå¼€å±•è·¨ç”¨æˆ·ï¼Œä¼šåç§»é‡å¼€å±•äº‘ç«¯å»é‡ ä¸ºä»€ä¹ˆè¿™æ ·èƒ½æŠµæŠ—ä¾§ä¿¡é“æ”»å‡» å¯¹åŸºçš„æå–æœ‰ä»€ä¹ˆæ ·çš„è¦æ±‚ï¼šå¯¹åŸºæ³›åŒ–ï¼Œè¦ç”¨è¾ƒå¤§çš„æ¦‚ç‡æå–ç›¸åŒçš„åŸºï¼Œç„¶å\u0026hellip;ï¼Œä»ç›¸ä¼¼æ•°æ®æå–ç›¸åŒåŸº æŒ‚æ˜‚ä»¥å»é™¤å®‰å…¨æ€§åˆ†æï¼šè¯æ˜å¯¹äº å•ä¸€æ¨¡æ¿çš„ ç¬¬æœ€å°ä¸Šæ–‡ä»¶ï¼Œå¯¹äºé‡å¤æ¨¡æ¿æ–‡ä»¶ï¼ˆæ•°æ®åº“æ–‡ä»¶ï¼‰ å¼‚æˆ–ç­–ç•¥\nå¼‚æˆ–ç­–ç•¥çš„å¨èƒæ¨¡å‹æ˜¯ï¼Ÿç”¨M_rè¡¨ç¤ºéšæœºç”Ÿæˆçš„ï¼Œè°ƒçš®M_rå’ŒMï¼Ÿçš„æ¯”ä¾‹å¯ä»¥ï¼Œæ€ä¹ˆå»è°ƒé…æ¥çªƒå–å­˜åœ¨æ€§éšç§ å¼‚æˆ–ç­–ç•¥å¢å¼ºæ–¹æ¡ˆæ ¸å¿ƒç­–ç•¥ï¼ŒåŸºç¡€æ–¹æ¡ˆä¸­På¤§äº1çš„æ—¶å€™æ‰ä¼šæœ‰å—éœ€è¦è¢«æŠ‘æˆ–ä¸¤æ¬¡ï¼Œå¢å¼ºæ–¹æ¡ˆï¼Œæ— è®ºæ”»å‡»è€…ï¼Œ..æ¨æµ‹å—çš„éšç§ å¢å¼ºæ–¹æ¡ˆé‡Œ è®¾ç½®pmin pmaxï¼Œé˜²æ­¢æ”»å‡»è€…è§‚å¯Ÿå¼‚æˆ–ä¸¤æ¬¡çš„å—çš„æ•°é‡çªƒå–éšç§ DCEæŠ€æœ¯ï¼ˆå”¯ä¸€å¯¹åº”å¯†æ–‡ï¼‰\nDCEæ–¹æ¡ˆçš„ä¸»è¦ä¼˜åŠ¿ï¼Ÿåœ¨å‡å°‘äº‘ç«¯å­˜å‚¨å‰æä¸‹å‡å°‘ä¾§ä¿¡é“æ”»å‡» kåŒ¿åçš„æ¦‚å¿µï¼Œåªæœ‰å½“kä¸ªç”¨æˆ·éƒ½æ‹¥æœ‰..æ‰èšåˆï¼Œå‡ ä¸ªå¤§Cï¼Œæ‰èƒ½è§£å‡ºc æŒæ¡åŸºç¡€æ–¹æ¡ˆ å¢å¼ºæ–¹æ¡ˆ å„ä¸ªç»„ä»¶å’ŒåŠŸèƒ½ï¼Œçœ‹çœ‹è¯¾ä»¶ä¸Šçš„ä¸¤ä¸ªä¾‹å­ï¼Œä¸¤ä¸ªæ–¹æ¡ˆæ€ä¹ˆåšçš„ï¼Œå›å¤´çœ‹æ‡‚æ¯ä¸ªå½¢å¼åŒ–çš„è¡¨è¿° åŸºç¡€æ–¹æ¡ˆç¼ºç‚¹æ˜¯ï¼Œå¢å¼ºæ–¹æ¡ˆçš„æ”¹è¿›æ˜¯ï¼Ÿ å®Œæ•´æ€§å®¡è®¡PDP\nè§£å†³äº‘æ•°æ® æŸåæˆ–ç¯¡æ”¹çš„å‘ç°\næŸåã€ç¯¡æ”¹åŸå› æœ‰å“ªäº›ï¼Ÿè¯¾ä»¶ä¸Šæœ‰ï¼Œç¬¬ä¸‰æ–¹æ”»å‡»ï¼Œäº‘ä¿éšœå£°èª‰\næ•°æ®å®Œæ•´æ€§å®¡è®¡çš„ç›®æ ‡æ˜¯ï¼Ÿå…¬å¼€éªŒè¯/å®¡è®¡ ä»€ä¹ˆæ„æ€ï¼šå…è®¸ç¬¬ä¸‰æ–¹ååŠ©ã€ä¸é™æ¬¡æ•°ã€æ•°æ®åŠ¨æ€æ›´æ–°æ“ä½œï¼šè¯¾ä»¶ä¸ºå‡†\npdpä¸ºä»£è¡¨çš„å®Œæ•´æ€§å®¡è®¡æµç¨‹æ˜¯æ€æ ·çš„ï¼Œåˆ†å—ã€æ ‡ç­¾\nPDPæ˜¯åŸºäºRSAç­¾åæ„é€ çš„å®Œæ•´æ€§å®¡è®¡æ–¹æ³•\nRSAåŠ è§£å¯†ç®—æ³•æµç¨‹ã€ç­¾ååŸç†\nPDPæµç¨‹å’Œè¯¦ç»†æ¨å¯¼ï¼Œå¦‚ä½•éªŒè¯ç­¾åçš„\näº‘ç«¯æ•°æ®æŸåç‡ä¸ºtçš„æƒ…å†µä¸‹ï¼Œä¸€æ¬¡æŒ‘æˆ˜Cä¸ªå—ï¼Œå°±å¯ä»¥ä»¥ä¸å°äºPçš„æ¦‚ç‡å‘ç°ï¼Œå¦‚ä½•æ¨å¯¼çš„ï¼Œä»å®é™…tæ¨å¯¼ï¼Œå½“æ—¶é‚£ä¸ª259çš„è®¡ç®—ã€‚ï¼ˆè®¡ç®—å™¨ï¼‰\nåŸºç¡€æ–¹æ¡ˆä¼˜ç¼ºç‚¹åˆ†æï¼Œæœ€åä¸€æ¬¡è¯¾ è¯¾ä»¶ä¸Šè®²çš„ä¸¤ä¸ªåŸºç¡€æ–¹æ¡ˆæ”¯æŒéšç§ä¿æŠ¤çš„ä¸‰æ–¹\næ”¯æŒå…¬å¼€å®¡è®¡çš„ä¸‰æ–¹å®¡è®¡æ¨¡å‹çš„åŸºæœ¬åŸç†ï¼Œè¦æ±‚æ˜ç¡®æ¯ä¸€æ–¹çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆ\næ€ä¹ˆå»æ”¯æŒæ— é™æ¬¡æŒ‘æˆ˜é˜²æ­¢é‡æ”¾æ”»å‡»\nè¦çŸ¥é“æ”¯æŒæ‰¹é‡å®¡è®¡çš„ï¼Œæ¨å¯¼ä¸ç”¨\néšç§æ³„éœ²çš„é—®é¢˜åœ¨å“ªé‡Œï¼Œå¦‚ä½•é˜²æ­¢éšç§æ³„éœ²çš„ï¼Ÿ\nè¿™ä¸ªæ–¹æ³•å®Œæ•´çš„æ¨å¯¼è¿‡ç¨‹ï¼ŒåŒçº¿æ€§ç­‰å¼æ˜¯å¦‚ä½•æ¨å¯¼çš„\nè¿™ä¸ªæ–¹æ³•å­˜åœ¨ä»€ä¹ˆæ ·çš„å®‰å…¨æ€§é—®é¢˜ã€‚\nå¤‡æ³¨ï¼š\nåŸºæœ¬æ‰€æœ‰çŸ¥è¯†ç‚¹æ¶µç›–äº†ï¼Œé€‰æ‹©å¡«ç©ºä»¥PPTåŸå§‹è¡¨è¿°ä¸ºå‡†ï¼ŒçŸ¥è¯†ç‚¹ä½ç½®ã€æ¦‚å¿µã€åŸç†ææ‡‚ï¼Œæœºåˆ¶æ€ä¹ˆå·¥ä½œçš„ã€å®‰å…¨æ€§ã€å¦å¤–å½¢å¼ä¸Šçš„å‡ ä¸ªå®šä¹‰ å‡ ä¸ªå¯†é’¥ç”Ÿæˆ æœ‰å‡ ä¸ªç®—æ³•ã€‚\nåˆ¤æ–­ å¯¹é”™éš¾\nä¸»è§‚é¢˜å¤šå†™ï¼Œè®¡ç®—é¢˜ï¼Œå†™æ–‡å­—æ­¥éª¤ï¼Œç„¶ååˆ—è®¡ç®—çš„å¼å­ã€‚\nå¤§é¢˜ï¼Œä¼šæœ‰ä¸€ç‚¹ç»†èŠ‚çš„åœ°æ–¹\n","date":"2025-06-03T20:27:49+08:00","permalink":"https://rooobeam.github.io/p/ltp/","title":"Ltp"},{"content":"sshå¯†é’¥è¿›è¡Œgithubèº«ä»½éªŒè¯ï¼Œsshå…¬ç§å¯†é’¥ä½¿ç”¨è¯¦è§£ï¼Œgithubå¯†é’¥é…ç½®ä¸ä½¿ç”¨ï¼Œgitå¯†é’¥ä½¿ç”¨è¯¦è§£ï¼Œgitå…¥é—¨æ•™ç¨‹_å“”å“©å“”å“©_bilibili\nGit å¸¸è§é”™è¯¯ ä¹‹ error: src refspec xxx does not match any / error: failed to push some refs to ç®€å•è§£å†³æ–¹æ³•_error: src refspec master does not match any-CSDNåšå®¢\næ‰‹æŠŠæ‰‹æ•™ä½ ç”¨gitä¸Šä¼ é¡¹ç›®åˆ°GitHubï¼ˆå›¾æ–‡å¹¶èŒ‚ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼‰ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½æˆåŠŸï¼ï¼ - çŸ¥ä¹\næ›´æ”¹é»˜è®¤åˆ†æ”¯ - GitHub æ–‡æ¡£\näº‘å’Œæœ¬åœ°sshå¯†é’¥é…ç½® è§ç¬¬ä¸€ä¸ªé“¾æ¥è§†é¢‘\næœ¬åœ°æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°main åœ¨é¡¹ç›®æ–‡ä»¶å¤¹å³é”®ç„¶åæ‰¾åˆ°git bashç‚¹å‡»æ‰“å¼€ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1 2 3 4 5 git init git add . git commit -m \u0026#34;first\u0026#34; git remote add healthrag git@github.com:rooobeam/HealthRAG.git # å…³è”è¿œç¨‹ä»“åº“ healragæ˜¯è¿œç¨‹åï¼Œæœ¬åœ°åä¼šæ˜¾ç¤ºåœ¨è¾“å…¥ä¸Šä¸€è¡Œæœ«å°¾è“è‰²å­—ä½“ã€‚ git push -u healthrag master # masteræ˜¯æœ¬åœ°åï¼Œå³è“è‰²å­—ä½“ ç„¶ååˆ°githubä¸Šä»“åº“é¡µé¢ï¼Œæ‰¾åˆ°å³ä¸Šè§’settingï¼Œè¿›å…¥settingæ‰¾åˆ°Default branchï¼Œæ›´æ”¹ç„¶åå¯ä»¥æŠŠæ—§çš„åˆ æ‰ï¼Œç„¶åæ·»åŠ README.mdå¦‚æœåŸæœ¬æ²¡æœ‰çš„è¯ã€‚\nå¦‚æœä¸æƒ³ç”¨masterè¿™ä¸€é»˜è®¤æœ¬åœ°åï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯ä»¥æ”¹ä¸ºæ–°åï¼ˆmmmï¼‰ï¼Œä½†æ˜¯ä¸è¦ä¸åŸæœ¬è¿œç¨‹ä»“åº“å·²æœ‰branchå¦åˆ™è¦mergeã€‚\n1 git branch -m master mmm ","date":"2025-05-25T18:48:08+08:00","permalink":"https://rooobeam.github.io/p/git/","title":"Git"},{"content":"python asyncio å¦‚ä½•è·å–å½“å‰çš„åç¨‹ id ç¼–å· - SegmentFault æ€å¦\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 import asyncio import contextvars # ç”³æ˜Contextå˜é‡ request_id = contextvars.ContextVar(\u0026#39;Id of request\u0026#39;) async def main(): # è®¾ç½®å¹¶å‘æ•° max_concurrent = 5 semaphore = asyncio.Semaphore(max_concurrent) # å†…éƒ¨å‡½æ•°ï¼Œä¸æ˜¾å¼ä¼ å‚ async def get(): # Get Value print(f\u0026#39;Request ID (Inner): {request_id.get()}\u0026#39;) # åç¨‹ async def limited_task_lq(task_id: int): async with semaphore: request_id.set(task_id) await get() print(f\u0026#39;Request ID (Outer): {request_id.get()}\u0026#39;) await asyncio.gather( *[limited_task_lq(task_id=i % max_concurrent) for i in range(15)]) if __name__ == \u0026#34;__main__\u0026#34;: asyncio.run(main()) ","date":"2025-05-23T09:42:02+08:00","permalink":"https://rooobeam.github.io/p/asyncio/","title":"Asyncio"},{"content":"Lossæ˜¯æœ€ç»ˆçš„ï¼Œä½ è¦è®©å®ƒæœ€å°ï¼Œå°±è¦è°ƒæ•´å®ƒä¸‹é¢çš„å˜é‡ã€‚\næŸä¸ªå˜é‡å®ƒå˜åŒ–ä¸€å®šçš„å€¼ä¼šå¯¼è‡´lossä¹Ÿå˜åŒ–ä¸€å®šçš„å€¼ï¼Œå¦‚æœæ˜¯1å…ƒä¹Ÿå°±æ˜¯ä¸€ç»´ï¼Œæ²¡æœ‰æ–¹å‘å¯é€‰ï¼Œå˜åŒ–ç‡ä¹Ÿä¸€å®šï¼Œä½†æ˜¯åˆ°äº†å¤šç»´æ¯”å¦‚äºŒç»´å°±ä¸æ˜¯äº†ã€‚\nå¯¹ä¸åŒå˜é‡æ±‚å¾—çš„å„ç§åå¯¼æ˜¯ å½“å‰ä½ç½®ä¸‹ è¦ä½¿losså˜å°æœ€å¿«çš„ æ–¹å‘ï¼Œæ–¹å‘å¾ˆå¥½ç†è§£ï¼Œå„ç§åå¯¼å€¼ä¸ä¸€æ ·å‘ˆç°ä¸€å®šæ¯”ä¾‹ï¼Œæœ€å¿«çš„è¯çœ‹å›¾ï¼Œæ–¹å‘å˜ä¸€ä¸‹èµ°å•ä½è·ç¦»ï¼Œzå¢å¤§çš„å¹…åº¦éƒ½ä¸æ˜¯æœ€å¤§ï¼ˆåœ¨xyzä¸‰ç»´æƒ…å†µä¸‹ï¼‰ã€‚\næ‰€ä»¥outputå’Œå®é™…å€¼yå…±åŒæ„é€ äº†Lossï¼Œè€Œä¸”Losså€¼æœ¬èº«åªæ˜¯åæ˜ ä¸€ä¸‹å·®å¼‚ï¼Œè¿™ä¸ªå€¼å¹¶æ²¡æœ‰å‚ä¸åå‘ä¼ æ’­ã€‚\nä½†æ˜¯å®é™…å€¼yä¼šï¼Œå®ƒç›¸å½“äºä¸€ä¸ªå‚æ•°ï¼Œä¸æ˜¯å˜é‡ï¼Œè¦çŸ¥é“è®¡ç®—åå¯¼æ—¶ï¼Œå…¶ä»–å˜é‡ä¹Ÿä¼šè¢«å½“ä½œå‚æ•°ï¼Œå…±åŒä½œç”¨äºæŸä¸ªå˜é‡çš„åå¯¼ã€‚\næ¯”å¦‚è¯´æ±‚è¯å‘é‡åå¯¼ï¼Œåç½®éƒ½ä¸ä¼šå»å½±å“å®ƒï¼ˆæˆ‘æ²¡è®°é”™çš„è¯ï¼‰ï¼Œå½“å‰çš„æƒé‡å’Œå®é™…å€¼yä¼šã€‚\næŸå¤±å‡½æ•°å¾—å‡ºçš„å€¼ä¸ä¼šå‚ä¸åå‘ä¼ æ’­ï¼Œä½†æ˜¯å‡½æ•°çš„å½¢å¼å³ å¦‚ä½•åŠ å·¥outputå’Œå®é™…å€¼yï¼Œä¼šå½±å“å®é™…å€¼yå¯¹å˜é‡åå¯¼çš„å½±å“ã€‚\nå¦‚1/2*(y^-y)^2ï¼Œå¯¹y^ï¼ˆå³output/ä¼°è®¡å€¼ï¼‰æ±‚å¯¼å¾—å‡º y^çš„åå¯¼ = y^-yï¼Œè¿™é‡Œå¯ä»¥ä½“ç°å®é™…å€¼yå¯¹y^åå¯¼çš„å½±å“ï¼Œå³å¼å­ä¸­çš„â€œ-yâ€ã€‚\nè€Œy^çš„åå¯¼ç”±é“¾å¼æ³•åˆ™ä¼šå½±å“wã€bã€xçš„åå¯¼ï¼Œæ‰€ä»¥yä¹Ÿä»¥â€œ-yâ€çš„æ–¹å¼å½±å“ä»–ä»¬ã€‚\nå¦‚æœæ˜¯softmaxåäº¤å‰ç†µ\nå‚è€ƒä¸‹æ–‡ç†è§£\nå°ç™½é›¶åŸºç¡€å­¦ä¹ ï¼šè¯¦è§£æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼šå®Œæ•´åŸç†+å…¬å¼æ¨å¯¼+è§†é¢‘è®²è§£_æ ‡å‡†æ¢¯åº¦ä¸‹é™ç®—æ³• æŸå‡½æ•°-CSDNåšå®¢\nå¯¼æ•°ï¼Œåå¯¼æ•°ï¼Œæ–¹å‘å¯¼æ•°ï¼Œæ¢¯åº¦çš„ç†è§£\u0026mdash;å¾®ç§¯åˆ†æ•°å­¦åŸºç¡€_uå¯¹æ³•å‘é‡æ±‚åå¯¼æ˜¯ä»€ä¹ˆ-CSDNåšå®¢\n","date":"2025-05-18T18:51:54+08:00","permalink":"https://rooobeam.github.io/p/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E6%B3%95/","title":"æ¢¯åº¦ä¸‹é™æ³•"},{"content":"OS os.path.join() os.path.exists() os.listdir() os.path.isdir() open with open(\u0026hellip;) as f\n1 2 3 4 5 # ä¾‹å­ with open(\u0026#39;_20_data.txt\u0026#39;, \u0026#39;r\u0026#39;) as file: # è¯»å–æ•°æ® N\\n1 2 3 n = int(file.readline().strip()) data = list(map(int, file.read().split())) å‚æ•°1ï¼šæ–‡ä»¶åœ°å€ å‚æ•°2ï¼šè¯»å†™æ–¹å¼ wä»å¤´å†™ råªè¯» aè¿½åŠ \nè¯»å†™æ–¹å¼ æ˜¯å¦ä¸º äºŒè¿›åˆ¶ æ˜¯å¦ä¸º å¯è¯»å¯å†™ r ç©º ç©º w b + a å…±\t3*2*2=12ç§\næ¨¡å¼å¯¹ç…§è¡¨ å’Œ f.seek(n)\næ¨¡å¼ æè¿° æ–‡ä»¶å­˜åœ¨ æ–‡ä»¶ä¸å­˜åœ¨ æŒ‡é’ˆä½ç½® r+ è¯»å†™ï¼ˆæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼‰ ä¸æ¸…ç©ºï¼Œä»æŒ‡é’ˆä½ç½®â€œè¦†ç›–å†™â€ æŠ¥é”™ å¼€å¤´ w+ å†™è¯»ï¼ˆæ¸…ç©ºåè¯»å†™ï¼‰ å¿…å®šæ¸…ç©ºï¼Œä»æŒ‡é’ˆä½ç½®å†™ åˆ›å»º å¼€å¤´ a+ è¿½åŠ è¯»å†™ å¿…å®šä»æœ«å°¾å†™ åˆ›å»º æœ«å°¾ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # åˆ›å»ºæ–‡ä»¶ with open(\u0026#39;test_r+.txt\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;æ—§å†…å®¹\u0026#39;) # r+ try:\t# ä¸å­˜åœ¨æ”¹æ–‡ä»¶ä¼šæŠ¥é”™ with open(\u0026#39;test_r+.txt\u0026#39;, \u0026#39;r+\u0026#39;) as f: print(f.read()) # è¾“å‡º: æ—§å†…å®¹^ ï¼ˆ^æŒ‡é’ˆä½ç½®ï¼‰ f.seek(0)\t# ^æ—§å†…å®¹\tï¼ˆç§»åŠ¨æŒ‡é’ˆä½ç½®åˆ°å¼€å¤´ï¼‰ f.write(\u0026#39;æ–°\u0026#39;) # æ–°^å†…å®¹\tï¼ˆä»æŒ‡é’ˆä½ç½®è¦†ç›–å†™å…¥ï¼‰ f.seek(0)\t# ^æ–°å†…å®¹ print(f.read()) # è¾“å‡º: æ–°å†…å®¹ except FileNotFoundError: print(\u0026#34;æ–‡ä»¶ä¸å­˜åœ¨\u0026#34;) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # åˆ›å»ºæ–‡ä»¶ with open(\u0026#39;test_w+.txt\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;åŸå§‹å†…å®¹\u0026#39;) # w+ with open(\u0026#39;test_w+.txt\u0026#39;, \u0026#39;w+\u0026#39;) as f: f.write(\u0026#39;å…¨æ–°å†…å®¹\u0026#39;) # æ¸…ç©ºåå†™å…¥ å…¨æ–°å†…å®¹^ f.seek(0)\t# ç§»åŠ¨æŒ‡é’ˆåˆ°å¼€å¤´\t^å…¨æ–°å†…å®¹ print(f.read()) # è¾“å‡º: å…¨æ–°å†…å®¹ # æ–‡ä»¶ä¸å­˜åœ¨æ—¶ import os with open(\u0026#39;new_w+.txt\u0026#39;, \u0026#39;w+\u0026#39;) as f: f.write(\u0026#39;åˆ›å»ºå†…å®¹\u0026#39;)\tf.seek(0) print(os.path.abspath(\u0026#39;new_w+.txt\u0026#39;)) # è¾“å‡º: åˆ›å»ºçš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # åˆ›å»ºæ–‡ä»¶ with open(\u0026#39;test_a+.txt\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;åˆå§‹è¡Œ\\n\u0026#39;) # a+ with open(\u0026#39;test_a+.txt\u0026#39;, \u0026#39;a+\u0026#39;) as f: f.write(\u0026#39;è¿½åŠ è¡Œ\\n\u0026#39;) # è¿½åŠ è¡Œ\\n^ f.seek(0) # ^åˆå§‹è¡Œ\\nè¿½åŠ è¡Œ\\n print(f.read()) # è¾“å‡º: åˆå§‹è¡Œ\\nè¿½åŠ è¡Œ\\n # éªŒè¯æŒ‡é’ˆç‰¹æ€§ f.seek(5) # åˆå§‹è¡Œ\\nè¿½^åŠ è¡Œ\\n f.write(\u0026#39;ä¸­é—´æ’å…¥\u0026#39;) # ä»ç„¶è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼ f.seek(0) print(f.read()) # è¾“å‡º: åˆå§‹è¡Œ\\nè¿½åŠ è¡Œ\\nä¸­é—´æ’å…¥ ","date":"2025-05-11T23:17:20+08:00","permalink":"https://rooobeam.github.io/p/%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99/","title":"æ–‡ä»¶è¯»å†™"},{"content":"è®ºæ–‡è§£è¯» æ‘˜è¦è§£è¯»ï¼šåœºæ™¯æ˜¯ä»é•¿æ–‡æ¡£(long document)ä¸­æ‰¾åˆ°ç›¸å…³ç‰‡æ®µ(passage)ï¼Œå¯¹SoTAåˆ†æå‘ç°é”™è¯¯ä¸»è¦æºäºé”™å¤±äº†æ–‡æ¡£ä¸Šä¸‹æ–‡å†…å®¹ï¼Œäºæ˜¯å‘½åä»»åŠ¡ä¸ºDAPRâ€”â€”æ–‡æ¡£æ„ŸçŸ¥çš„ç‰‡æ®µæ£€ç´¢ï¼ˆDocument-Aware Passage Retrievalï¼‰ã€‚ç„¶åä¸ºæ­¤å»ºç«‹benchmarkå¹¶è¿›è¡Œå®éªŒã€‚å®éªŒä¸­å¯¹SoTAç‰‡æ®µè½æ£€ç´¢å™¨è¾…ä¹‹ä»¥æ–‡æ¡£å†…å®¹ï¼šï¼ˆ1ï¼‰å’ŒBM25æ··åˆã€‚ï¼ˆ2ï¼‰å°†æ–‡æ¡£ä¿¡æ¯æºå’Œåˆ°æ®µè½ä¿¡æ¯é‡Œã€‚å®éªŒç»“æœï¼šæ··åˆæ£€ç´¢å™¨æ³•æ•´ä½“å¥½ï¼Œä½†æ˜¯å¯¹äºâ€œéœ€è¦æ–‡æ¡£çº§ä¸Šä¸‹æ–‡ä¿¡æ¯â€çš„é—®é¢˜å®Œå…¨å¤±è´¥ï¼›æºå’Œæ³•åä¹‹ï¼Œæ•´ä½“è¾ƒå·®ä½†åœ¨ä¸Šä¸‹æ–‡å›°éš¾é—®é¢˜æœ‰è¿›æ­¥ã€‚\nä»‹ç»è§£è¯»ï¼š\nIRæœ‰ç”¨ã€‚ä¼ ç»ŸBM25é€šè¿‡ç»Ÿè®¡æ–¹æ³•ã€‚è¿‘æœŸæ–¹æ³•åº”ç”¨ç¥ç»ç½‘ç»œè¿›è¡Œå‘é‡åŒ–è¡¨ç¤ºå®ç°å¤æ‚è¯­ä¹‰åŒ¹é…ã€‚ç¥ç»æ–¹æ³•å—é™äºâ€œçŸ­ç‰‡æ®µâ€(short passage å¦‚512tokens)è¾“å…¥ã€‚åœ¨ç°å®ä¸­é‡åˆ°é•¿æ–‡æœ¬å¦‚å­¦ç§‘è®ºæ–‡æ—¶ï¼Œè¶…å‡ºé™åˆ¶è€Œæ— æ³•åˆ©ç”¨å®Œæ•´ä¸Šä¸‹æ–‡ã€‚è¿‘æœŸå·¥ä½œå®ç°é•¿æ–‡æ¡£encodeå¹¶å®ç°äº†æ–‡æ¡£çº§æ£€ç´¢ã€‚ç„¶è€Œè¿”å›é•¿æ–‡æ¡£å¯¹äºç”¨æˆ·ä»ä¸ä¾¿äºè·å–æœ‰æ•ˆä¿¡æ¯ï¼Œå¦‚åœ¨æ ‡æ³¨ç»´åŸºç™¾ç§‘é¡µé¢ä¸­ä¸ç”¨æˆ·æŸ¥è¯¢ç›¸å…³çš„æ®µè½æ—¶ï¼Œ35.8%çš„æŸ¥è¯¢æ‰€å¯¹åº”ç›¸å…³æ®µè½å¹³å‡ä½äºæ–‡æ¡£ç¬¬7.6æ®µ(æ ‡å‡†å·®12.7)ã€‚\näºæ˜¯æå‡ºDAPRä»»åŠ¡ï¼Œå°±æ˜¯åœ¨é•¿æ–‡æ¡£ä¸­æ‰¾åˆ°å¯¹åº”ç‰‡æ®µã€‚ä¸¾ä¾‹è§£é‡Šâ€œæ–‡æ¡£-æ„ŸçŸ¥â€ (Document-awared)ï¼Œå¦‚æŒ‡ä»£å…³ç³»ä¼šå¯¼è‡´Queryçš„å…³é”®ä¿¡æ¯å‡ºç°åœ¨ä¸åŒç‰‡æ®µé‡Œï¼Œå¯èƒ½å¯¼è‡´å…³é”®ä¿¡æ¯æ‰€åœ¨ç‰‡æ®µé—æ¼ã€‚ä¸ºæ·±å…¥äº†è§£ï¼Œæµ‹è¯•SoTAç‰‡æ®µæ£€ç´¢å™¨å¹¶åˆ†æé”™è¯¯ï¼Œå‘ç°53.5%çš„é”™è¯¯æºäºæœªç»“åˆæ–‡æ¡£ä¸Šä¸‹æ–‡è§£ææŒ‡ä»£æˆ–ä¸»é¢˜ï¼Œå¯¼è‡´æ¼æ£€æ­£ç¡®ç­”æ¡ˆæ®µè½ã€‚äºæ˜¯åˆ›å»ºä¸€ä¸ªåŸºå‡†æµ‹è¯•ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªä¸åŒé¢†åŸŸçš„5ä¸ªæ•°æ®é›†ï¼Œè¿™äº›æ•°æ®é›†æä¾›äº†åœ¨å…³è”æ–‡æ¡£ä¸­å¯¹ç›¸å…³æ®µè½çš„æ ‡æ³¨(å°±æ˜¯é—®é¢˜æœ‰æ ‡å‡ºç›¸å…³ç‰‡æ®µ)ã€‚\nå®éªŒä¸­å¯¹SoTAç‰‡æ®µè½æ£€ç´¢å™¨è¾…ä¹‹ä»¥æ–‡æ¡£å†…å®¹ï¼šï¼ˆ1ï¼‰å’ŒBM25æ··åˆã€‚ï¼ˆ2ï¼‰å°†æ–‡æ¡£ä¿¡æ¯æºå’Œåˆ°æ®µè½ä¿¡æ¯é‡Œã€‚å®éªŒç»“æœï¼šæ··åˆæ£€ç´¢å™¨æ³•æ•´ä½“å¥½ï¼Œä½†æ˜¯å¯¹äºâ€œéœ€è¦æ–‡æ¡£çº§ä¸Šä¸‹æ–‡ä¿¡æ¯â€çš„é—®é¢˜å®Œå…¨å¤±è´¥ï¼›æºå’Œæ³•åä¹‹ï¼Œæ•´ä½“è¾ƒå·®ä½†åœ¨ä¸Šä¸‹æ–‡å›°éš¾é—®é¢˜æœ‰è¿›æ­¥ã€‚è¿™ä¸ªåŸºå‡†æµ‹è¯•å¯¹æ–°çš„æ£€ç´¢æ–¹æ³•æœ‰æ„ä¹‰ã€‚\nç›¸å…³å·¥ä½œï¼ˆbenchmarkï¼‰ï¼š\nDocQAï¼š éœ€è¦æ¨¡å‹å›ç­”å…³äºè¾“å…¥æ–‡æ¡£çš„ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒçš„é—®é¢˜çš„ç›¸å…³æ–‡æ¡£æ˜¯ç»™å®šçš„ï¼Œè€ŒDAPRéœ€è¦ä»æ–‡æ¡£é›†é‡Œæ‰¾ç›¸å…³ä¿¡æ¯(doc)ã€‚åŸºäºç»™å®šæ–‡æ¡£è¿™ä¸ªå‡è®¾ï¼ŒDocQAçš„é—®é¢˜é€šå¸¸æ˜¯å’Œæ–‡æ¡£å†…å®¹å…³è”çš„ï¼Œæ¯”å¦‚â€œå“ªä¸ªæ£€ç´¢ç³»ç»Ÿç”¨äºè¿™ä¸ªbaselineâ€ï¼Œè¿™ä¸ªé—®é¢˜åœ¨DocQAä¸­å› ä¸ºç»™å®šäº†æ–‡æ¡£æ‰€ä»¥æœ‰é»˜è®¤å…³è”ï¼Œè€Œè½¬æ¢åˆ°DAPRå°±ä¸è¡Œäº†ï¼Œ\u0026ldquo;è¿™ä¸ªbaseline\u0026quot;ä¸çŸ¥é“æ˜¯å•¥ã€‚\né•¿æ–‡æ¡£æ£€ç´¢ï¼šæ³•1æ˜¯MaxPï¼Œç‰‡æ®µæœ€é«˜åˆ†ä½œä¸ºæ–‡æ¡£åˆ†ï¼Œæ³•2æ˜¯FirstPï¼Œç¬¬ä¸€ç‰‡æ®µå¾—åˆ†ä½œä¸ºæ–‡æ¡£åˆ†ï¼Œæ³•2ä¸å¦‚æ³•1ã€‚æœ‰å­¦è€…æ¯”è¾ƒäº†ä¸åŒçš„â€œé•¿è·ç¦»æ³¨æ„åŠ›æ¨¡å‹â€çš„é•¿æ–‡æ¡£æ£€ç´¢ã€‚é™ˆç­‰äººï¼ˆ2022å¹´ï¼‰æå‡ºäº†ä¸€ç§åˆ†å±‚ç¥ç»ç½‘ç»œï¼Œå¹¶è¯æ˜å…¶ä¼˜äºåŸºäºMaxPã€‚ä½†è¿™äº›å·¥ä½œç›¸æ¯”DAPRï¼Œéƒ½æ²¡æœ‰ç ”ç©¶ â€œè€ƒè™‘æ–‡æ¡£å†…å®¹æƒ…å†µä¸‹çš„ç‰‡æ®µæ£€ç´¢â€ã€‚\næ··åˆæ£€ç´¢ï¼šæ¶‰åŠå¤šæ£€ç´¢ç³»ç»Ÿã€‚å…¶ä¸­æ’åæ··åˆå°†æ’ååˆå¹¶\nå®éªŒå¤ç°ä»£ç  reproduce_bm25.sh ï¼ˆ.sh4ç§ç®—æ³•éƒ½ç±»ä¼¼ï¼Œä½†passage_only.bm25å¤§ä¸ç›¸åŒï¼‰\nexportï¼šå°†å˜é‡æå‡ä¸º ç¯å¢ƒå˜é‡ï¼ˆå…¨å±€å˜é‡ï¼‰ï¼Œä½¿å¾—æ‰€æœ‰å­è¿›ç¨‹ï¼ˆå¦‚å…¶ä»–è„šæœ¬ã€Pythonç¨‹åºç­‰ï¼‰éƒ½èƒ½ç»§æ‰¿è¿™ä¸ªå˜é‡ã€‚\nç›´æ¥è®¾ç½®ï¼šç›´æ¥èµ‹å€¼å®šä¹‰çš„å˜é‡æ˜¯ Shellå˜é‡ï¼ˆå±€éƒ¨å˜é‡ï¼‰ï¼Œä»…åœ¨å½“å‰ Shell ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå­è¿›ç¨‹ï¼ˆå¦‚å…¶ä»–è„šæœ¬ã€ç¨‹åºï¼‰æ— æ³•è®¿é—®ã€‚\n1 2 3 4 5 6 7 # scripts/dgx2/exps/passage_only/bm25.sh export NCCL_DEBUG=\u0026#34;INFO\u0026#34; export CUDA_VISIBLE_DEVICES=\u0026#34;0\u0026#34; # datasets=( \u0026#34;ConditionalQA\u0026#34; ) datasets=( \u0026#34;NaturalQuestions\u0026#34; ) # datasets=( \u0026#34;ConditionalQA\u0026#34; \u0026#34;MSMARCO\u0026#34; \u0026#34;NaturalQuestions\u0026#34; \u0026#34;Genomics\u0026#34; \u0026#34;MIRACL\u0026#34; ) for X in ${datasets[@]}ï¼š éå†ï¼Œå–å‡ºæ¯ä¸ªå…ƒç´ åˆ°X\n$å˜é‡æ›¿æ¢ï¼šè·å–å˜é‡çš„å€¼ ${å˜é‡å}\n1 2 3 4 5 6 7 8 9 for dataset in ${datasets[@]} do export DATA_DIR=\u0026#34;data\u0026#34; export DATASET_PATH=\u0026#34;$DATA_DIR/$dataset\u0026#34; export CLI_ARGS=\u0026#34; --data_dir=$DATASET_PATH \u0026#34; # --data_dir=data/NaturalQuestions ... å‘½ä»¤æ›¿æ¢ï¼šæ‰§è¡Œå‘½ä»¤ï¼Œå¹¶å°†è¾“å‡ºç»“æœä½œä¸ºå­—ç¬¦ä¸²è¿”å›\n$(python -m dapr.exps.passage_only.args.bm25 $CLI_ARGS)ï¼šä¼ å…¥ CLI_ARGS ç»™dapr.exps.passage_only.args.bm25.py å¹¶æ‰§è¡Œï¼Œæ•è·è¾“å‡ºç»“æœ(å¦‚printçš„å†…å®¹)ï¼Œpyè„šæœ¬ä»£ç å¦‚ä¸‹ï¼Œä¼ å…¥ \u0026ndash;data_dir=data/NaturalQuestionsï¼Œå³pyé‡Œæœ‰ä¸ªå˜é‡data_dir=\u0026ldquo;data/NaturalQuestions\u0026rdquo;ï¼ŒBM25PassageOnlyArgumentsé‡Œçš„åˆå§‹åŒ–ä¼šç”Ÿæˆå„ç§å±æ€§ï¼ŒåŒ…æ‹¬output_dirã€‚\n1 2 3 4 if __name__ == \u0026#34;__main__\u0026#34;: print( parse_cli(BM25PassageOnlyArguments).output_dir ) # For creating the logging path export OUTPUT_DIR=$(\u0026hellip;)ï¼š \u0026hellip; å³ bm25.py é‡Œçš„è¾“å‡ºè¢«bashè„šæœ¬æ•è·ã€‚\n**mkdir -p $OUTPUT_DIRï¼š**ç¡®ä¿OUTPUT_DIRå­˜åœ¨\n**export LOG_PATHï¼š**è®¾ç½®æ—¥å¿—å˜é‡\n1 2 3 4 5 6 7 ... export OUTPUT_DIR=$(python -m dapr.exps.passage_only.args.bm25 $CLI_ARGS) mkdir -p $OUTPUT_DIR export LOG_PATH=\u0026#34;$OUTPUT_DIR/logging.log\u0026#34; echo \u0026#34;Logging file path: $LOG_PATH\u0026#34; ... **torchrun \u0026hellip; \u0026gt; $LOG_PATHï¼š**PyTorch çš„åˆ†å¸ƒå¼è®­ç»ƒå¯åŠ¨å™¨ï¼Œè‡ªåŠ¨è®¾ç½®å¤šè¿›ç¨‹ç¯å¢ƒï¼Œå°†å‘½ä»¤çš„ æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œé”™è¯¯è¾“å‡ºï¼ˆstderrï¼‰ä»ä¼šæ‰“å°åˆ°ç»ˆç«¯ã€‚\n\u0026ndash;nproc_per_node=1ï¼šä½¿ç”¨å½“å‰æœºå™¨çš„1ä¸ªGPU \u0026ndash;master_port=295001ï¼šä¸»è¿›ç¨‹çš„é€šä¿¡ç«¯å£ -m dapr.exps.passage_only.bm25ï¼šæ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ $CLI_ARGSï¼šä¼ å…¥çš„å‚æ•° 1 2 3 ... torchrun --nproc_per_node=1 --master_port=29501 -m dapr.exps.passage_only.bm25 $CLI_ARGS \u0026gt; $LOG_PATH done dragon_plus (passage_only) â€‹\tpassage_onlyä¸‹çš„dragon_plusï¼ˆç±»ä¼¼ä¸Šé¢çš„passage_only.bm25ï¼‰ï¼Œå³â€œä»…æ®µè½æ£€ç´¢ä½¿ç”¨dragon_plusæ£€ç´¢å™¨â€ï¼Œç”±ä»¥ä¸‹ è°ƒç”¨ å®ç°ã€‚\nâ€‹\treproduce_cpç›¸å½“äºmainï¼Œå…¶ä¸­ä¸»è¦æ‰§è¡Œäº†\u0026hellip;passage_only.args.dragon_plus.pyå’Œ\u0026hellip;passage_only.dragon_plus_cp.pyï¼Œå‰è€…ç”¨äºé…ç½®ä¸€äº›å‚æ•°ï¼Œå‚æ•°ä¼šä¼ å…¥åè€…ï¼Œåè€…æ˜¯å®ç°åŠŸèƒ½å’Œè¯„ä¼°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 |â€”â€”reproduce_cp.py |â€”â€”dapr.exps.passage_only.args.dragon_plus.py |\t|â€”â€”dapr.exps.passage_only.args.base.py |\t|â€”â€”clddp.args.base | |â€”â€”dapr.exps.passage_only.dragon_plus_cp.py |â€”â€”dapr.dataloader.py |â€”â€”dapr.retrievers.dense.py |â€”â€”dapr.dataloader.py |â€”â€”clddp.dm |â€”â€”clddp.search |â€”â€”clddp.evaluation |â€”â€”clddp.evaluation |â€”â€”clddp.dm â€‹\tåæ–‡ä¸­ï¼Œä»¥ä¸‹ç®€ç§°ï¼Œå…¶ä»–ä¸€è‡´ã€‚\nâ€‹\tdapr.exps.passage_only.args.dragon_plus.py ç®€ç§°ä¸º \u0026hellip;args.dragon_plus.py\nâ€‹\tdapr.exps.passage_only.dragon_plus_cp.py ç®€ç§°ä¸º \u0026hellip;passage_only.dragon_plus_cp.py\nreproduce_cp.py 1 |â€”â€”reproduce_cp.py\tæ›¿æ¢åŸæœ¬çš„.shï¼Œå®ç°æ¨¡æ‹Ÿå‘½ä»¤è¡Œä¼ å‚ â€‹\treproduce_cp.pyçš„åŠŸèƒ½ä¸ºï¼Œæ›¿æ¢åŸæœ¬çš„.shï¼Œå®ç°æ¨¡æ‹Ÿå‘½ä»¤è¡Œä¼ å‚ï¼Œè€Œä¸ç”¨æ¯æ¬¡éƒ½åœ¨pycharmæ–°å»º è¿è¡Œ/è°ƒè¯•é…ç½®ï¼Œå¤§è‡´æµç¨‹å’Œ reproduce_bm25.shä¸€æ ·ï¼š\nè®¾ç½®å…¨å±€/å±€éƒ¨å˜é‡ æ‰§è¡Œ dapr.exps.passage_only.args.dragon_plusï¼Œç”Ÿæˆargs å†æ„é€ ä¸€äº›å˜é‡ æ‰§è¡Œ dapr.exps.passage_only.dragon_plus_cp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 import os import subprocess from pathlib import Path import sys def main(): project_root = \u0026#34;/root/autodl-tmp/DAPR\u0026#34; # æ›¿æ¢ä¸ºä½ çš„é¡¹ç›®è·¯å¾„ os.environ[\u0026#34;PYTHONPATH\u0026#34;] = f\u0026#34;{project_root}:{os.environ.get(\u0026#39;PYTHONPATH\u0026#39;, \u0026#39;\u0026#39;)}\u0026#34; # ç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆå¯¹å­è¿›ç¨‹ç”Ÿæ•ˆï¼‰ os.environ[\u0026#34;NCCL_DEBUG\u0026#34;] = \u0026#34;INFO\u0026#34; os.environ[\u0026#34;CUDA_VISIBLE_DEVICES\u0026#34;] = \u0026#34;0\u0026#34; datasets = [\u0026#34;ConditionalQA\u0026#34;] data_dir = \u0026#34;data\u0026#34; for dataset in datasets: dataset_path = Path(data_dir) / dataset cli_args = f\u0026#34;--data_dir={dataset_path}\u0026#34; try: # è·å–è¾“å‡ºç›®å½•ï¼ˆéœ€ä¼ é€’ç¯å¢ƒå˜é‡ï¼‰ output_dir = subprocess.check_output( [sys.executable, \u0026#34;-m\u0026#34;, \u0026#34;dapr.exps.passage_only.args.dragon_plus\u0026#34;, cli_args], text=True, env=os.environ # å…³é”®ï¼ç¡®ä¿å­è¿›ç¨‹ç»§æ‰¿ç¯å¢ƒå˜é‡ ).strip() # åˆ›å»ºç›®å½• output_path = Path(output_dir) output_path.mkdir(parents=True, exist_ok=True) # æ—¥å¿—è·¯å¾„ log_path = output_path / \u0026#34;logging.log\u0026#34; print(f\u0026#34;Logging to: {log_path}\u0026#34;) # è¿è¡Œè®­ç»ƒï¼ˆåˆå¹¶ stdout å’Œ stderrï¼‰ subprocess.run( [sys.executable, \u0026#34;-m\u0026#34;, \u0026#34;dapr.exps.passage_only.dragon_plus_cp\u0026#34;, cli_args], text=True, env=os.environ # å…³é”®ï¼ç¡®ä¿å­è¿›ç¨‹ç»§æ‰¿ç¯å¢ƒå˜é‡ ) except subprocess.CalledProcessError as e: print(f\u0026#34;Error for {dataset}: {e}\u0026#34;) continue if __name__ == \u0026#34;__main__\u0026#34;: main() \u0026hellip;args.dragon_plus.py 1 2 |â€”â€”reproduce_cp.py\tæ›¿æ¢åŸæœ¬çš„.shï¼Œå®ç°æ¨¡æ‹Ÿå‘½ä»¤è¡Œä¼ å‚ |â€”â€”...args.dragon_plus.py\tå®šä¹‰ç±» BM25PassageOnlyArgumentsï¼Œè¾“å‡ºoutput_dir å®šä¹‰ç±» BM25PassageOnlyArguments ç»§æ‰¿è‡ª PassageOnlyArgumentsï¼Œé‡è¦å±æ€§å¦‚ä¸‹ï¼š\nrun_name: str = XXX ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„å®éªŒè¿è¡Œçš„å”¯ä¸€åç§°ï¼Œè§PassageOnlyArgumentsï¼‰ data_dir: str = os.path.join(\u0026quot;exps/passage_only/bm25\u0026quot;, self.run_name) # æ•°æ®é›†è·¯å¾„ split: Split = Split.test # å“ªä¸ªæ•°æ®éƒ¨åˆ†ï¼ˆæµ‹è¯•é›† test æˆ–è®­ç»ƒé›† trainï¼‰ topk: int = 1000 # è¿”å›æœ€ç›¸å…³çš„1000ä¸ªç»“æœ per_device_eval_batch_size: int = 32 # æ¯ä¸ªGPUä¸€æ¬¡å¤„ç†32æ¡æ•°æ® fp16: bool = True # ç”¨åŠç²¾åº¦æµ®ç‚¹æ•°ï¼ˆèŠ‚çœæ˜¾å­˜ï¼ŒåŠ å¿«è®¡ç®—ï¼‰ ä¸åŒç‚¹åœ¨äºè·å– parse_cli(BM25PassageOnlyArguments).output_dir æ—¶ä½¿ç”¨çš„æ–¹æ³•build_output_dirè¢«é‡å†™ä¸º os.path.join(\u0026ldquo;exps/passage_only/bm25\u0026rdquo;, self.run_name)\nreproduce_cpæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œè¿›å…¥if __name__ == \u0026ldquo;__main__\u0026quot;ï¼Œprint(\u0026hellip;.output_dir)ï¼Œæ‰§è¡Œå®Œreproduce_cpæ•è·è¯¥å†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 from dataclasses import dataclass import os from clddp.utils import parse_cli from dapr.exps.passage_only.args.base import PassageOnlyArguments @dataclass class BM25PassageOnlyArguments(PassageOnlyArguments): def build_output_dir(self) -\u0026gt; str: return os.path.join(\u0026#34;exps/passage_only/bm25\u0026#34;, self.run_name) if __name__ == \u0026#34;__main__\u0026#34;: print( parse_cli(BM25PassageOnlyArguments).output_dir ) # For creating the logging path args.base.py 1 2 3 |â€”â€”reproduce_cp.py\tæ›¿æ¢åŸæœ¬çš„.shï¼Œå®ç°æ¨¡æ‹Ÿå‘½ä»¤è¡Œä¼ å‚ |â€”â€”...args.dragon_plus.py\tå®šä¹‰ç±» BM25PassageOnlyArgumentsï¼Œè¾“å‡ºoutput_dir |\t|â€”â€”args.base.py\tå®šä¹‰ç±» PassageOnlyArgumentså’Œä¸€äº›é‡è¦å‚æ•° å®šä¹‰ç±» PassageOnlyArgumentsï¼Œé‡‡ç”¨MixInæœºåˆ¶ç»§æ‰¿ä¸¤ä¸ªæ··å…¥ç±»(Mixin)ï¼ˆå¯æ’æ‹”ç»„ä»¶ï¼‰ â€”â€”AutoRunNameArgumentsMixIn, DumpableArgumentsMixInï¼Œä»clddp.args.baseé‡Œimportï¼Œç»§æ‰¿å‰è€…èƒ½è‡ªåŠ¨ç”Ÿæˆä¸€æ¬¡è¿è¡Œå”¯ä¸€åè¯ï¼ˆå±æ€§ï¼‰ï¼Œç»§æ‰¿åè€…è·å¾—è¾“å‡ºç›®å½•å’Œå†™å…¥è¾“å‡ºç›®å½•çš„æ–¹æ³•ã€‚\nè®¾ç½®äº†ä¸€äº›å±æ€§(è§ä»£ç )\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 from dataclasses import dataclass from typing import Optional from clddp.args.base import AutoRunNameArgumentsMixIn, DumpableArgumentsMixIn from clddp.dm import Split @dataclass class PassageOnlyArguments(AutoRunNameArgumentsMixIn, DumpableArgumentsMixIn): data_dir: Optional[str] = None # æ•°æ®é›†è·¯å¾„ split: Split = Split.test # å“ªä¸ªæ•°æ®éƒ¨åˆ†ï¼ˆæµ‹è¯•é›† test æˆ–è®­ç»ƒé›† trainï¼‰ topk: int = 1000 # è¿”å›æœ€ç›¸å…³çš„1000ä¸ªç»“æœ per_device_eval_batch_size: int = 32 # æ¯ä¸ªGPUä¸€æ¬¡å¤„ç†32æ¡æ•°æ® fp16: bool = True # ç”¨åŠç²¾åº¦æµ®ç‚¹æ•°ï¼ˆèŠ‚çœæ˜¾å­˜ï¼ŒåŠ å¿«è®¡ç®—ï¼‰ def __post_init__(self) -\u0026gt; None: # ç»§æ‰¿AutoRunNameArgumentsMixIn, DumpableArgumentsMixInçš„åˆå§‹åŒ– # å¦‚self.output_dir = self.build_output_dir() run_name: str = \u0026#34;auto_run_name\u0026#34; super().__post_init__() clddp.args.base å®šä¹‰ä¸¤ä¸ªç±»\nAutoRunNameArgumentsMixInï¼šè‡ªåŠ¨ç”Ÿæˆå®éªŒè¿è¡Œçš„å”¯ä¸€åç§° DumpableArgumentsMixInï¼šè®¾ç½®output_dirå’Œä¿å­˜ä¸€äº›è¿è¡Œå‚æ•°è®¾ç½® 1 2 3 4 |â€”â€”reproduce_cp.py\tæ›¿æ¢åŸæœ¬çš„.shï¼Œå®ç°æ¨¡æ‹Ÿå‘½ä»¤è¡Œä¼ å‚ |â€”â€”...args.dragon_plus.py\tå®šä¹‰ç±» BM25PassageOnlyArgumentsï¼Œè¾“å‡ºoutput_dir |\t|â€”â€”...args.base.py\tå®šä¹‰ç±» PassageOnlyArgumentså’Œä¸€äº›é‡è¦å‚æ•° |\t|â€”â€”clddp.args.base 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 from __future__ import annotations from dataclasses import asdict, dataclass import json import logging import os from typing import List, Optional, Set, Type from abc import ABC, abstractmethod @dataclass class AutoRunNameArgumentsMixIn: run_name: Optional[str] = None @property def escaped_args(self) -\u0026gt; Set[str]: \u0026#34;\u0026#34;\u0026#34;Escaped items for building the run_name.\u0026#34;\u0026#34;\u0026#34; return set() def get_arguments_from(self) -\u0026gt; List[type]: \u0026#34;\u0026#34;\u0026#34;Return the classes which the auto_run_name will get the arguments from.\u0026#34;\u0026#34;\u0026#34; return [self.__class__] @property def auto_run_name(self) -\u0026gt; str: arguments = [ k for from_class in self.get_arguments_from() for k in from_class.__annotations__.keys() if k not in self.escaped_args ] items = [f\u0026#34;{argument}_{getattr(self, argument)}\u0026#34; for argument in arguments] # ç”¨/è¿æ¥æ¯ä¸ª\u0026#34;å±æ€§å_å±æ€§å€¼\u0026#34; return \u0026#34;/\u0026#34;.join(items) def __post_init__(self) -\u0026gt; None: if self.run_name is None: self.run_name = self.auto_run_name # è¿›è¡Œçˆ¶ç±»çš„__post_init__ if hasattr(super(), \u0026#34;__post_init__\u0026#34;): super().__post_init__() # Needed as a MixIn @dataclass class DumpableArgumentsMixIn(ABC): output_dir: Optional[str] = None def __post_init__(self) -\u0026gt; None: if self.output_dir is None: self.output_dir = self.build_output_dir() if hasattr(super(), \u0026#34;__post_init__\u0026#34;): super().__post_init__() # Needed as a MixIn @abstractmethod def build_output_dir(self) -\u0026gt; str: pass def dump_arguments(self, fname: str = \u0026#34;arguments.json\u0026#34;) -\u0026gt; None: os.makedirs(self.output_dir, exist_ok=True) fargs = os.path.join(self.output_dir, fname) with open(fargs, \u0026#34;w\u0026#34;) as f: json.dump(asdict(self), f, indent=4) logging.info(f\u0026#34;Dumped arguments to {fargs}\u0026#34;) \u0026hellip;passage_only.dragon_plus_cp.py 1 2 3 4 5 6 |â€”â€”reproduce_cp.py\tæ›¿æ¢åŸæœ¬çš„.shï¼Œå®ç°æ¨¡æ‹Ÿå‘½ä»¤è¡Œä¼ å‚ |â€”â€”...args.dragon_plus.py\tå®šä¹‰ç±» BM25PassageOnlyArgumentsï¼Œè¾“å‡ºoutput_dir |\t|â€”â€”...args.base.py\tå®šä¹‰ç±» PassageOnlyArgumentså’Œä¸€äº›é‡è¦å‚æ•° |\t|â€”â€”clddp.args.base å®šä¹‰ä¸¤ä¸ªMixIn ---------|----------------------------------------------------------åé¢çœç•¥ä¸Šé¢å†…å®¹ |â€”â€”...passage_only.dragon_plus_cp.py å…¶ä»£ç å•æ­¥æ‰§è¡Œä¼šé¡ºåºè¿›å‡ºå¦‚ä¸‹æ¨¡å—ã€‚\n1 2 3 4 5 6 7 8 9 10 |â€”â€”...args.dragon_plus\tåŠ è½½å‚æ•°å’Œä¿å­˜å‚æ•°åˆ°jsonæ–‡ä»¶ |â€”â€”clddp.utils\tåˆå§‹åŒ–ddp |â€”â€”dapr.dataloader.py\tDAPRDataConfig, DAPRDataLoaderå®ç°æ•°æ®åŠ è½½ |â€”â€”dapr.retrievers.dense.py\tå¼•å…¥æ£€ç´¢å™¨ |â€”â€”dapr.dataloader.py\tè·å–æ ‡æ³¨å¥½çš„é—®é¢˜ |â€”â€”clddp.dm\t|â€”â€”clddp.search |â€”â€”clddp.evaluation |â€”â€”clddp.evaluation |â€”â€”clddp.dm ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 import json import logging import os from clddp.dm import LabeledQuery, RetrievedPassageIDList from clddp.utils import initialize_ddp, is_device_zero, parse_cli, set_logger_format from dapr.retrievers.dense import DRAGONPlus from dapr.exps.passage_only.args.dragon_plus import DRAGONPlusPassageOnlyArguments from clddp.search import search from dapr.dataloader import DAPRDataConfig, DAPRDataLoader from clddp.evaluation import RetrievalEvaluator import torch def is_device_zero(): return True def main(): set_logger_format(logging.INFO if is_device_zero() else logging.WARNING) # ...args.dragon_plus =============================== args = parse_cli(DRAGONPlusPassageOnlyArguments) # åŠ è½½å‚æ•° args.dump_arguments()\t# è®°å½•å‚æ•°åˆ°arguments.json # è®¾ç½®ç¯å¢ƒå˜é‡ =============================== if not torch.distributed.is_initialized(): os.environ[\u0026#34;MASTER_ADDR\u0026#34;] = \u0026#34;localhost\u0026#34; os.environ[\u0026#34;MASTER_PORT\u0026#34;] = \u0026#34;29501\u0026#34; os.environ[\u0026#34;WORLD_SIZE\u0026#34;] = \u0026#34;1\u0026#34; os.environ[\u0026#34;RANK\u0026#34;] = \u0026#34;0\u0026#34; os.environ[\u0026#34;LOCAL_RANK\u0026#34;] = \u0026#34;0\u0026#34; torch.distributed.init_process_group(backend=\u0026#34;nccl\u0026#34;) # clddp.utils =============================== initialize_ddp() # åˆå§‹åŒ– dstributed data process # dapr.dataloader =============================== dataset = DAPRDataLoader(DAPRDataConfig(args.data_dir)).load_data( progress_bar=is_device_zero() ) # dapr.retrievers.dense ================================ retriever = DRAGONPlus() # dapr.dataloader =============================== labeled_queries = dataset.get_labeled_queries(args.split) # clddp.dm ================================== queries = LabeledQuery.get_unique_queries(labeled_queries) # clddp.search retrieved = search( retriever=retriever, collection_iter=dataset.collection_iter, collection_size=dataset.collection_size, queries=queries, topk=args.topk, per_device_eval_batch_size=args.per_device_eval_batch_size, fp16=args.fp16, ) # clddp.evaluation evaluator = RetrievalEvaluator(eval_dataset=dataset, split=args.split) report = evaluator(retrieved) freport = os.path.join(args.output_dir, \u0026#34;metrics.json\u0026#34;) with open(freport, \u0026#34;w\u0026#34;) as f: json.dump(report, f, indent=4) logging.info(f\u0026#34;Saved evaluation metrics to {freport}.\u0026#34;) franked = os.path.join(args.output_dir, \u0026#34;ranking_results.txt\u0026#34;) RetrievedPassageIDList.dump_trec_csv( retrieval_results=retrieved, fpath=franked, system=\u0026#34;dragon_plus\u0026#34; ) logging.info(f\u0026#34;Saved ranking results to {franked}.\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: main() clddp.utils 1 2 3 4 ----|---------------------ä¸Šé¢çœç•¥ |â€”â€”...passage_only.dragon_plus_cp.py |â€”â€”...args.dragon_plus\tåŠ è½½å‚æ•°å’Œä¿å­˜å‚æ•°åˆ°jsonæ–‡ä»¶ |â€”â€”clddp.utils\tåˆå§‹åŒ–ddp dapr.dataloader.py 1 2 3 4 5 ----|---------------------ä¸Šé¢çœç•¥ |â€”â€”...passage_only.dragon_plus_cp.py |â€”â€”...args.dragon_plus\tåŠ è½½å‚æ•°å’Œä¿å­˜å‚æ•°åˆ°jsonæ–‡ä»¶ |â€”â€”clddp.utils\tåˆå§‹åŒ–ddp |â€”â€”dapr.dataloader.py\tDAPRDataConfig, DAPRDataLoaderå®ç°æ•°æ®åŠ è½½ dragon_plus_cpä¸­è¯­å¥ï¼š\n1 2 3 4 # dapr.dataloader =============================== dataset = DAPRDataLoader(DAPRDataConfig(args.data_dir)).load_data( progress_bar=is_device_zero() ) åˆ†ä¸¤æ­¥ï¼š\nDAPRDataConfig(args.data_dir)\nDAPRDataLoader(\u0026hellip;).load_data( progress_bar=is_device_zero() )\nwhere is_device_zero()==True å•å¡æ¨¡å¼\n1 2 3 4 5 6 7 8 # DAPRDataConfig(args.data_dir) @dataclass class DAPRDataConfig: data_name_or_path: str # è·¯å¾„å­—ç¬¦ä¸²\u0026#34;os.path.join(\u0026#34;exps/passage_only/dragon_plus\u0026#34;, self.run_name)\u0026#34; titled: bool = False # ç±»RetrievalLevelå’ŒParagraphSeparatorå…¶å®å°±æ˜¯Cä¸­ç»“æ„ä½“ï¼Œé™æ€çš„ retrieval_level: RetrievalLevel = RetrievalLevel.paragraph # \u0026#34;paragraph\u0026#34; paragraph_separator: ParagraphSeparator = ParagraphSeparator.blank # \u0026#34;blank\u0026#34; ï¼ˆDAPRDataLoaderåªåˆ—å‡ºç”¨åˆ°çš„å†…å®¹ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class DAPRDataLoader: def __init__(self, config: DAPRDataConfig) -\u0026gt; None: self.config = config ... def load_data(self, progress_bar: bool) -\u0026gt; RetrievalDataset: data = LoadedData.from_dump(self.config.data_name_or_path, pbar=progress_bar) assert data.meta_data is not None retrieval_level = self.config.retrieval_level if retrieval_level is RetrievalLevel.document: collection_size = data.meta_data[\u0026#34;ndocs\u0026#34;] else: collection_size = ( data.meta_data[\u0026#34;nchunks\u0026#34;] if data.meta_data.get(\u0026#34;nchunks_candidates\u0026#34;) is None else data.meta_data[\u0026#34;nchunks_candidates\u0026#34;] ) dataset = RetrievalDataset( collection_iter_fn=partial(self.collection_iter_fn, data=data), collection_size=collection_size, train_labeled_queries=self.build_labeled_queries( labeled_queries=data.labeled_queries_train ), dev_labeled_queries=self.build_labeled_queries( labeled_queries=data.labeled_queries_dev ), test_labeled_queries=self.build_labeled_queries( labeled_queries=data.labeled_queries_test ), ) return dataset dapr.datasets.dm 1 2 3 4 5 6 ----|---------------------ä¸Šé¢çœç•¥ |â€”â€”...passage_only.dragon_plus_cp.py |â€”â€”...args.dragon_plus\tåŠ è½½å‚æ•°å’Œä¿å­˜å‚æ•°åˆ°jsonæ–‡ä»¶ |â€”â€”clddp.utils\tåˆå§‹åŒ–ddp |â€”â€”dapr.dataloader.py\tDAPRDataConfig, DAPRDataLoaderå®ç°æ•°æ®åŠ è½½ |â€”â€”dapr.datasets.dm\t1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 @dataclass class LoadedData: # data: corpus_iter_fn: Optional[Callable[[], Iterable[Document]]] = None labeled_queries_train: Optional[List[LabeledQuery]] = None labeled_queries_dev: Optional[List[LabeledQuery]] = None labeled_queries_test: Optional[List[LabeledQuery]] = None # meta data: meta_data: Optional[MetaDataJson] = None ... @staticmethod def build_corpus_iter_fn(fpath: str) -\u0026gt; Iterable[Document]: with open(fpath) as f: for line in f: doc_json: DocumentJson = ujson.loads(line) document = Document.from_json(doc_json) document.set_default_candidates() # Also for compatibility with the older version yield document @staticmethod def load_labeled_queries( fpath: str, total: int, pbar: bool ) -\u0026gt; Optional[List[LabeledQuery]]: # fpath æ–‡ä»¶è·¯å¾„ total é—®ç­”å¯¹ä¸ªæ•° pbarå¯¹äºdevice 0 æ˜¯true if not os.path.exists(fpath): return None labeled_queries: List[LabeledQuery] = [] with open(fpath) as f: for line in tqdm.tqdm( f, total=total, desc=f\u0026#34;Loading from {fpath}\u0026#34;, disable=not pbar ): lq_json: LabeledQueryJson = ujson.loads(line) query_json = lq_json[\u0026#34;query\u0026#34;] query = Query(query_id=query_json[\u0026#34;id\u0026#34;], text=query_json[\u0026#34;text\u0026#34;]) judged_chunk_jsons = lq_json[\u0026#34;judged_chunks\u0026#34;] judged_chunks = [] for jchk_json in judged_chunk_jsons: document = Document.from_json(jchk_json[\u0026#34;belonging_doc\u0026#34;]) chunk_json: ChunkJson = jchk_json[\u0026#34;chunk\u0026#34;] chunk = Chunk( chunk_id=chunk_json[\u0026#34;id\u0026#34;], text=chunk_json[\u0026#34;text\u0026#34;], doc_summary=None, belonging_doc=document, ) jchk = JudgedChunk( query=query, chunk=chunk, judgement=jchk_json[\u0026#34;judgement\u0026#34;] ) judged_chunks.append(jchk) labeled_query = LabeledQuery(query=query, judged_chunks=judged_chunks) labeled_queries.append(labeled_query) return labeled_queries @classmethod def from_dump( cls: Type[LoadedData], dump_dir: str, pbar: bool = True ) -\u0026gt; LoadedData: # dump_dir=\u0026#34;.../ConditionalQA\u0026#34; # åŠ è½½meta_data.jsoné‡Œçš„æ•°æ® with open(os.path.join(dump_dir, \u0026#34;meta_data.json\u0026#34;)) as f: meta_data: MetaDataJson = ujson.load(f) meta_data[\u0026#34;chunk_separator\u0026#34;] = Separator(meta_data[\u0026#34;chunk_separator\u0026#34;]) # å®ä¾‹åŒ–å¹¶ä¼ å‡º loaded_data = cls( corpus_iter_fn=partial( cls.build_corpus_iter_fn, os.path.join(dump_dir, \u0026#34;corpus.jsonl\u0026#34;) ), labeled_queries_train=cls.load_labeled_queries( fpath=os.path.join(dump_dir, \u0026#34;train.jsonl\u0026#34;), total=meta_data[\u0026#34;nqueries_train\u0026#34;], pbar=pbar, ), labeled_queries_dev=cls.load_labeled_queries( fpath=os.path.join(dump_dir, \u0026#34;dev.jsonl\u0026#34;), total=meta_data[\u0026#34;nqueries_dev\u0026#34;], pbar=pbar, ), labeled_queries_test=cls.load_labeled_queries( fpath=os.path.join(dump_dir, \u0026#34;test.jsonl\u0026#34;), total=meta_data[\u0026#34;nqueries_test\u0026#34;], pbar=pbar, ), meta_data=meta_data, ) return loaded_data æ€»ç»“ å±ä¸€æ ·çš„ä»£ç \n","date":"2025-05-09T16:50:01+08:00","permalink":"https://rooobeam.github.io/p/dapr/","title":"DAPR"},{"content":"ConditionalQAè§£è¯» æ•°æ®çš„ç»“æ„ æ–‡ä»¶ç±»å‹ é—®ç­”æ•°æ®ä¸­çš„è§’è‰² æ•°æ®ç»“æ„ è§£é‡Š corpus.jsonl çŸ¥è¯†æºåº“ï¼ˆé™æ€ï¼‰ {\u0026ldquo;id\u0026rdquo;:\u0026ldquo;X\u0026rdquo;,\u0026ldquo;title\u0026rdquo;:\u0026ldquo;XXX\u0026rdquo;, \u0026ldquo;chunks\u0026rdquo;:[{\u0026ldquo;id\u0026rdquo;:\u0026ldquo;X-X\u0026rdquo;,\u0026ldquo;text\u0026rdquo;:\u0026ldquo;XXX\u0026rdquo;},{\u0026ldquo;id\u0026rdquo;:\u0026ldquo;X-X\u0026rdquo;,\u0026ldquo;text\u0026rdquo;:\u0026ldquo;XXX},{\u0026ldquo;id\u0026rdquo;:\u0026ldquo;X-X,\u0026ldquo;text\u0026rdquo;:\u0026ldquo;XXX\u0026rdquo;}\u0026hellip;\u0026hellip;} æ¯ç¯‡æ–‡ç« ä¸€ä¸ªå­—å…¸ï¼Œä¸‰ä¸ªé”®å€¼å¯¹ï¼Œ\u0026ldquo;id\u0026rdquo;:str, \u0026ldquo;title\u0026rdquo;:str, \u0026ldquo;chunks\u0026rdquo;:list train.jsonl è®­ç»ƒæ ·æœ¬é›†ï¼ˆåŠ¨æ€ï¼‰ {\u0026ldquo;qid\u0026rdquo;: \u0026ldquo;Q456\u0026rdquo;, \u0026ldquo;question\u0026rdquo;: \u0026ldquo;è‹¹æœåˆ›å§‹äººæ˜¯è°?\u0026rdquo;, \u0026ldquo;answer_doc\u0026rdquo;: \u0026ldquo;D123\u0026rdquo;, \u0026ldquo;answer_pos\u0026rdquo;: [0,5]} dev.jsonl è¶…å‚æ•°è°ƒä¼˜é›†ï¼ˆåŠ¨æ€ï¼‰ åŒtrainç»“æ„ï¼Œç”¨äºéªŒè¯é›† test.jsonl æœ€ç»ˆè¯„ä¼°é›†ï¼ˆé™æ€ï¼‰ åŒtrainç»“æ„ï¼Œä½†æ•°æ®ä»…åœ¨æœ€ç»ˆæµ‹è¯•ä½¿ç”¨ meta_data.json æ•°æ®è¯´æ˜ä¹¦ï¼ˆé™æ€ï¼‰ {\u0026ldquo;dataset\u0026rdquo;: \u0026ldquo;NQ\u0026rdquo;, \u0026ldquo;version\u0026rdquo;: 1.1, \u0026ldquo;avg_question_length\u0026rdquo;: 9.7} ","date":"2025-05-07T21:58:30+08:00","permalink":"https://rooobeam.github.io/p/conditionalqa/","title":"ConditionalQA"},{"content":"Tree Search ç›®å½•ç»“æ„ - - - - ä¸€ã€ç¿»è½¬æ ‘ äºŒã€ç›¸åŒæ ‘ ä¸‰ã€å±‚åºéå†å¹¶æ ‡åº å››ã€å¯¹ç§°æ ‘ äº”ã€äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ å…­ã€äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ ä¸ƒã€è·¯å¾„æ€»å’Œ å…«ã€äºŒå‰æ ‘å±‚åºéå†æ— æ ‡åºå· ä¹ã€å²›å±¿çš„å‘¨é•¿ åã€å·¦å¶å­ä¹‹å’Œ åä¸€ã€äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·® åäºŒã€äºŒå‰æ ‘å±‚åºéå†II åä¸‰ã€åˆå¹¶äºŒå‰æ ‘ åå››ã€äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ åäº”ã€æ‰¾å‡ºå…‹éš†äºŒå‰æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹ åå…­ã€å›¾åƒæ¸²æŸ“ [åä¸ƒã€Nå‰æ ‘çš„æœ€å¤§æ·±åº¦](#åä¸ƒN å‰æ ‘çš„æœ€å¤§æ·±åº¦) åå…«ã€å•å€¼äºŒå‰æ ‘ åä¹ã€äºŒå‰æ ‘çš„å ‚å…„å¼ŸèŠ‚ç‚¹ äºŒåã€å¯»æ‰¾å›¾ä¸­æ˜¯å¦å­˜åœ¨è·¯å¾„ äºŒåä¸€ã€å¦ä¸€æ£µæ ‘çš„å­æ ‘ äºŒåäºŒã€äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹ äºŒåä¸‰ã€äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° äºŒåå››ã€è¡¨æ ¼é‡Œå•è¯æœç´¢ äºŒåäº”ã€äºŒå‰æ ‘åŒ–å•é“¾è¡¨ äºŒåå…­ã€æ‰¾åˆ°æ‰€æœ‰çš„å†œåœºç»„ [äºŒåä¸ƒã€è·¯å¾„æ€»å’Œ II](#äºŒåä¸ƒè·¯å¾„æ€»å’Œ II) äºŒåå…«ã€äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨ é˜Ÿåˆ—çš„è¿ç”¨ï¼šä¸€ã€äºŒã€\nä¸€ã€ç¿»è½¬æ ‘ ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def invertTree(self, root: Optional[TreeNode]) -\u0026gt; Optional[TreeNode]: # æ’é™¤rootä¸ºç©ºçš„æƒ…å†µ if not root: return root # é˜Ÿåˆ— \u0026lt;â€”â€”\u0026gt; list que=[root]\t# å¾ªç¯æ¡ä»¶ï¼šé˜Ÿåˆ—ä¸ä¸ºç©º while que: # å‡ºé˜Ÿ tnode=que.pop(0) # å¦‚æœå·¦å­æ ‘å­˜åœ¨ï¼Œå…¥é˜Ÿ if tnode.left: que.append(tnode.left) # å¦‚æœå³å­æ ‘å­˜åœ¨ï¼Œå…¥é˜Ÿ if tnode.right: que.append(tnode.right) # å°†å¼€å¤´å‡ºé˜Ÿçš„å·¦å³å­æ ‘æ¢ä½ a=tnode.right tnode.right=tnode.left tnode.left=a return root #å…³é”®åœ¨äºï¼Œé˜Ÿåˆ—åˆå§‹åŒ–ã€å‡ºå…¥é˜Ÿæ“ä½œï¼Œä»¥åŠå­˜åœ¨æ‰å…¥é˜Ÿã€‚ äºŒã€ç›¸åŒæ ‘ ç»™ä½ ä¸¤æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ p å’Œ q ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ£€éªŒè¿™ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒã€‚\nå¦‚æœä¸¤ä¸ªæ ‘åœ¨ç»“æ„ä¸Šç›¸åŒï¼Œå¹¶ä¸”èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def isSameTree(self, p: Optional[TreeNode], q: Optional[TreeNode]) -\u0026gt; bool: p_ls=[p] q_ls=[q] while(p_ls): p_n=p_ls.pop(0) q_n=q_ls.pop(0) if (p_n is None and q_n is not None or q_n is None and p_n is not None): return False if p_n and q_n: if p_n.val!=q_n.val: return False p_ls.append(p_n.left) p_ls.append(p_n.right) q_ls.append(q_n.left) q_ls.append(q_n.right) return True ä¸‰ã€å±‚åºéå†å¹¶æ ‡åºï¼ˆè‡ªå®šä¹‰ï¼‰ï¼ˆé€šè§£æ€§ï¼‰ æ­¤é¢˜ä¸ºè‡ªå®šä¹‰çš„ï¼Œå…·æœ‰é€šè§£æ€§è´¨ï¼Œå¯æš´åŠ›è§£å†³å¾ˆå¤šé¢˜ç›®ã€‚\nç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œä¸€å±‚ä¸€å±‚åœ°æ‰“å°å¹¶æ ‡æ˜ä½ç½®ï¼ŒåŒ…æ‹¬ç©ºç»“ç‚¹ã€‚\nå…³é”®æ˜¯é€šè¿‡ä¸Šå±‚åºå·ï¼Œå‘å·¦å­æ ‘èµ°+0ï¼Œå‘å³å­æ ‘èµ°+1\næ‰“å°ç±»ä¼¼ï¼š\n(root,0)\n(left,0) (right,1)\n(left_left,0) (left_right,1) (none,2) (right_right,3)\n(?,0) (?,1) (?,2) (?,3) (?,6) (?,7)\n1 2 3 4 5 6 7 8 9 10 11 12 # åœ¨ 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ æµ‹è¯•çš„ class Solution: def maxDepth(self, root: Optional[TreeNode]) -\u0026gt; int: que=[(root,0)] while que: for _ in range(len(que)): tnode, pos=que.pop(0) print(f\u0026#34;{tnode.val if tnode else None},{pos}\\t\u0026#34;, end=\u0026#39;\u0026#39;) if tnode: que.append((tnode.left,pos*2)) que.append((tnode.right,pos*2+1)) print() å››ã€å¯¹ç§°æ ‘ ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 # æš´åŠ›æ ‡å‡ºè¡Œç‚¹ä½ # å˜é‡è¯´æ˜ # q: que é˜Ÿåˆ—\tcnt: è®°å½•æŸå±‚å­˜åœ¨çš„ç»“ç‚¹çš„ä¸ªæ•°\tn_lay: å½“å‰å±‚æ€»ä½ç½®æ•°ï¼Œå³2^kä¸ªï¼Œk=0,1,2... # n: å½“å‰å±‚æœªåˆ†æçš„ç»“ç‚¹ä¸ªæ•°ï¼Œåˆå§‹ä¸ºcntï¼Œç„¶å-1-1-1... # cp_cnt: è®°å½•å½“å‰å±‚çš„ç»“ç‚¹æ€»ä¸ªæ•°ï¼Œåˆå§‹å’Œnä¸€æ ·ï¼Œåªä¸è¿‡ä¸ä¼šå˜åŒ– # stack: æ ˆï¼Œè¿›æ ˆä¸€åŠç»“ç‚¹åï¼Œå¼€å§‹åˆ†æå¯¹ç§°æ€§æ—¶ï¼Œé€šè¿‡å‡ºæ ˆäº’æ¶ˆé™¤ class Solution: def isSymmetric(self, root: Optional[TreeNode]) -\u0026gt; bool: if not root: return True q=[(root,0)]\t# é˜Ÿåˆ— cnt=1 # åˆå§‹åŒ–ç¬¬ä¸€å±‚è¦åˆ†æçš„ç»“ç‚¹æ•° n_lay=1 # å½“å‰å±‚çš„ä½ç½®æ€»ä¸ªæ•° while(q): n=cnt # è¯¥å±‚ è¿˜è¦ åˆ†æç»“ç‚¹æ•°ï¼Œä¸åœåœ°å‡ä¸€ cp_cnt=cnt # è¯¥å±‚ ç»“ç‚¹æ€»æ•° cnt=0 # æ¸…é›¶ä¿å­˜ä¸‹å±‚ç»“ç‚¹æ•° stack=[] # éå†å½“å‰å±‚ while (n): tnode=q.pop(0) if n\u0026lt;=cp_cnt/2: # å‡ºæ ˆ pop_node=stack.pop(-1) # éƒ½æ˜¯çœŸï¼Œæ ¸å¯¹ä½ç½®å’Œå€¼ if tnode[0] and pop_node[0]: if tnode[0].val!=pop_node[0].val: print(\u0026#39;A\u0026#39;) return False if (tnode[1]+pop_node[1])!=n_lay-1: print(\u0026#39;B\u0026#39;) return False # æ’é™¤äº†éƒ½æ˜¯çœŸï¼Œä½†ä¸éƒ½Noneï¼Œåˆ™å¿…ä¸ºä¸€çœŸä¸€None elif tnode[0] or pop_node[0]: print(\u0026#39;C\u0026#39;) return False else: # éƒ½æ˜¯Noneï¼Œæ ¸å¯¹ä½ç½® if (tnode[1]+pop_node[1])!=n_lay-1: print(\u0026#39;D\u0026#39;) return False # éƒ½æ˜¯Noneåˆ™å·²ç»å‡ºæ ˆå®Œæˆäº’æ¶ˆ else: stack.append(tnode) if tnode[0]: q.append((tnode[0].left,tnode[1]*2+0)) q.append((tnode[0].right,tnode[1]*2+1)) cnt+=2 n-=1 n_lay*=2 return True 1 2 3 4 5 6 7 8 9 # é€’å½’ class Solution: def isSymmetric(self, root: Optional[TreeNode]) -\u0026gt; bool: def recur(L, R): if not L and not R: return True if not L or not R or L.val != R.val: return False return recur(L.left, R.right) and recur(L.right, R.left) return not root or recur(root.left, root.right) äº”ã€äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘ root ï¼Œè¿”å›å…¶æœ€å¤§æ·±åº¦ã€‚\näºŒå‰æ ‘çš„ æœ€å¤§æ·±åº¦ æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚\nä¸¤ç§æ€è·¯ï¼šè‡ªé¡¶å‘ä¸‹ å’Œ è‡ªåº•å‘ä¸Š\nè‡ªé¡¶å‘ä¸‹ï¼šé¡¶å±‚ä¸º1ï¼Œå‘ä¸‹åŠ ä¸€å¹¶å–æœ€å¤§è¿”å› 1 2 3 4 5 6 7 8 9 10 # è‡ªé¡¶å‘ä¸‹ class Solution: def recur(self,tnode:Optional[TreeNode],dep:int)-\u0026gt;int: if not tnode: return dep-1 else: return max(self.recur(tnode.left, dep+1), self.recur(tnode.right, dep+1)) def maxDepth(self, root: Optional[TreeNode]) -\u0026gt; int: return self.recur(root,1) è‡ªåº•å‘ä¸Šï¼šæœ€åº•ç©ºç»“ç‚¹ä¸º0ï¼Œä¸€ç›´å‘ä¸ŠåŠ ï¼Œå¤ªæƒŠè‰³äº† â€œæˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ç§ç†è§£é€’å½’çš„è¯´æ³•ï¼šã€Œåœ¨å†™é€’å½’å‡½æ•°æ—¶ï¼Œå¯ä»¥å‡è®¾é€’å½’è¿”å›çš„ç»“æœä¸€å®šæ˜¯æ­£ç¡®çš„ã€ã€‚å…¶å®è¿™ç§è¯´æ³•æœ¬è´¨ä¸Šå°±æ˜¯æ•°å­¦å½’çº³æ³•ã€‚â€â€”â€”ä½œè€…\nä»£ç ä¸­ max(l_depth, r_depth) + 1 å°±æ˜¯å‡è®¾l_depth å’Œ r_depthæ˜¯æ­£ç¡®çš„ï¼Œç„¶åæœ¬å±‚åˆ™ä¸º max(l_depth, r_depth) + 1\nâ€‹\tif root is None: â€‹ return 0 â€‹ l_depth = self.maxDepth(root.left) â€‹ r_depth = self.maxDepth(root.right) åˆ™ä¿è¯äº†åˆå§‹çŠ¶å†µä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œåˆšæ‰çš„å‡è®¾ä¾¿æˆç«‹ï¼Œå°±èƒ½å¾—åˆ°æ­£ç¡®ç»“æœã€‚\nhttps://leetcode.cn/problems/maximum-depth-of-binary-tree/solutions/2010612/kan-wan-zhe-ge-shi-pin-rang-ni-dui-di-gu-44uz/\n1 2 3 4 5 6 # è‡ªåº•å‘ä¸Š class Solution: def maxDepth(self, root: Optional[TreeNode]) -\u0026gt; int: if not root: return 0 return max(self.maxDepth(root.left),self.maxDepth(root.right))+1 å…­ã€äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚\næœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚\nè¯´æ˜ï¼šå¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def minDepth(self, root: Optional[TreeNode]) -\u0026gt; int: if not root: return 0 # rootæ­¤æ—¶å¿…ä¸ºTrue return self.recur(root) def recur(self, root: Optional[TreeNode]) -\u0026gt; int: # ä¿©å­èŠ‚ç‚¹éƒ½ä¸ºFalse if not (root.left or root.right): return 1 # ä¿©å­èŠ‚ç‚¹éƒ½ä¸ºTrue elif root.left and root.right: return min(self.recur(root.left),self.recur(root.right))+1 # 1 True 1 False else: return self.recur(root.left)+1 if root.left else self.recur(root.right)+1 ä¸ƒã€è·¯å¾„æ€»å’Œ ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•° targetSum ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ targetSum ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\nå¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n112. è·¯å¾„æ€»å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def hasPathSum(self, root: Optional[TreeNode], targetSum: int) -\u0026gt; bool: if not root:return False def dfs(node, target, s): if not node:return False s+=node.val if not node.left and not node.right: if s==target: return True else: return False return dfs(node.left, target, s) or dfs(node.right, target, s) return dfs(root, targetSum, 0) å…«ã€äºŒå‰æ ‘å±‚åºéå†æ— æ ‡åºå· ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„ å±‚åºéå† ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚\nâ€œä¸‰ã€å±‚åºéå†å¹¶æ ‡åºâ€çš„ç®€å•ç‰ˆã€‚\n102. äºŒå‰æ ‘çš„å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def levelOrder(self, root: Optional[TreeNode]) -\u0026gt; List[List[int]]: # ä¿è¯rootæœ‰val if not root: return [] q=[root] nodes=[] # å…¨éƒ¨éå†ï¼ˆç›¸å¯¹å±‚å†…è€Œè¨€ï¼‰ while(q): tmp=[] # å±‚å†…éå† for _ in range(len(q)): tnode=q.pop(0) tmp.append(tnode.val) if(tnode.left): q.append(tnode.left) if(tnode.right): q.append(tnode.right) nodes.append(tmp) return nodes ä¹ã€å²›å±¿çš„å‘¨é•¿ å²›å±¿çš„å‘¨é•¿\nç»™å®šä¸€ä¸ª row x col çš„äºŒç»´ç½‘æ ¼åœ°å›¾ grid ï¼Œå…¶ä¸­ï¼šgrid[i][j] = 1 è¡¨ç¤ºé™†åœ°ï¼Œ grid[i][j] = 0 è¡¨ç¤ºæ°´åŸŸã€‚\nç½‘æ ¼ä¸­çš„æ ¼å­ æ°´å¹³å’Œå‚ç›´ æ–¹å‘ç›¸è¿ï¼ˆå¯¹è§’çº¿æ–¹å‘ä¸ç›¸è¿ï¼‰ã€‚æ•´ä¸ªç½‘æ ¼è¢«æ°´å®Œå…¨åŒ…å›´ï¼Œä½†å…¶ä¸­æ°å¥½æœ‰ä¸€ä¸ªå²›å±¿ï¼ˆæˆ–è€…è¯´ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç¤ºé™†åœ°çš„æ ¼å­ç›¸è¿ç»„æˆçš„å²›å±¿ï¼‰ã€‚\nå²›å±¿ä¸­æ²¡æœ‰â€œæ¹–â€ï¼ˆâ€œæ¹–â€ æŒ‡æ°´åŸŸåœ¨å²›å±¿å†…éƒ¨ä¸”ä¸å’Œå²›å±¿å‘¨å›´çš„æ°´ç›¸è¿ï¼‰ã€‚æ ¼å­æ˜¯è¾¹é•¿ä¸º 1 çš„æ­£æ–¹å½¢ã€‚ç½‘æ ¼ä¸ºé•¿æ–¹å½¢ï¼Œä¸”å®½åº¦å’Œé«˜åº¦å‡ä¸è¶…è¿‡ 100 ã€‚è®¡ç®—è¿™ä¸ªå²›å±¿çš„å‘¨é•¿ã€‚\n1 2 3 è¾“å…¥ï¼šgrid = [[0,1,0,0],[1,1,1,0],[0,1,0,0],[1,1,0,0]] è¾“å‡ºï¼š16 è§£é‡Šï¼šå®ƒçš„å‘¨é•¿æ˜¯ä¸Šé¢å›¾ç‰‡ä¸­çš„ 16 ä¸ªé»„è‰²çš„è¾¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # ä¸ç”¨æ£€æŸ¥æ¯ä¸ªåœŸæ ¼å››å‘¨æ˜¯å¦ä¹Ÿæ˜¯åœŸæ ¼å­ï¼Œå› ä¸ºaæ ¼å­å³è¾¹æ˜¯bæ ¼å­ï¼Œ # åˆ™bæ ¼å­å·¦è¾¹å¿…ç„¶æ˜¯aæ ¼å­ï¼Œåªéœ€æ£€æŸ¥æ¯ä¸ªæ ¼å­çš„å·¦ä¸Šå³å¯ class Solution: def islandPerimeter(self, grid: List[List[int]]) -\u0026gt; int: # å®šä¹‰è¡Œæ•°ã€åˆ—æ•°å’Œå‘¨é•¿ row=len(grid) col=len(grid[0]) sum=0 # row_ls: row list\te: element for i,row_ls in enumerate(grid): for j,e in enumerate(row_ls): # å¦‚æœæ˜¯åœ° if e: sum+=4 # æ£€æŸ¥å·¦æ–¹æ ¼æ˜¯å¦ä¸ºåœŸï¼Œé¦–å…ˆæ’é™¤å‘å·¦è¶…è¾¹ç•Œ if j!=0 and grid[i][j-1]: sum-=2 # æ£€æŸ¥ä¸Šæ–¹æ ¼æ˜¯å¦ä¸ºåœŸï¼Œé¦–å…ˆæ’é™¤å‘ä¸Šè¶…è¾¹ç•Œ if i!=0 and grid[i-1][j]: sum-=2 return sum åã€å·¦å¶å­ä¹‹å’Œ 404. å·¦å¶å­ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›æ‰€æœ‰å·¦å¶å­ä¹‹å’Œã€‚\n1 2 3 è¾“å…¥: root = [3,9,20,null,null,15,7] è¾“å‡º: 24 è§£é‡Š: åœ¨è¿™ä¸ªäºŒå‰æ ‘ä¸­ï¼Œæœ‰ä¸¤ä¸ªå·¦å¶å­ï¼Œåˆ†åˆ«æ˜¯ 9 å’Œ 15ï¼Œæ‰€ä»¥è¿”å› 24 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def sumOfLeftLeaves(self, root: Optional[TreeNode]) -\u0026gt; int: if not root: return 0 l_c=root.left r_c=root.right l_cnt=r_cnt=0 if l_c: if not l_c.left and not l_c.right: l_cnt+=l_c.val else: l_cnt=self.sumOfLeftLeaves(l_c) # å³å­©å­éç©ºä¸”éå¶å­ç»“ç‚¹ if r_c and r_c.left or r_c.right: r_cnt=self.sumOfLeftLeaves(r_c) return l_cnt+r_cnt åä¸€ã€äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·® 530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å› æ ‘ä¸­ä»»æ„ä¸¤ä¸åŒèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å°å·®å€¼ ã€‚\nå·®å€¼æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå…¶æ•°å€¼ç­‰äºä¸¤å€¼ä¹‹å·®çš„ç»å¯¹å€¼ã€‚\nWhat I learn:\nç±»é‡Œçš„å…¨å±€å˜é‡â€”â€”ç±»å±æ€§ï¼ˆè§ åä¹ ï¼ŒåµŒå¥—å‡½æ•°é‡Œå£°æ˜å¤–éƒ¨å˜é‡ nonelocalï¼‰ è°ƒç”¨ç±»çš„å±æ€§ã€æ–¹æ³•éƒ½è¦â€œself.â€ â€œself.â€ â€œself.â€ !!! äºŒå‰æœç´¢æ ‘ \u0026mdash; ä¸­åºéå†å¯å¾—ç”±å°åˆ°å¤§çš„åºåˆ—ï¼Œå…¶ä»–é¢˜è§ äºŒåä¸‰ã€äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def __init__(self): self.dif=inf self.pre=-inf def getMinimumDifference(self, root: Optional[TreeNode]) -\u0026gt; int: if root.left: self.getMinimumDifference(root.left) self.dif=min(self.dif, root.val-self.pre) self.pre=root.val if root.right: self.getMinimumDifference(root.right) return self.dif åäºŒã€äºŒå‰æ ‘å±‚åºéå†II 107. äºŒå‰æ ‘çš„å±‚åºéå† II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼ è‡ªåº•å‘ä¸Šçš„å±‚åºéå† ã€‚ ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def levelOrderBottom(self, root: Optional[TreeNode]) -\u0026gt; List[List[int]]: if not root: return [] q=[root] nodes=[] while(q): tmp=[] for _ in range(len(q)): tnode=q.pop(0) tmp.append(tnode.val) if tnode.left: q.append(tnode.left) if tnode.right: q.append(tnode.right) nodes.append(tmp) return nodes[::-1] åä¸‰ã€åˆå¹¶äºŒå‰æ ‘ 617. åˆå¹¶äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n**é€’å½’ï¼š1. å‡å®šå¾€ä¸‹ä¼ ä¸€äº›å‚æ•°ï¼Œä»–èƒ½è¿”å›ç†æƒ³å€¼ï¼Œ2. å½“å‰å±‚ï¼Œæ¥æ”¶äº†ä¸Šå±‚å‚æ•°ï¼Œç¡®ä¿èƒ½è¿”å›ç†æƒ³å€¼ã€‚**å…·ä½“çœ‹ä»£ç æ³¨é‡Šï¼Œå…³é”®æ˜¯ â€œå¤„ç†å¥½å½“å‰å±‚å†…å®¹ï¼Œæ­£ç¡®è¿”å›ä¸Šå±‚â€\nç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š root1 å’Œ root2 ã€‚\næƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œä¸ä¸º null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚\nè¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚\næ³¨æ„: åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class Solution: def mergeTrees(self, root1: Optional[TreeNode], root2: Optional[TreeNode]) -\u0026gt; Optional[TreeNode]: # ===== å½“å‰å±‚ï¼Œæ¥æ”¶äº†ä¸Šå±‚å‚æ•°ï¼Œç¡®ä¿èƒ½è¿”å›ç†æƒ³å€¼ ===== # éƒ½ä¸ºç©ºä¼ å›ç©º if root1 is None and root2 is None: return None # å¦åˆ™å¿…æœ‰ä¸€ä¸ªéç©º # ä¸€ä¸ªéç©ºä¼ å› éç©ºé‚£ä¸ª if root1 is None: return root2 if root2 is None: return root1 # å¦åˆ™å¿…ç„¶éƒ½éç©º # éƒ½éç©ºï¼Œä¸returnï¼ŒåŠ å’Œå½“å‰ç»“ç‚¹å€¼ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œ root1.val+=root2.val # ===== å‡å®šå¾€ä¸‹ä¼ ä¸€äº›å‚æ•°ï¼Œä»–èƒ½è¿”å›ç†æƒ³å€¼ ===== root1.left=self.mergeTrees(root1.left,root2.left) root1.right=self.mergeTrees(root1.right,root2.right) return root1 åå››ã€äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ 637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root , ä»¥æ•°ç»„çš„å½¢å¼è¿”å›æ¯ä¸€å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼ã€‚ä¸å®é™…ç­”æ¡ˆç›¸å·® 10-5 ä»¥å†…çš„ç­”æ¡ˆå¯ä»¥è¢«æ¥å—ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution: def averageOfLevels(self, root: Optional[TreeNode]) -\u0026gt; List[float]: if not root: return [] q=[root] ave=[] while(q): tmp=0.0\t#å½“å‰å±‚çš„å’Œ q_len=len(q)\t# å½“å‰å±‚é•¿åº¦ for _ in range(q_len): tnode=q.pop(0) tmp+=tnode.val if tnode.left: q.append(tnode.left) if tnode.right: q.append(tnode.right) ave.append(tmp/q_len) return ave åäº”ã€æ‰¾å‡ºå…‹éš†äºŒå‰æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹ 1379. æ‰¾å‡ºå…‹éš†äºŒå‰æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼ŒåŸå§‹æ ‘ original å’Œå…‹éš†æ ‘ clonedï¼Œä»¥åŠä¸€ä¸ªä½äºåŸå§‹æ ‘ original ä¸­çš„ç›®æ ‡èŠ‚ç‚¹ targetã€‚\nå…¶ä¸­ï¼Œå…‹éš†æ ‘ cloned æ˜¯åŸå§‹æ ‘ original çš„ä¸€ä¸ª å‰¯æœ¬ ã€‚\nè¯·æ‰¾å‡ºåœ¨æ ‘ cloned ä¸­ï¼Œä¸ target ç›¸åŒ çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›å¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆåœ¨ C/C++ ç­‰æœ‰æŒ‡é’ˆçš„è¯­è¨€ä¸­è¿”å› èŠ‚ç‚¹æŒ‡é’ˆï¼Œå…¶ä»–è¯­è¨€è¿”å›èŠ‚ç‚¹æœ¬èº«ï¼‰ã€‚\nWhat I have leaned:\nå£°æ˜å…¨å±€å˜é‡ æœªå¿…æ¯” ä¼ å½¢å‚è¦å¥½ï¼Œå› ä¸ºpythonéƒ½æ˜¯ä¼ å¼•ç”¨ï¼Œé™¤éå¯¹å…¶ä¿®æ”¹ æ‰å¯èƒ½ åˆ›å»ºå‰¯æœ¬ TreeNodeå¯ä»¥ç›´æ¥è¿›è¡Œæ¯”è¾ƒï¼Œå®é™…æ¯”è¾ƒçš„æ˜¯ ç‰©ç†å†…å­˜åœ°å€ï¼ˆæŒ‡é’ˆï¼‰ï¼Œtargetå’ŒoriginalæŒ‡åˆ°åŒä¸€å¤„æ—¶ï¼Œoriginal is targetæ‰ä¸ºTrueï¼Œcloned is targetæ°¸è¿œä¸ºFalse 1 2 3 4 5 6 7 8 class Solution: def getTargetCopy(self, original: TreeNode, cloned: TreeNode, target: TreeNode) -\u0026gt; TreeNode: if original is None or original is target: return cloned return self.getTargetCopy(original.left, cloned.left, target) or \\ self.getTargetCopy(original.right, cloned.right, target) ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœ åå…­ã€å›¾åƒæ¸²æŸ“ 733. å›¾åƒæ¸²æŸ“ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\næœ‰ä¸€å¹…ä»¥ m x n çš„äºŒç»´æ•´æ•°æ•°ç»„è¡¨ç¤ºçš„å›¾ç”» image ï¼Œå…¶ä¸­ image[i][j] è¡¨ç¤ºè¯¥å›¾ç”»çš„åƒç´ å€¼å¤§å°ã€‚ä½ ä¹Ÿè¢«ç»™äºˆä¸‰ä¸ªæ•´æ•° sr , sc å’Œ color ã€‚ä½ åº”è¯¥ä»åƒç´  image[sr][sc] å¼€å§‹å¯¹å›¾åƒè¿›è¡Œä¸Šè‰² å¡«å…… ã€‚\nä¸ºäº†å®Œæˆ ä¸Šè‰²å·¥ä½œï¼š\nä»åˆå§‹åƒç´ å¼€å§‹ï¼Œå°†å…¶é¢œè‰²æ”¹ä¸º colorã€‚ å¯¹åˆå§‹åæ ‡çš„ ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ä¸Š ç›¸é‚»ä¸”ä¸åˆå§‹åƒç´ çš„åŸå§‹é¢œè‰²åŒè‰²çš„åƒç´ ç‚¹æ‰§è¡Œç›¸åŒæ“ä½œã€‚ é€šè¿‡æ£€æŸ¥ä¸åˆå§‹åƒç´ çš„åŸå§‹é¢œè‰²ç›¸åŒçš„ç›¸é‚»åƒç´ å¹¶ä¿®æ”¹å…¶é¢œè‰²æ¥ç»§ç»­ é‡å¤ æ­¤è¿‡ç¨‹ã€‚ å½“ æ²¡æœ‰ å…¶å®ƒåŸå§‹é¢œè‰²çš„ç›¸é‚»åƒç´ æ—¶ åœæ­¢ æ“ä½œã€‚ æœ€åè¿”å›ç»è¿‡ä¸Šè‰²æ¸²æŸ“ ä¿®æ”¹ åçš„å›¾åƒ ã€‚\nwhat you learn:\nåˆå§‹åƒç´ ä¸ç›®æ ‡é¢œè‰²ç›¸åŒã€‚ä¸ä¼šå¯¹å›¾åƒè¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ æ‰¾ä¸€ç§ä¸­åºéå†çš„æ„Ÿè§‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution: def floodFill(self, image: List[List[int]], sr: int, sc: int, color: int) -\u0026gt; List[List[int]]: q=[(sr,sc)] r_len=len(image) c_len=len(image[0]) # original color ori_c=image[sr][sc] if ori_c==color: return image while(q): # element e=q.pop(0) # current block\u0026#39;s color image[e[0]][e[1]]=color # ä¸Š:è¡Œä¸ä¸º0 if e[0] and image[e[0]-1][e[1]] == ori_c: q.append((e[0]-1, e[1])) # å·¦ï¼šåˆ—ä¸ä¸º0 if e[1] and image[e[0]][e[1]-1] == ori_c: q.append((e[0], e[1]-1)) # ä¸‹ï¼šè¡Œä¸ä¸ºr_len-1 if e[0]!=r_len-1 and image[e[0]+1][e[1]] == ori_c: q.append((e[0]+1, e[1])) # å³ï¼šåˆ—ä¸ä¸ºc_len-1 if e[1]!=c_len-1 and image[e[0]][e[1]+1] == ori_c: q.append((e[0], e[1]+1)) return image åä¸ƒã€N å‰æ ‘çš„æœ€å¤§æ·±åº¦ 559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œæ‰¾åˆ°å…¶æœ€å¤§æ·±åº¦ã€‚\næœ€å¤§æ·±åº¦æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ€»æ•°ã€‚\nWhat I learn:\nä¸è¦æ‰å…¥æƒ¯æ€§æ€ç»´çš„å‘ï¼Œä»”ç»†çœ‹å®ƒå®šä¹‰çš„ç±»ï¼ˆç»“æ„ä½“ï¼‰æ˜¯æ€æ ·çš„ï¼Œæ­¤é¢˜æ²¡æœ‰ç©ºç»“ç‚¹ï¼ˆå¯¹æ¯” äºŒå‰æ ‘æœ€å¤§æ·±åº¦ çš„ å®šä¹‰ï¼Œå®ƒä¸æ˜¯å­æ ‘ç»“ç‚¹ä¸ºNoneè€Œæ˜¯å­˜å­æ ‘çš„listä¸ºNoneï¼Œå› æ­¤ï¼Œæ— æ³•å®ç° â€œå½“å‰ç»“ç‚¹ä¸ºNoneâ€è¿™ç§åšæ³•ã€‚ è¿™å°±å¼•å‡ºåœ¨é€’å½’ç»“å°¾å¤„çš„ä¸¤ç§å¤„ç†ï¼Œä¸€ç§æ˜¯â€œå¦‚æœå­æ ‘ä¸ä¸ºç©ºï¼Œæ‰è¿›å…¥é€’å½’å‡½æ•°â€ï¼Œå¦ä¸€ç§æ˜¯â€œå­æ ‘ç»“ç‚¹ä¼ è¿›é€’å½’å‡½æ•°ï¼Œå‡½æ•°å¼€å¤´åˆ¤æ–­æ˜¯å¦ä¸ºç©ºâ€ï¼Œæˆ‘ç§°å‰è€…ä¸ºâ€œé¢„åˆ¤å¤„ç†â€ï¼Œåè€…ä¸ºâ€œå½“å‰å±‚å¤„ç†â€ã€‚äºŒè€…çœ‹æƒ…å†µç”¨ï¼Œé€šå¸¸ç”¨â€œå½“å‰å±‚å¤„ç†â€ï¼Œä½†è¿™é‡Œä¸è¡Œï¼Œå› ä¸ºæ²¡æœ‰ ç©ºç»“ç‚¹ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \u0026#34;\u0026#34;\u0026#34; # Definition for a Node. class Node: def __init__(self, val: Optional[int] = None, children: Optional[List[\u0026#39;Node\u0026#39;]] = None): self.val = val self.children = children \u0026#34;\u0026#34;\u0026#34; class Solution: def maxDepth(self, root: \u0026#39;Node\u0026#39;) -\u0026gt; int: if not root: # æ³¨æ„å‡½æ•°è¿”å›å€¼é™åˆ¶ä¸ºintç±»å‹ return 0 # æ³¨æ„ä¸æ˜¯ä»ç©ºç»“ç‚¹å±‚å‘ä¸Šè¿”å›çš„ï¼Œæ•…ä¸æ˜¯ä»0å¼€å§‹ return \\ max([self.maxDepth(node) for node in root.children])+1 \\ if root.children else 1 åå…«ã€å•å€¼äºŒå‰æ ‘ 965. å•å€¼äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nå¦‚æœäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹éƒ½å…·æœ‰ç›¸åŒçš„å€¼ï¼Œé‚£ä¹ˆè¯¥äºŒå‰æ ‘å°±æ˜¯å•å€¼äºŒå‰æ ‘ã€‚\nåªæœ‰ç»™å®šçš„æ ‘æ˜¯å•å€¼äºŒå‰æ ‘æ—¶ï¼Œæ‰è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚\nWhat I learn:\næ–¹æ³•é‡Œå®šä¹‰çš„ä¸´æ—¶å˜é‡ï¼ˆä»£ç é‡Œçš„ v ï¼‰ï¼Œå¯¹äºæ–¹æ³•é‡Œçš„å‡½æ•°ï¼ˆå“ªæ€•é€’å½’äº†ï¼‰æ˜¯å…¨å±€çš„ã€‚\nâ€”â€” å½“dfsè¢«å®šä¹‰ä¸ºåµŒå¥—å‡½æ•°æ—¶ï¼Œå®ƒå¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°isUnivalTreeä¸­çš„å˜é‡vï¼ˆé—­åŒ…æœºåˆ¶ï¼‰\nâ€”â€” å¦‚æœå°†dfsæ”¹ä¸ºå®ä¾‹æ–¹æ³•ï¼ˆå¦‚self.dfsï¼‰ï¼Œä¸èƒ½è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡v\nâ€”â€” è¿˜è¦çœ‹æ˜¯è®¿é—®çš„å˜é‡ç±»å‹ï¼Œä¸å¯å˜ç±»å‹ï¼šå¯è¯»ï¼Œè¦å†™éœ€nonlocalï¼›\nâ€‹\tå¯å˜ç±»å‹ï¼šå¯è¯»å¯å†™\nå¦‚æœæœ‰å¤šä¸ªã€å¤šé‡if elseï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ç”¨ or and ä»£æ›¿\nå®šä¹‰å‚æ•°æ—¶ä¸è¦å’Œå¤–è¾¹å˜é‡é‡åï¼Œå¦‚ï¼šdef dfs(node): è€Œé def dfs(root):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def isUnivalTree(self, root: TreeNode) -\u0026gt; bool: # å˜é‡vå¯¹äºdfsæ˜¯å…¨å±€çš„ v = root.val def dfs(node): return node is None or \\ (node.val == v and dfs(node.left) and dfs(node.right)) return dfs(root) ä½œè€…ï¼šBenhao \u0026#39;\u0026#39;\u0026#39; return node is None or \\ (node.val == v and dfs(node.left) and dfs(node.right)) ===== ç­‰ä»·äº ===== if not root: return True if root.val==self.n: return self.recur(root.left) and self.recur(root.right) else: return False \u0026#39;\u0026#39;\u0026#39; åä¹ã€äºŒå‰æ ‘çš„å ‚å…„å¼ŸèŠ‚ç‚¹ 993. äºŒå‰æ ‘çš„å ‚å…„å¼ŸèŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nåœ¨äºŒå‰æ ‘ä¸­ï¼Œä¸¤ä¸ªèŠ‚ç‚¹æ·±åº¦ç›¸åŒï¼Œä½† çˆ¶èŠ‚ç‚¹ä¸åŒ ï¼Œåˆ™å®ƒä»¬æ˜¯ä¸€å¯¹å ‚å…„å¼ŸèŠ‚ç‚¹ã€‚\næˆ‘ä»¬ç»™å‡ºäº†å…·æœ‰å”¯ä¸€å€¼çš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œä»¥åŠæ ‘ä¸­ä¸¤ä¸ªä¸åŒèŠ‚ç‚¹çš„å€¼ x å’Œ y ã€‚\nåªæœ‰ä¸å€¼ x å’Œ y å¯¹åº”çš„èŠ‚ç‚¹æ˜¯å ‚å…„å¼ŸèŠ‚ç‚¹æ—¶ï¼Œæ‰è¿”å› true ã€‚å¦åˆ™ï¼Œè¿”å› falseã€‚\nWhat I learn:\nå½“ä½ æƒ³å¾—æ¸…æ¥šå½“å‰å±‚çš„å¤„ç†æ—¶ï¼Œå‘ç°è¦ä¸Šå±‚æ•°æ®ï¼Œæƒ³æƒ³èƒ½ä¸èƒ½ä¼ é€’ä¸Šå±‚æ•°æ®ä¸‹å»\nåµŒå¥—å‡½æ•° å¯¹ å¤–éƒ¨ä½œç”¨åŸŸå˜é‡çš„è®¿é—® çš„å…³é”®åŒºåˆ«ï¼šè¯»å–å’Œä¿®æ”¹ã€‚\nåªè¦å‡½æ•°å†…éƒ¨å­˜åœ¨å¯¹ä¸å¯å˜ç±»å‹å˜é‡ pre_dep çš„ ä¿®æ”¹ï¼ˆå¦‚ pre_dep = depï¼‰ï¼ŒPython é»˜è®¤å°†å…¶è§†ä¸º å±€éƒ¨å˜é‡ã€‚\nä»…è¯»å–ï¼Œåˆ™ä¼šè§†ä¸ºå¤–éƒ¨å˜é‡ï¼ˆè§ åå…« çš„ vï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # å½“ä½ æƒ³å¾—æ¸…æ¥šå½“å‰å±‚çš„å¤„ç†æ—¶ï¼Œå‘ç°è¦ä¸Šå±‚æ•°æ®ï¼Œæƒ³æƒ³èƒ½ä¸èƒ½ä¼ é€’ä¸Šå±‚æ•°æ®ä¸‹å» class Solution: def isCousins(self, root: Optional[TreeNode], x: int, y: int) -\u0026gt; bool: if root.val==x or root.val==y: return False pre_dep=0 pre_par=None def recur(root, dep, par): nonlocal pre_dep, pre_par if not root: return False # å¦‚æœæœ‰ä¸€ä¸ªå€¼å¯¹ä¸Šäº†ï¼Œè¯´æ˜é‡ä¸Šäº†ä¸€ä¸ªç»“ç‚¹ if root.val==x or root.val==y: # å¦‚æœpre_depä¸ä¸º0ï¼Œå‰è€…å·²æ‰¾åˆ°ï¼Œå¿…é¡»æ·±åº¦ä¸€æ ·ä¸”çˆ¶èŠ‚ç‚¹ä¸åŒ if pre_dep: return dep==pre_dep and par is not pre_par else: pre_dep=dep pre_par=par return recur(root.left, dep+1, root) or\\ recur(root.right, dep+1, root) return recur(root.left, 1, root) or \\ recur(root.right, 1, root) äºŒåã€å¯»æ‰¾å›¾ä¸­æ˜¯å¦å­˜åœ¨è·¯å¾„ 1971. å¯»æ‰¾å›¾ä¸­æ˜¯å¦å­˜åœ¨è·¯å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\næœ‰ä¸€ä¸ªå…·æœ‰ n ä¸ªé¡¶ç‚¹çš„ åŒå‘ å›¾ï¼Œå…¶ä¸­æ¯ä¸ªé¡¶ç‚¹æ ‡è®°ä» 0 åˆ° n - 1ï¼ˆåŒ…å« 0 å’Œ n - 1ï¼‰ã€‚å›¾ä¸­çš„è¾¹ç”¨ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ edges è¡¨ç¤ºï¼Œå…¶ä¸­ edges[i] = [ui, vi] è¡¨ç¤ºé¡¶ç‚¹ ui å’Œé¡¶ç‚¹ vi ä¹‹é—´çš„åŒå‘è¾¹ã€‚ æ¯ä¸ªé¡¶ç‚¹å¯¹ç”± æœ€å¤šä¸€æ¡ è¾¹è¿æ¥ï¼Œå¹¶ä¸”æ²¡æœ‰é¡¶ç‚¹å­˜åœ¨ä¸è‡ªèº«ç›¸è¿çš„è¾¹ã€‚\nè¯·ä½ ç¡®å®šæ˜¯å¦å­˜åœ¨ä»é¡¶ç‚¹ source å¼€å§‹ï¼Œåˆ°é¡¶ç‚¹ destination ç»“æŸçš„ æœ‰æ•ˆè·¯å¾„ ã€‚\nå­˜åœ¨ æœ‰æ•ˆè·¯å¾„ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false ã€‚\n1 2 è¾“å…¥ï¼šn = 3, edges = [[0,1],[1,2],[2,0]], source = 0, destination = 2 è¾“å‡ºï¼štrue What I learn:\ndefaultdict(list)å°†â€œè¾¹æ•°æ®â€è½¬ä¸ºâ€œç‚¹æ•°æ®â€ï¼Œå¤æ‚åº¦ç”± n^2 å˜ nï¼Œè¾¹=n(n-1)/2=n^2 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Solution: def validPath(self, n: int, edges: List[List[int]], source: int, destination: int) -\u0026gt; bool: def dfs(i): if i == destination: return True vis.add(i) for j in g[i]: if j not in vis and dfs(j): return True return False g = defaultdict(list) for a, b in edges: g[a].append(b) g[b].append(a) vis = set() return dfs(source) ä½œè€…ï¼šylb äºŒåä¸€ã€å¦ä¸€æ£µæ ‘çš„å­æ ‘ 572. å¦ä¸€æ£µæ ‘çš„å­æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ root å’Œ subRoot ã€‚æ£€éªŒ root ä¸­æ˜¯å¦åŒ…å«å’Œ subRoot å…·æœ‰ç›¸åŒç»“æ„å’ŒèŠ‚ç‚¹å€¼çš„å­æ ‘ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\näºŒå‰æ ‘ tree çš„ä¸€æ£µå­æ ‘åŒ…æ‹¬ tree çš„æŸä¸ªèŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ã€‚tree ä¹Ÿå¯ä»¥çœ‹åšå®ƒè‡ªèº«çš„ä¸€æ£µå­æ ‘ã€‚\nWhat I learn:\næ¢ç´¢å¿…è¦æ¡ä»¶ï¼šå¦‚æœæ˜¯å­æ ‘ï¼Œé‚£å°±æœ‰ç›¸åŒæ ‘ï¼Œåˆ™äºŒè€…æ·±åº¦å¿…ç„¶ç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯æ·±åº¦ç›¸ç­‰çš„ç»“ç‚¹æ‰éœ€åˆ¤æ–­æ˜¯ä¸æ˜¯ç›¸åŒæ ‘ã€‚ æ­¤å¿…è¦æ¡ä»¶èƒ½å¤§å¹…å‡å°å¤æ‚åº¦ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def isSubtree(self, root: Optional[TreeNode], subRoot: Optional[TreeNode]) -\u0026gt; bool: # æ£€æŸ¥æ˜¯å¦ä¸ºç›¸åŒæ ‘\tdef check(node1,node2): if node1 is None and node2 is None: return True elif node1 and node2: if node1.val==node2.val: return check(node1.left, node2.left) and check(node1.right, node2.right) return False # æ’é™¤æ ¹èŠ‚ç‚¹ä¸ºç©ºçš„æƒ…å†µ if not subRoot: return True elif not root: return False # è®¡ç®—å­æ ‘æ·±åº¦ def cal_sub(node): if not node: return 0 return max(cal_sub(node.left),cal_sub(node.right))+1 sub_dep=cal_sub(subRoot) # å­æ ‘æ ¹èŠ‚ç‚¹å€¼ sub_v=subRoot.val # éå†æ ‘ï¼Œæ·±åº¦ç›¸åŒ ä¸” å€¼ç›¸åŒ æ—¶æ£€æŸ¥ def dfs(node)-\u0026gt;(int, bool): if not node: return 0, False l_dep, l_issub = dfs(node.left) r_dep, r_issub = dfs(node.right) dep=max(l_dep,r_dep)+1 if l_issub or r_issub: return 0, True if dep==sub_dep and node.val==sub_v: if check(node,subRoot): return 0, True return dep, False return dfs(root)[1] äºŒåäºŒã€äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹ 671. äºŒå‰æ ‘ä¸­ç¬¬äºŒå°çš„èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªéç©ºç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ­£æ•°ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡åªèƒ½ä¸º 2 æˆ– 0ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å€¼ç­‰äºä¸¤ä¸ªå­èŠ‚ç‚¹ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚\næ›´æ­£å¼åœ°è¯´ï¼Œå³ root.val = min(root.left.val, root.right.val) æ€»æˆç«‹ã€‚\nç»™å‡ºè¿™æ ·çš„ä¸€ä¸ªäºŒå‰æ ‘ï¼Œä½ éœ€è¦è¾“å‡ºæ‰€æœ‰èŠ‚ç‚¹ä¸­çš„ ç¬¬äºŒå°çš„å€¼ ã€‚\nå¦‚æœç¬¬äºŒå°çš„å€¼ä¸å­˜åœ¨çš„è¯ï¼Œè¾“å‡º -1 ã€‚\n1 2 3 è¾“å…¥ï¼šroot = [2,2,5,null,null,5,7] è¾“å‡ºï¼š5 è§£é‡Šï¼šæœ€å°çš„å€¼æ˜¯ 2 ï¼Œç¬¬äºŒå°çš„å€¼æ˜¯ 5 ã€‚ What I learn\nå‡è®¾é€’å½’ç»ˆç‚¹æ­£ç¡®è¿”å›ï¼Œå¤„ç†ä¸­é—´è¿‡ç¨‹ï¼š\næˆ‘ä»¬çŸ¥é“root.valæ˜¯æœ€å°å€¼ï¼Œé‚£ä¹ˆ\nç¬¬äºŒå°çš„å€¼ä¸º è¾ƒå°çš„å­èŠ‚ç‚¹é‚£ä¸€è¾¹çš„å­æ ‘çš„ç¬¬äºŒå°çš„å€¼ æˆ– æ›´å¤§çš„å­èŠ‚ç‚¹ ä¹‹ä¸­\nå³min(get_sec_min(è¾ƒå°ç»“ç‚¹), è¾ƒå¤§ç»“ç‚¹.val)\nå› ä¸ºå½“å‰å±‚æ˜¯è€ƒè™‘äº†å­èŠ‚ç‚¹çš„ï¼Œæ‰€ä»¥æ˜¯â€œé¢„åˆ¤å¼é€’å½’â€\nå¤„ç†æœ«å°¾æƒ…å†µï¼Œä½¿â€œæ•°å­¦å½’çº³æ³•â€æˆç«‹ï¼š\nâ€œé¢„åˆ¤å¼é€’å½’â€è€ƒè™‘å€’æ•°ä¸¤å±‚ï¼Œ1. æœ€åº•ä¸€å±‚å› ä¸ºæœ‰ç©ºå¶å­è€Œéœ€è¦ç‰¹æ®Šå¤„ç†ã€‚2. å€’æ•°ç¬¬äºŒå±‚ï¼ˆä¸­é—´è¿‡ç¨‹ï¼‰è¦çœ‹çœ‹æœ€åº•ä¸€å±‚çš„è¿”å›æ˜¯å¦å…¼å®¹ï¼ˆå³min(get_sec_min(è¾ƒå°ç»“ç‚¹), è¾ƒå¤§ç»“ç‚¹.val)æ˜¯å¦åˆç†ï¼‰\nè¿™é‡Œå°±æ˜¯ï¼š\nâ€‹\tchildæœ‰è¿”å›-1æ—¶è¦å–maxï¼Œæˆ–è€…\næ–°å†™ä¸€ä¸ªå‡½æ•°ï¼Œå¶å­è¿”å›infï¼Œå¤–éƒ¨å†å¤„ç†è¿”å›infçš„æƒ…å†µã€‚\nâ€œé™åˆ¶æ€§é€’å½’â€å°±ä¸æ˜¯æ¯ä¸ªå­èŠ‚ç‚¹éƒ½è¿›å…¥ï¼Œéœ€è¦â€œé¢„åˆ¤å¤„ç†â€ï¼Œè§ [åä¸ƒã€Nå‰æ ‘çš„æœ€å¤§æ·±åº¦](#åä¸ƒN å‰æ ‘çš„æœ€å¤§æ·±åº¦)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: # ä¼šä»æ²¿ç€å€¼ä¸ºroot.valçš„è·¯çº¿å¾€ä¸‹èµ°ï¼Œæ€»å…±è€ƒè™‘ æ˜¯/å¦ä¸ºå¶å­ã€è¾ƒå¤§/è¾ƒå°å­æ ‘æ–¹å‘ # å¦‚æœå½“å‰æ˜¯å€¼ä¸ºroot.valçš„å¶å­è¿”å›-1ï¼Œå¦‚æœå½“å‰æ˜¯å€¼ä¸ºä¸ä¸ºroot.valçš„å¶å­çš„æƒ…å†µä¸å­˜åœ¨ def findSecondMinimumValue(self, root: TreeNode) -\u0026gt; int: # å¿…ç„¶ä¸å­˜åœ¨ç¬¬äºŒå°çš„å€¼ if not root or not root.left: return -1 # æˆ‘ä»¬çŸ¥é“root.valæ˜¯æœ€å°å€¼ï¼Œé‚£ä¹ˆ # ç¬¬äºŒå°çš„å€¼å­˜åœ¨äº æ›´å°çš„å­èŠ‚ç‚¹é‚£ä¸€è¾¹çš„å­æ ‘çš„ç¬¬äºŒå°çš„å€¼ æˆ– æ›´å¤§çš„å­èŠ‚ç‚¹ ä¹‹ä¸­ left = root.left.val if root.left.val != root.val \\ else self.findSecondMinimumValue(root.left) right = root.right.val if root.right.val != root.val \\ else self.findSecondMinimumValue(root.right) return min(left, right) if left != -1 and right != -1 else max(left, right) äºŒåä¸‰ã€äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ root ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰ ä¼—æ•°ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚\nå¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚\nå‡å®š BST æ»¡è¶³å¦‚ä¸‹å®šä¹‰ï¼š\nç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ å°äºç­‰äº å½“å‰èŠ‚ç‚¹çš„å€¼ ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«èŠ‚ç‚¹çš„å€¼ å¤§äºç­‰äº å½“å‰èŠ‚ç‚¹çš„å€¼ å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ What the hell did I learn:\näºŒå‰æœç´¢æ ‘ \u0026mdash; ä¸­åºéå†å¯å¾—ç”±å°åˆ°å¤§çš„åºåˆ—ï¼Œç›¸å½“äºå°†æ ‘æ‹å¹³åœ¨æ•°è½´ä¸Šï¼Œ\nå¦‚ 1, 2, 2, 4, 6, 6, 9ï¼Œé€’å½’æ¯å±‚ç›¸å½“äºæŒ‡é’ˆæŒ‡åˆ°æŸå¤„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right # å·¦-\u0026gt;å½“å‰-\u0026gt;å³ # v=[] v_n=0 n_max=0 pre=å‰ä¸€ç»“ç‚¹å€¼ï¼Œåˆå§‹infåˆ™éƒ½ä¸ç›¸ç­‰ class Solution: def findMode(self, root: Optional[TreeNode]) -\u0026gt; List[int]: pre=inf v=[] v_n=0 n_max=0 def dfs(node): if not node: return dfs(node.left) nonlocal v_n, pre, n_max # ä¸å‰ä¸€å€¼çš„å…³ç³»ï¼Œç­‰åˆ™ç´¯åŠ ï¼Œä¸ç­‰åˆ™ç½®1 if node.val!=pre: pre=node.val v_n = 1 else: v_n += 1 # ä¸ªæ•°æƒ…å†µï¼Œå°äºæœ€å¤§å€¼ä¸å¤„ç† if v_n\u0026lt;n_max: None elif v_n==n_max: v.append(node.val) else: n_max=v_n v.clear() v.append(node.val) dfs(node.right) dfs(root) return v äºŒåå››ã€è¡¨æ ¼é‡Œå•è¯æœç´¢ 79. å•è¯æœç´¢ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ª m x n äºŒç»´å­—ç¬¦ç½‘æ ¼ board å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ word ã€‚å¦‚æœ word å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\nå•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚\n1 2 è¾“å…¥ï¼šboard = [[\u0026#34;A\u0026#34;,\u0026#34;B\u0026#34;,\u0026#34;C\u0026#34;,\u0026#34;E\u0026#34;],[\u0026#34;S\u0026#34;,\u0026#34;F\u0026#34;,\u0026#34;C\u0026#34;,\u0026#34;S\u0026#34;],[\u0026#34;A\u0026#34;,\u0026#34;D\u0026#34;,\u0026#34;E\u0026#34;,\u0026#34;E\u0026#34;]], word = \u0026#34;ABCCED\u0026#34; è¾“å‡ºï¼štrue What I learn:\nå˜é‡ä½œç”¨åŸŸå’Œå‡½æ•°ä¼ å‚æ€»ç»“ï¼š\nå‡½æ•°ä¼ å‚ä¼  æŒ‡é’ˆ/åˆ«åï¼Œä¸€å®šæ˜¯ã€‚ å¯¹äºå¤–éƒ¨ä¸å¯ä¿®æ”¹å˜é‡ï¼š è‹¥ä¼ å‚äº† å‡½æ•°å†…è‹¥ä¿®æ”¹å˜é‡ï¼Œå¤åˆ¶ç”Ÿæˆå±€éƒ¨å˜é‡ï¼Œä¸å½±å“å¤–éƒ¨å˜é‡ï¼Œè¯»å–è¯»å±€éƒ¨å˜é‡ã€‚ å‡½æ•°å†…è‹¥åªè¯»å–å˜é‡ï¼Œä¸ç”Ÿæˆå±€éƒ¨å˜é‡ï¼ŒæŒ‡é’ˆæ–¹å¼è¯»ã€‚ è‹¥æ²¡ä¼ å‚ å‡½æ•°å†…è‹¥ä¿®æ”¹å˜é‡ï¼ŒæŠ¥é”™ä¸å­˜åœ¨è¯¥å±€éƒ¨å˜é‡ã€‚ å‡½æ•°å†…è‹¥åªè¯»å–å˜é‡ï¼Œè‡ªåŠ¨æŒ‡é’ˆæ–¹å¼è¯»å¤–éƒ¨å˜é‡ã€‚ å¯¹äºå¤–éƒ¨å¯ä¿®æ”¹å˜é‡ï¼š æ— è®ºä¼ æ²¡ä¼ å‚ï¼Œä¿®ä¸ä¿®æ”¹ï¼Œä¸€å¾‹åˆ«åæ–¹å¼è¯»å–æˆ–ä¿®æ”¹å¤–éƒ¨å˜é‡ã€‚ æ ‘å‹æ ‡è¡¨ç¤º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 graph TD A[å¤–éƒ¨å˜é‡] --\u0026gt; B[ä¸å¯ä¿®æ”¹å˜é‡] A --\u0026gt; C[å¯ä¿®æ”¹å˜é‡] B --\u0026gt; D[ä¼ å‚] B --\u0026gt; E[ä¸ä¼ å‚] D --\u0026gt; F[ï¼ˆå‡½æ•°å†…ï¼‰ä¿®æ”¹å˜é‡] D --\u0026gt; G[åªè¯»å˜é‡] F --\u0026gt; F1[å¤åˆ¶ç”Ÿæˆå±€éƒ¨å˜é‡] G --\u0026gt; G1[æŒ‡é’ˆæ–¹å¼è¯»å¤–éƒ¨å˜é‡] E --\u0026gt; H[å‡½æ•°å†…ä¿®æ”¹å˜é‡] E --\u0026gt; I[å‡½æ•°å†…åªè¯»å˜é‡] H --\u0026gt; H1[æŠ¥é”™ï¼šä¸å­˜åœ¨è¯¥å±€éƒ¨å˜é‡] I --\u0026gt; I1[æŒ‡é’ˆæ–¹å¼è¯»å¤–éƒ¨å˜é‡] C --\u0026gt; J[æ— è®ºä¼ å‚ä¸å¦] J --\u0026gt; K[æ— è®ºä¿®æ”¹ä¸å¦] K --\u0026gt; L[åˆ«åæ–¹å¼è¯»å–æˆ–ä¿®æ”¹å¤–éƒ¨å˜é‡] ä¸å¯æ”¹-ä¼ å‚-ä¿®æ”¹-å¤åˆ¶ç”Ÿæˆå±€éƒ¨å˜é‡ ä¸å¯æ”¹-ä¼ å‚-åªè¯»-æŒ‡é’ˆæ–¹å¼è¯» ä¸å¯æ”¹-ä¸ä¼ å‚-ä¿®æ”¹-æŠ¥é”™ ä¸å¯æ”¹-ä¸ä¼ å‚-åªè¯»-æŒ‡é’ˆæ–¹å¼è¯» å¯æ”¹ - ä¼ å‚/ä¸ä¼ å‚ - ä¿®æ”¹/ä¸ä¿®æ”¹ - åˆ«åæ–¹å¼ éå†å„æ–¹å‘ å¹¶ è¿›å…¥å„æ–¹å‘çš„é€’å½’å‡½æ•°ï¼š\n1 2 3 4 # ç›¸é‚»æ ¼å­ for x, y in (i, j - 1), (i, j + 1), (i - 1, j), (i + 1, j): if 0 \u0026lt;= x \u0026lt; m and 0 \u0026lt;= y \u0026lt; n and dfs(x, y, k + 1): return True æ³¨æ„è¿™é¢˜é‡Œ ç”±äºè®¿é—®å¯ä¿®æ”¹å˜é‡ï¼Œä¸€å®šæ˜¯åˆ«åè®¿é—®ï¼Œéœ€è¦â€œæ¢å¤ç°åœºâ€ï¼Œå³å›æº¯\nany æ˜¯å¦å­˜åœ¨True all æ˜¯å¦éƒ½ä¸ºTrue\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 class Solution: def exist(self, board: List[List[str]], word: str) -\u0026gt; bool: m, n = len(board), len(board[0]) def dfs(i: int, j: int, k: int) -\u0026gt; bool: if board[i][j] != word[k]: # åŒ¹é…å¤±è´¥ return False if k == len(word) - 1: # åŒ¹é…æˆåŠŸï¼ return True board[i][j] = \u0026#39;\u0026#39; # æ ‡è®°è®¿é—®è¿‡ for x, y in (i, j - 1), (i, j + 1), (i - 1, j), (i + 1, j): # ç›¸é‚»æ ¼å­ if 0 \u0026lt;= x \u0026lt; m and 0 \u0026lt;= y \u0026lt; n and dfs(x, y, k + 1): return True # æœåˆ°äº†ï¼ board[i][j] = word[k] # æ¢å¤ç°åœº return False # æ²¡æœåˆ° return any(dfs(i, j, 0) for i in range(m) for j in range(n)) ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœ äºŒåäº”ã€äºŒå‰æ ‘åŒ–å•é“¾è¡¨ é¢è¯•é¢˜ 17.12. BiNode - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\näºŒå‰æ ‘æ•°æ®ç»“æ„TreeNodeå¯ç”¨æ¥è¡¨ç¤ºå•å‘é“¾è¡¨ï¼ˆå…¶ä¸­leftç½®ç©ºï¼Œrightä¸ºä¸‹ä¸€ä¸ªé“¾è¡¨èŠ‚ç‚¹ï¼‰ã€‚å®ç°ä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºå•å‘é“¾è¡¨ï¼Œè¦æ±‚ä¾ç„¶ç¬¦åˆäºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œè½¬æ¢æ“ä½œåº”æ˜¯åŸå€çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨åŸå§‹çš„äºŒå‰æœç´¢æ ‘ä¸Šç›´æ¥ä¿®æ”¹ã€‚\nè¿”å›è½¬æ¢åçš„å•å‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚\nWhat I learn:\nåˆ›å»ºå•é“¾è¡¨æ€æƒ³ï¼šè®¾ç½®å¤´ç»“ç‚¹ï¼Œpreåˆå§‹=å¤´ç»“ç‚¹ï¼Œåˆ›å»ºå½“å‰ç»“ç‚¹ï¼Œpreå†…æŒ‡é’ˆ æŒ‡å‘ å½“å‰ç»“ç‚¹ï¼Œpre=å½“å‰ç»“ç‚¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def convertBiNode(self, root: Optional[TreeNode]) -\u0026gt; Optional[TreeNode]: ini_node=TreeNode() pre=ini_node def dfs(node): if not node: return dfs(node.left) nonlocal pre pre.right=node node.left=None pre=node dfs(node.right) dfs(root) return ini_node.right äºŒåå…­ã€æ‰¾åˆ°æ‰€æœ‰çš„å†œåœºç»„ 1992. æ‰¾åˆ°æ‰€æœ‰çš„å†œåœºç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œå¤§å°ä¸º m x n çš„äºŒè¿›åˆ¶çŸ©é˜µ land ï¼Œå…¶ä¸­ 0 è¡¨ç¤ºä¸€å•ä½çš„æ£®æ—åœŸåœ°ï¼Œ1 è¡¨ç¤ºä¸€å•ä½çš„å†œåœºåœŸåœ°ã€‚\nä¸ºäº†è®©å†œåœºä¿æŒæœ‰åºï¼Œå†œåœºåœŸåœ°ä¹‹é—´ä»¥çŸ©å½¢çš„ å†œåœºç»„ çš„å½¢å¼å­˜åœ¨ã€‚æ¯ä¸€ä¸ªå†œåœºç»„éƒ½ ä»… åŒ…å«å†œåœºåœŸåœ°ã€‚ä¸”é¢˜ç›®ä¿è¯ä¸ä¼šæœ‰ä¸¤ä¸ªå†œåœºç»„ç›¸é‚»ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå†œåœºç»„ä¸­çš„ä»»ä½•ä¸€å—åœŸåœ°éƒ½ ä¸ä¼š ä¸å¦ä¸€ä¸ªå†œåœºç»„çš„ä»»ä½•ä¸€å—åœŸåœ°åœ¨å››ä¸ªæ–¹å‘ä¸Šç›¸é‚»ã€‚\nland å¯ä»¥ç”¨åæ ‡ç³»ç»Ÿè¡¨ç¤ºï¼Œå…¶ä¸­ land å·¦ä¸Šè§’åæ ‡ä¸º (0, 0) ï¼Œå³ä¸‹è§’åæ ‡ä¸º (m-1, n-1) ã€‚è¯·ä½ æ‰¾åˆ°æ‰€æœ‰ å†œåœºç»„ æœ€å·¦ä¸Šè§’å’Œæœ€å³ä¸‹è§’çš„åæ ‡ã€‚ä¸€ä¸ªå·¦ä¸Šè§’åæ ‡ä¸º (r1, c1) ä¸”å³ä¸‹è§’åæ ‡ä¸º (r2, c2) çš„ å†œåœºç»„ ç”¨é•¿åº¦ä¸º 4 çš„æ•°ç»„ [r1, c1, r2, c2] è¡¨ç¤ºã€‚\nè¯·ä½ è¿”å›ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå®ƒåŒ…å«è‹¥å¹²ä¸ªé•¿åº¦ä¸º 4 çš„å­æ•°ç»„ï¼Œæ¯ä¸ªå­æ•°ç»„è¡¨ç¤º land ä¸­çš„ä¸€ä¸ª å†œåœºç»„ ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•å†œåœºç»„ï¼Œè¯·ä½ è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚å¯ä»¥ä»¥ ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰å†œåœºç»„ã€‚\n1 2 è¾“å…¥ï¼šland = [[1,0,0],[0,1,1],[0,1,1]] è¾“å‡ºï¼š[[0,0,0,0],[1,1,2,2]] what I learn:\nè¯•æ¢æ€§ è¡Œä¸º\u0026quot;x1+1\u0026quot; \u0026ldquo;y1+1\u0026rdquo;,ä¸æ»¡è¶³åˆ™x1 y1æŠµè¾¾è¾¹ç•Œ å¤šå˜é‡æ—¶ï¼Œåˆ†æ¸…æ¥šâ€œåŸŸå†…å˜é‡â€æ˜¯ä»€ä¹ˆï¼Ÿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 class Solution: def findFarmland(self, land: List[List[int]]) -\u0026gt; List[List[int]]: result=[] m=len(land) n=len(land[0]) # æ£€æµ‹ä»æ­¤å‡ºå‘çš„çŸ©å½¢æœ‰å¤šå¤§ def check(x0,y0,x1,y1): # è¯•æ¢æ€§ è¡Œä¸º\u0026#34;x1+1\u0026#34; \u0026#34;y1+1\u0026#34;,ä¸æ»¡è¶³åˆ™x1 y1æŠµè¾¾è¾¹ç•Œ while(x1+1\u0026lt;m and land[x1+1][y1]): x1+=1 while(y1+1\u0026lt;n and land[x1][y1+1]): y1+=1 for i in range(x0,x1+1): for j in range(y0,y1+1): land[i][j]=0 return (x0,y0,x1,y1) # éå†æ‰€æœ‰ç‚¹ for i in range(m): for j in range(n): if land[i][j]==1: result.append(check(i,j,i,j)) return result äºŒåä¸ƒã€è·¯å¾„æ€»å’Œ II 113. è·¯å¾„æ€»å’Œ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSum ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚\nå¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def pathSum(self, root: Optional[TreeNode], targetSum: int) -\u0026gt; List[List[int]]: result=[] def dfs(node,Sum,targetSum,route): if not node: return route.append(node.val) Sum+=node.val if Sum==targetSum and node.left is None and node.right is None: result.append(deepcopy(route)) dfs(node.left,Sum,targetSum,route) dfs(node.right,Sum,targetSum,route) route.pop(-1) dfs(root,0,targetSum,[]) return result what I learn:\npythoné‡Œçš„ å¯ä¿®æ”¹å˜é‡ å’Œ ä¸å¯ä¿®æ”¹å˜é‡ çš„èµ‹å€¼ï¼Œå¯ä¿®æ”¹-åˆ›å»ºæ–°å˜é‡ï¼Œä¸å¯ä¿®æ”¹-åˆ«å 1 2 3 4 5 6 7 8 9 ls=[1,2,3] cp=ls cp.append(4) print(ls) # [1,2,3,4] a=1 cp=a cp=2 print(a) # 1 copy.deepcopyå®ç° ä¸å¯ä¿®æ”¹å˜é‡çš„ â€œåˆ›å»ºå˜é‡èµ‹å€¼â€ 1 2 3 4 5 ls=[1,2,3] import copy cp=copy.deepcopy(ls) cp.append(4) print(ls) # [1,2,3,4] äºŒåå…«ã€äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨ 114. äºŒå‰æ ‘å±•å¼€ä¸ºé“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ root ï¼Œè¯·ä½ å°†å®ƒå±•å¼€ä¸ºä¸€ä¸ªå•é“¾è¡¨ï¼š\nå±•å¼€åçš„å•é“¾è¡¨åº”è¯¥åŒæ ·ä½¿ç”¨ TreeNode ï¼Œå…¶ä¸­ right å­æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œè€Œå·¦å­æŒ‡é’ˆå§‹ç»ˆä¸º null ã€‚ å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥ä¸äºŒå‰æ ‘ å…ˆåºéå† é¡ºåºç›¸åŒã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 # Definition for a binary tree node. # class TreeNode: # def __init__(self, val=0, left=None, right=None): # self.val = val # self.left = left # self.right = right class Solution: def flatten(self, root: Optional[TreeNode]) -\u0026gt; None: # å°¾æ’æ³• # ini_node=TreeNode() # pre=ini_node # def dfs(node): # if not node: # return # nonlocal pre # pre.right=node # lc, rc=node.left, node.right # node.left=None # pre=node # dfs(lc) # dfs(rc) # dfs(root) # å¤´æ’æ³• ini_node=TreeNode() def dfs(node): if not node: return dfs(node.right) dfs(node.left) nonlocal ini_node node.right=ini_node.right ini_node.right=node node.left=None dfs(root) what I learn:\näºŒå‰æ ‘å…ˆåºã€ä¸­åºã€åç»­éå†è½¬äºŒå‰æ ‘æ€»ç»“ï¼šä¸­åº-å°¾æ’æ³•-LCRå¤„ç†ï¼Œååº-å°¾æ’æ³•-LRCå¤„ç†ï¼Œå…ˆåº-å¤´æ’æ³•-RLCå¤„ç†\nåŸç†ï¼šç¡®ä¿ preçš„å³å­æ ‘çš„å¤„ç† ä¸ä¼šå½±å“åç»­ç»“ç‚¹çš„è®¿é—®ï¼Œç¡®ä¿ curçš„å·¦å­æ ‘çš„å¤„ç† ä¸ä¼šå½±å“åç»­ç»“ç‚¹çš„è®¿é—®ã€‚\nL(è¿›å…¥left-child) C(å¤„ç†current) R(è¿›å…¥right-child)\nä¸­åº-å°¾æ’æ³•-LCRï¼Œå³æœç´¢äºŒå‰æ ‘éå†ã€‚ 1 2 3 4 5 dfs(node.left) pre.right=node node.left=None pre=node dfs(node.right) ååº-å°¾æ’æ³•-LRC 1 2 3 4 5 dfs(node.left) dfs(node.right) pre.right=node node.left=None pre=node å…ˆåº-å¤´æ’æ³•-RLC å¤´æ’æ³•å®ç°å°†CLRè½¬æ¢ä¸ºRLCï¼Œç±»ååºï¼Œå½“å‰å±‚å¤„ç†ä¸ä¼šå½±å“åç»­ å‘çˆ¶èŠ‚ç‚¹çš„ è®¿é—®ã€‚ 1 2 3 4 5 dfs(node.right) dfs(node.left) node.right=head.right head.right=node node.left=None ","date":"2025-04-26T00:00:00Z","permalink":"https://rooobeam.github.io/p/tree_search/","title":"Tree_search"},{"content":" å›¾ç‰‡é“¾æ¥ç”Ÿæˆå›¾ç‰‡å¹¶æ§åˆ¶å¤§å° 1 \u0026lt;img src=\u0026#34;https://assets.leetcode.com/uploads/2021/07/27/screenshot-2021-07-27-at-12-23-15-copy-of-diagram-drawio-diagrams-net.png?\u0026#34; style=\u0026#34;zoom:50%;\u0026#34; /\u0026gt; ","date":"2025-04-21T16:46:11+08:00","permalink":"https://rooobeam.github.io/p/typora_tricks/","title":"Typora_tricks"},{"content":"æ“ä½œç³»ç»Ÿ 1.1_1 æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µã€åŠŸèƒ½å’Œç›®æ ‡ ä½œä¸ºç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£\næä¾›çš„åŠŸèƒ½ å‘½ä»¤æ¥å£ è”æœºå‘½ä»¤æ¥å£ è„±æœºå‘½ä»¤æ¥å£ ç¨‹åºæ¥å£ GUIï¼ˆå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰ Windows iOS Android ç›®æ ‡ æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ 1.1_2 æ“ä½œç³»ç»Ÿçš„ç‰¹å¾ ç‰¹å¾ å®šä¹‰ å¹¶å‘ å¤šä¸ªäº‹ä»¶äº¤æ›¿å‘ç”Ÿï¼ˆå®è§‚åŒæ—¶å‘ç”Ÿã€å¾®è§‚äº¤æ›¿è¿›è¡Œï¼‰ å¹¶è¡Œ å¤šä¸ªäº‹ä»¶åŒæ—¶å‘ç”Ÿ å…±äº« ä¸¤ç§èµ„æºå…±äº«æ–¹å¼ï¼š\n1. äº’æ–¥å…±äº«æ–¹å¼ï¼ˆå¦‚æ‰“å°æœºï¼‰\n2. åŒæ—¶å…±äº«æ–¹å¼ï¼ˆå¦‚æ–‡ä»¶ï¼‰ è™šæ‹Ÿ ç‰©ç†å®ä½“æ˜ å°„ä¸ºå¤šä¸ªé€»è¾‘å®ä½“ï¼š\n- ç©ºåˆ†å¤ç”¨æŠ€æœ¯ï¼ˆå¦‚è™šæ‹Ÿå†…å­˜ï¼‰\n- æ—¶åˆ†å¤ç”¨æŠ€æœ¯ï¼ˆå¦‚CPUåˆ†æ—¶ï¼‰ å¼‚æ­¥ è¿›ç¨‹æ‰§è¡Œèµ°èµ°åœåœï¼Œé€Ÿåº¦ä¸å¯é¢„çŸ¥ï¼ˆéœ€å¹¶å‘æ€§æ”¯æŒï¼‰ 1.1_3 æ“ä½œç³»ç»Ÿçš„å‘å±•ä¸åˆ†ç±» å‘å±•é˜¶æ®µ æ‰‹å·¥æ“ä½œé˜¶æ®µ çº¸å¸¦æœºï¼ˆç”¨æˆ·ç‹¬å å…¨æœºã€äººæœºé€Ÿåº¦çŸ›ç›¾ï¼‰ æ‰¹å¤„ç†é˜¶æ®µ å•é“æ‰¹å¤„ç†ç³»ç»Ÿï¼ˆå¤–å›´æœºâ†’ç£å¸¦ï¼‰ å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿï¼ˆæ“ä½œç³»ç»Ÿå‡ºç°ï¼‰ åˆ†æ—¶æ“ä½œç³»ç»Ÿ è½®æµå¤„ç†ä½œä¸š æ— æ³•å¤„ç†ç´§æ€¥ä»»åŠ¡ å®æ—¶æ“ä½œç³»ç»Ÿ ç¡¬å®æ—¶ç³»ç»Ÿï¼ˆä¸¥æ ¼æ—¶é—´é™åˆ¶ï¼‰ è½¯å®æ—¶ç³»ç»Ÿï¼ˆå…è®¸å¶å°”çŠ¯é”™ï¼‰ å…¶ä»–ç±»å‹ ç½‘ç»œæ“ä½œç³»ç»Ÿ åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ ä¸ªäººè®¡ç®—æœºæ“ä½œç³»ç»Ÿ 1.1_4 æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ä¸ä½“ç³»ç»“æ„ è¿è¡Œæœºåˆ¶ ä¸¤ç§æŒ‡ä»¤ ç‰¹æƒæŒ‡ä»¤ï¼ˆä»…å†…æ ¸æ€å¯ç”¨ï¼‰ éç‰¹æƒæŒ‡ä»¤ ä¸¤ç§å¤„ç†å™¨çŠ¶æ€ æ ¸å¿ƒæ€ï¼ˆrootæƒé™ï¼‰ ç”¨æˆ·æ€ ä¸¤ç§ç¨‹åº å†…æ ¸ç¨‹åºï¼ˆè¿è¡Œåœ¨æ ¸å¿ƒæ€ï¼‰ åº”ç”¨ç¨‹åº æ“ä½œç³»ç»Ÿå†…æ ¸åŠŸèƒ½ æ—¶é’Ÿç®¡ç† ä¸­æ–­å¤„ç† åŸè¯­ï¼ˆåŸå­æ€§æ“ä½œï¼‰ èµ„æºç®¡ç† è¿›ç¨‹ç®¡ç† å­˜å‚¨å™¨ç®¡ç† è®¾å¤‡ç®¡ç† ä½“ç³»ç»“æ„ ç±»å‹ ç‰¹ç‚¹ å¤§å†…æ ¸ ä¸»è¦åŠŸèƒ½æ¨¡å—è¿è¡Œåœ¨æ ¸å¿ƒæ€ï¼ˆå¦‚Linuxï¼‰ å¾®å†…æ ¸ ä»…ä¿ç•™æœ€åŸºæœ¬åŠŸèƒ½ï¼ˆå¦‚Windows NTï¼‰ 1.1_5 ä¸­æ–­å’Œå¼‚å¸¸ ä¸­æ–­æœºåˆ¶çš„ä½œç”¨ï¼šç”¨æˆ·æ€â†’æ ¸å¿ƒæ€çš„å”¯ä¸€é€”å¾„ ä¸­æ–­åˆ†ç±»ï¼š 1 2 3 4 5 6 graph LR A[ä¸­æ–­] --\u0026gt; B[å†…ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰] A --\u0026gt; C[å¤–ä¸­æ–­] B --\u0026gt; D[é™·é˜±ï¼ˆtrapï¼‰] B --\u0026gt; E[æ•…éšœï¼ˆfaultï¼‰] B --\u0026gt; F[ä¸­æ­¢ï¼ˆabortï¼‰] 1.1_6 ç³»ç»Ÿè°ƒç”¨ æ¦‚å¿µï¼šåº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¯·æ±‚OSæœåŠ¡ ä¸åº“å‡½æ•°çš„åŒºåˆ«ï¼š ç³»ç»Ÿè°ƒç”¨ åº“å‡½æ•° OSç›´æ¥æä¾›çš„æ¥å£ å¯èƒ½å°è£…ç³»ç»Ÿè°ƒç”¨ éœ€åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ è¿è¡Œåœ¨ç”¨æˆ·æ€ 2.1_1 è¿›ç¨‹çš„å®šä¹‰ã€ç»„æˆã€ç»„ç»‡æ–¹å¼ã€ç‰¹å¾ å®šä¹‰ è¿›ç¨‹ï¼šç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ ç»„æˆ PCBï¼ˆè¿›ç¨‹å­˜åœ¨å”¯ä¸€æ ‡å¿—ï¼‰ ç¨‹åºæ®µ æ•°æ®æ®µ ç»„ç»‡æ–¹å¼ é“¾æ¥æ–¹å¼ï¼ˆé˜Ÿåˆ—æŒ‡é’ˆï¼‰ ç´¢å¼•æ–¹å¼ï¼ˆç´¢å¼•è¡¨ï¼‰ ç‰¹å¾ åŠ¨æ€æ€§ã€å¹¶å‘æ€§ã€ç‹¬ç«‹æ€§ã€å¼‚æ­¥æ€§ã€ç»“æ„æ€§ 2.1_2 è¿›ç¨‹çš„çŠ¶æ€ä¸è½¬æ¢ è¿›ç¨‹çŠ¶æ€ çŠ¶æ€ æè¿° èµ„æºå ç”¨æƒ…å†µ è¿è¡Œæ€ å æœ‰CPUå¹¶æ‰§è¡ŒæŒ‡ä»¤ï¼ˆå•æ ¸CPUåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºè¿è¡Œæ€ï¼‰ CPUâˆšï¼Œå…¶ä»–èµ„æºâˆš å°±ç»ªæ€ å…·å¤‡è¿è¡Œæ¡ä»¶ï¼Œä½†æ— ç©ºé—²CPUï¼ˆç­‰å¾…è°ƒåº¦ï¼‰ CPUÃ—ï¼Œå…¶ä»–èµ„æºâˆš é˜»å¡æ€ ç­‰å¾…æŸäº‹ä»¶ï¼ˆå¦‚I/Oå®Œæˆï¼‰ CPUÃ—ï¼Œå…¶ä»–èµ„æºÃ— åˆ›å»ºæ€ æ­£åœ¨åˆ†é…PCBã€ç¨‹åºæ®µå’Œæ•°æ®æ®µ - ç»ˆæ­¢æ€ èµ„æºå›æ”¶ä¸­ - çŠ¶æ€è½¬æ¢ 1 2 3 4 5 6 7 8 stateDiagram-v2 [*] --\u0026gt; åˆ›å»ºæ€ åˆ›å»ºæ€ --\u0026gt; å°±ç»ªæ€ å°±ç»ªæ€ --\u0026gt; è¿è¡Œæ€ è¿è¡Œæ€ --\u0026gt; å°±ç»ªæ€: æ—¶é—´ç‰‡ç”¨å®Œ è¿è¡Œæ€ --\u0026gt; é˜»å¡æ€: ä¸»åŠ¨ç­‰å¾…èµ„æº é˜»å¡æ€ --\u0026gt; å°±ç»ªæ€: äº‹ä»¶å‘ç”Ÿ è¿è¡Œæ€ --\u0026gt; ç»ˆæ­¢æ€: å¼‚å¸¸ç»ˆæ­¢/å®Œæˆ 2.1_3 è¿›ç¨‹æ§åˆ¶ è¿›ç¨‹æ§åˆ¶ ç”¨åŸè¯­å®ç°è¿›ç¨‹æ§åˆ¶\nåŸè¯­æ“ä½œ æ›´æ–°PCBä¿¡æ¯ å°†PCBæ’å…¥ç›®æ ‡é˜Ÿåˆ— èµ„æºåˆ†é…/å›æ”¶ å…³é”®åŸè¯­ åŸè¯­ç±»å‹ è§¦å‘äº‹ä»¶ æ“ä½œ åˆ›å»ºåŸè¯­ ç”¨æˆ·ç™»å½•ã€ä½œä¸šè°ƒåº¦ã€æœåŠ¡è¯·æ±‚ ç”³è¯·ç©ºç™½PCB â†’ åˆ†é…èµ„æº â†’ åˆå§‹åŒ–PCB â†’ åŠ å…¥å°±ç»ªé˜Ÿåˆ— ç»ˆæ­¢åŸè¯­ æ­£å¸¸ç»“æŸã€å¼‚å¸¸ç»ˆæ­¢ã€å¤–ç•Œå¹²é¢„ å›æ”¶å†…å­˜ â†’ æ’¤é”€PCB é˜»å¡åŸè¯­ ç­‰å¾…èµ„æº/å…¶ä»–è¿›ç¨‹ è¿è¡Œæ€ â†’ é˜»å¡æ€ï¼ˆä¸»åŠ¨ï¼‰ å”¤é†’åŸè¯­ ç­‰å¾…äº‹ä»¶å‘ç”Ÿ é˜»å¡æ€ â†’ å°±ç»ªæ€ï¼ˆè¢«åŠ¨ï¼‰ åˆ‡æ¢åŸè¯­ æ—¶é—´ç‰‡è€—å°½ã€é«˜ä¼˜å…ˆçº§è¿›ç¨‹åˆ°è¾¾ ä¿å­˜å½“å‰è¿›ç¨‹ä¸Šä¸‹æ–‡ â†’ æ¢å¤ç›®æ ‡è¿›ç¨‹ä¸Šä¸‹æ–‡ 2.1_4 è¿›ç¨‹é€šä¿¡ é€šä¿¡æ–¹å¼å¯¹æ¯” æ–¹å¼ å®ç°åŸç† ç‰¹ç‚¹ å…±äº«å­˜å‚¨ åˆ†é…å…±äº«ç©ºé—´ï¼Œé€šè¿‡PVæ“ä½œäº’æ–¥è®¿é—® - åŸºäºæ•°æ®ç»“æ„ï¼ˆä½çº§ï¼‰\n- åŸºäºå­˜å‚¨åŒºï¼ˆé«˜çº§ï¼‰ æ¶ˆæ¯ä¼ é€’ ç›´æ¥/é—´æ¥å‘é€æ¶ˆæ¯ï¼ˆå«æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼‰ - ç›´æ¥é€šä¿¡ï¼šæ¶ˆæ¯æŒ‚è½½åˆ°ç›®æ ‡è¿›ç¨‹\n- é—´æ¥é€šä¿¡ï¼šé€šè¿‡ä¿¡ç®±ä¸­è½¬ ç®¡é“é€šä¿¡ åŠåŒå·¥é€šä¿¡ï¼Œéµå¾ªâ€œå†™æ»¡æ‰èƒ½è¯»â€çš„äº’æ–¥è§„åˆ™ é€‚ç”¨äºçˆ¶å­è¿›ç¨‹é€šä¿¡ï¼Œå®¹é‡å›ºå®š 2.1_5 çº¿ç¨‹æ¦‚å¿µä¸å¤šçº¿ç¨‹æ¨¡å‹ çº¿ç¨‹ vs è¿›ç¨‹ ç‰¹æ€§ çº¿ç¨‹ è¿›ç¨‹ å•ä½ åŸºæœ¬CPUæ‰§è¡Œï¼ˆè°ƒåº¦ï¼‰å•ä½ èµ„æºåˆ†é…å•ä½ï¼ˆä¸ç®¡ç³»ç»Ÿä¸­æ˜¯å¦æœ‰çº¿ç¨‹ï¼‰ ç³»ç»Ÿå¼€é”€ åˆ‡æ¢ä»£ä»·å°ï¼ˆåŒè¿›ç¨‹å†…çº¿ç¨‹å…±äº«è¿›ç¨‹èµ„æºï¼‰ åˆ‡æ¢ä»£ä»·å¤§ï¼ˆéœ€ä¿å­˜æ•´ä¸ªä¸Šä¸‹æ–‡ï¼‰ å¹¶å‘æ€§ åŒä¸€è¿›ç¨‹çš„çº¿ç¨‹å¯å¹¶å‘ è¿›ç¨‹é—´å¹¶å‘ é€šä¿¡æ–¹å¼ åŒè¿›ç¨‹å†… çº¿ç¨‹ ä¸é€šè¿‡å†…æ ¸ è¿›ç¨‹é—´é€šä¿¡ éœ€é€šè¿‡å†…æ ¸ çŠ¶æ€ åªæœ‰ä¸‰ç§çŠ¶æ€è½¬åŒ–ï¼šè¿è¡Œã€å°±ç»ªã€é˜»å¡ äº”ç§ï¼šè¿è¡Œã€é˜»å¡ã€å°±ç»ªã€åˆ›å»ºã€ç»ˆæ­¢ ç‹¬ç«‹è¿è¡Œ ä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œä¾èµ–è¿›ç¨‹ ç‹¬ç«‹ âœ… ä¸€ä¸ªè¿›ç¨‹å¯åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ è¿›ç¨‹æ˜¯èµ„æºåˆ†é…å•ä½ï¼Œå¯åŒ…å«å¤šä¸ªæ‰§è¡Œæµï¼ˆçº¿ç¨‹ï¼‰ âœ… ä¸€ä¸ªçº¿ç¨‹å¯åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ çº¿ç¨‹å¯æ´¾ç”ŸåŒçº§çº¿ç¨‹ï¼ˆå¦‚pthread_createï¼‰ âŒ ä¸€ä¸ªçº¿ç¨‹å¯åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ çº¿ç¨‹å…±äº«è¿›ç¨‹èµ„æºï¼Œæ— æƒç›´æ¥åˆ›å»ºè¿›ç¨‹ï¼ˆéœ€é€šè¿‡è¿›ç¨‹çº§APIå¦‚forkï¼‰ âœ… ä¸€ä¸ªè¿›ç¨‹å¯åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ é€šè¿‡fork/spawnç­‰ç³»ç»Ÿè°ƒç”¨å®ç° çº¿ç¨‹å®ç°æ–¹å¼ å¯¹æ¯”ç»´åº¦ ç”¨æˆ·çº¿ç¨‹ (User-Level Thread) å†…æ ¸çº¿ç¨‹ (Kernel-Level Thread) ç»„åˆæ–¹å¼ (Hybrid Model) å®ç°ä½ç½® ç”¨æˆ·ç©ºé—´ å†…æ ¸ç©ºé—´ ç”¨æˆ·ç©ºé—´ + å†…æ ¸ç©ºé—´ OSæ„ŸçŸ¥æ€§ å†…æ ¸ä¸å¯æ„ŸçŸ¥ å†…æ ¸ç›´æ¥ç®¡ç†ï¼Œè®¾ç½®äº†ä¸€ä¸ªçº¿ç¨‹æ§åˆ¶å—ï¼ˆTCBï¼‰ ç”¨æˆ·çº¿ç¨‹åŠ¨æ€ç»‘å®šå†…æ ¸çº¿ç¨‹ çº¿ç¨‹æ˜ å°„æ¨¡å‹ å¤šå¯¹ä¸€ï¼ˆå¤šä¸ªç”¨æˆ·çº¿ç¨‹â†’1ä¸ªå†…æ ¸çº¿ç¨‹ï¼‰ ä¸€å¯¹ä¸€ï¼ˆ1ç”¨æˆ·çº¿ç¨‹â†’1å†…æ ¸çº¿ç¨‹ï¼‰ å¤šå¯¹å¤šï¼ˆçµæ´»ç»‘å®šï¼‰ åˆ›å»º/é”€æ¯å¼€é”€ âš¡ æä½ï¼ˆæ— éœ€å†…æ ¸ä»‹å…¥ï¼‰ âš ï¸ é«˜ï¼ˆéœ€ç³»ç»Ÿè°ƒç”¨ï¼‰ ğŸ”„ ä¸­ç­‰ï¼ˆç”¨æˆ·çº¿ç¨‹ç®¡ç†+å†…æ ¸çº¿ç¨‹ç»‘å®šï¼‰ é˜»å¡é—®é¢˜ ğŸš« å•çº¿ç¨‹é˜»å¡â†’æ•´ä¸ªè¿›ç¨‹é˜»å¡ âœ… å•çº¿ç¨‹é˜»å¡â†’å¯è°ƒåº¦åŒè¿›ç¨‹å…¶ä»–çº¿ç¨‹ âœ… é€šè¿‡å†…æ ¸çº¿ç¨‹é¿å…å®Œå…¨é˜»å¡ å¤šæ ¸å¹¶è¡Œèƒ½åŠ› âŒ å¤šä¸ªåŒè¿›ç¨‹ç”¨æˆ·çº¿ç¨‹åªæœ‰ä¸€ä¸ªè¿è¡Œï¼ˆå…¶å®å°±æ˜¯ä¸èƒ½ä¸€ä¸ªè¿›ç¨‹åœ¨å¤šä¸ªcpuä¸Šï¼‰ âœ… æ”¯æŒå¤šçº¿ç¨‹å¹¶è¡Œ âœ… æ ¹æ®å†…æ ¸çº¿ç¨‹æ”¯æŒ è°ƒåº¦å•ä½ è¿›ç¨‹çº§è°ƒåº¦ çº¿ç¨‹çº§è°ƒåº¦ æ··åˆè°ƒåº¦ï¼ˆç”¨æˆ·çº¿ç¨‹æ± +å†…æ ¸çº¿ç¨‹è°ƒåº¦ï¼‰ âœ… è‹¥ç³»ç»Ÿä¸­åªæœ‰ç”¨æˆ·çº§çº¿ç¨‹,åˆ™å¤„ç†æœºè°ƒåº¦å•ä½æ˜¯è¿›ç¨‹ ç”¨æˆ·çº¿ç¨‹å†…æ ¸ä¸å¯æ„ŸçŸ¥å…³é”®é—®é¢˜è§£æ çº¿ç¨‹å®ç°æ¨¡å‹ 1 2 3 4 5 graph LR A[ç”¨æˆ·çº§çº¿ç¨‹ ULT] --\u0026gt;|æ˜ å°„| B[å†…æ ¸çº§çº¿ç¨‹ KLT] C[å¤šå¯¹ä¸€æ¨¡å‹] --\u0026gt; D[å¹¶å‘åº¦ä½] E[ä¸€å¯¹ä¸€æ¨¡å‹] --\u0026gt; F[å¼€é”€å¤§] G[å¤šå¯¹å¤šæ¨¡å‹] --\u0026gt; H[å¹³è¡¡å¹¶å‘ä¸å¼€é”€] 2.2_1 å¤„ç†æœºè°ƒåº¦çš„æ¦‚å¿µä¸å±‚æ¬¡ ä¸‰çº§è°ƒåº¦å¯¹æ¯” è°ƒåº¦å±‚æ¬¡ æ“ä½œå¯¹è±¡ é¢‘ç‡ åŠŸèƒ½ é«˜çº§è°ƒåº¦ ä½œä¸šï¼ˆå¤–å­˜â†’å†…å­˜ï¼‰ ä½ åˆ›å»ºPCBï¼Œå†³å®šä½œä¸šè°ƒå…¥/è°ƒå‡º ä¸­çº§è°ƒåº¦ æŒ‚èµ·è¿›ç¨‹ï¼ˆå†…å­˜â†”å¤–å­˜ï¼‰ ä¸­ æé«˜å†…å­˜åˆ©ç”¨ç‡ï¼Œç®¡ç†æŒ‚èµ·é˜Ÿåˆ— ä½çº§è°ƒåº¦ è¿›ç¨‹ï¼ˆåˆ†é…CPUï¼‰ é«˜ï¼ˆmsçº§ï¼‰ æœ€åŸºæœ¬çš„è°ƒåº¦ï¼Œå†³å®šè¿›ç¨‹æ‰§è¡Œé¡ºåº æŒ‚èµ·çŠ¶æ€ å°±ç»ªæŒ‚èµ·ï¼šè¿›ç¨‹åœ¨å¤–å­˜ï¼Œå¯è¢«è°ƒå…¥å†…å­˜æ‰§è¡Œ é˜»å¡æŒ‚èµ·ï¼šè¿›ç¨‹åœ¨å¤–å­˜ç­‰å¾…äº‹ä»¶ 2.2_2 è¿›ç¨‹è°ƒåº¦æ—¶æœºä¸æ–¹å¼ è°ƒåº¦è§¦å‘æ¡ä»¶ åœºæ™¯ èƒ½å¦è°ƒåº¦ åŸå›  å¤„ç†ä¸­æ–­è¿‡ç¨‹ä¸­ Ã— å†…æ ¸æ€ä¸å¯æŠ¢å  å†…æ ¸ç¨‹åºä¸´ç•ŒåŒº Ã— è®¿é—®å°±ç»ªé˜Ÿåˆ—ç­‰å…³é”®æ•°æ®ç»“æ„ åŸå­æ“ä½œï¼ˆåŸè¯­ï¼‰ Ã— æ“ä½œä¸å¯åˆ†å‰² è¿›ç¨‹ä¸»åŠ¨é˜»å¡/ç»ˆæ­¢ âˆš ä¸»åŠ¨æ”¾å¼ƒCPU æ—¶é—´ç‰‡è€—å°½ âˆš è¢«åŠ¨å‰¥å¤ºCPU è°ƒåº¦æ–¹å¼ ç±»å‹ ç‰¹ç‚¹ é€‚ç”¨åœºæ™¯ éæŠ¢å å¼ è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒCPU æ‰¹å¤„ç†ç³»ç»Ÿ æŠ¢å å¼ å¼ºåˆ¶å‰¥å¤ºCPUï¼ˆå“åº”ç´§æ€¥ä»»åŠ¡ï¼‰ å®æ—¶/åˆ†æ—¶ç³»ç»Ÿ ","date":"2025-04-05T00:00:00Z","permalink":"https://rooobeam.github.io/p/%E7%8E%8B%E9%81%93%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0/","title":"ç‹é“æ“ä½œç³»ç»Ÿç¬”è®°"},{"content":"æ–‡ä»¶é“¾æ¥ï¼šRelease v1.0.3 Â· HKUDS/LightRAG\nä¸»è¦åˆ†åˆå§‹åŒ–ã€æ’å…¥ã€æé—®ä¸‰éƒ¨åˆ†\nåˆå§‹åŒ– æ’å…¥ æ’å…¥ï¼šrag.insert()å¼‚æ­¥ç¼–ç¨‹è°ƒç”¨ainsert()\nainsertå†…çš„å„æ­¥æ“ä½œ\næ–‡ç« å¤„ç† æ–‡æœ¬å—å¤„ç† å®ä½“å…³ç³»æŠ½å– æ›´æ–°å„å­˜å‚¨åŒº æ–‡ç« å¤„ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # ====== æ–‡ç« å¤„ç† ====== # å•ä¸ªå­—ç¬¦ä¸²ä¹Ÿå˜æˆList(str) if isinstance(string_or_strings, str): string_or_strings = [string_or_strings] # {hash(\u0026#34;doc-\u0026#34;+txt_içš„å­—ç¬¦ä¸²):{\u0026#34;content\u0026#34;: txt_i.strip()}}ï¼Œtxt_iæ˜¯ç¬¬iä¸ªæ–‡ç«  new_docs = { compute_mdhash_id(c.strip(), prefix=\u0026#34;doc-\u0026#34;): {\u0026#34;content\u0026#34;: c.strip()} for c in string_or_strings } \u0026#39;\u0026#39;\u0026#39; nä¸ª hash(\u0026#34;doc-\u0026#34;+txt_içš„å­—ç¬¦ä¸²) ç»„æˆçš„list ä¼ å…¥ self.full_docs.filter_keys self.full_docs.filter_keys æ˜¯ JsonKVStorage.filter_keysæ–¹æ³• è¿”å›set{str}(ä»¥å­—ç¬¦ä¸²ä¸ºå…ƒç´ çš„å­—å…¸) ä½œç”¨æ˜¯ï¼šæŸæ–‡ç«  å’Œå†å²æ•°æ®ä¸­é‡å¤ æˆ– å’Œä¼ å…¥æ•°æ®ä¸­å…¶ä»–æ–‡ç« é‡å¤ åˆ™æ’é™¤ã€‚ é€šè¿‡æ¯”å¯¹hashå€¼ \u0026#39;\u0026#39;\u0026#39; _add_doc_keys = await self.full_docs.filter_keys(list(new_docs.keys())) # keyåœ¨_add_doc_keysé‡Œçš„kvå¯¹ç•™ä¸‹ new_docs = {k: v for k, v in new_docs.items() if k in _add_doc_keys} # æ—¥å¿—ç™»è®° if not len(new_docs): logger.warning(\u0026#34;All docs are already in the storage\u0026#34;) return # storage æ˜¯ è¦æ›´æ–°çš„flag update_storage = True logger.info(f\u0026#34;[New Docs] inserting {len(new_docs)} docs\u0026#34;) æ–‡æœ¬å—å¤„ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 # ====== æ–‡æœ¬å—å¤„ç† ====== # ä¸€æ¬¡ainsertä¸­çš„å¤šä¸ªæ–‡ç« çš„chunkså­—å…¸æ±‡æ€»ï¼Œainsertåªæ˜¯äº‹ä»¶å¾ªç¯ä¸­çš„ä¸€ä¸ªäº‹ä»¶ # {\u0026#34;chunk-\u0026#34;+chunkå­—ç¬¦ä¸²å“ˆå¸Œå€¼: dict, å“ˆå¸Œå€¼: dict,...} inserting_chunks = {} # å¤–å¾ªç¯ ç¬¬iç¯‡æ–‡ç« ï¼Œå†…å¾ªç¯ï¼Œç¬¬iç¯‡æ–‡ç« ç¬¬jä¸ªchunk for doc_key, doc in \\ tqdm_async(new_docs.items(), desc=\u0026#34;Chunking documents\u0026#34;, unit=\u0026#34;doc\u0026#34;): \u0026#39;\u0026#39;\u0026#39; inserting_chunks = { hash(\u0026#34;chunk-\u0026#34;+chunk_içš„å­—ç¬¦ä¸²): {\u0026#34;tokens\u0026#34;: chunk_içš„tokenæ•°, \u0026#34;content\u0026#34;: chunk_iå…·ä½“å†…å®¹, \u0026#34;chunk_order_index\u0026#34;: æ˜¯è¯¥æ–‡ç« çš„ç¬¬iä¸ªchunk, \u0026#34;full_doc_id\u0026#34;: doc_key}, hash(\u0026#34;chunk-\u0026#34;+chunk_i+1çš„å­—ç¬¦ä¸²): {\u0026#34;tokens\u0026#34;: chunk_i+1çš„tokenæ•°, \u0026#34;content\u0026#34;: chunk_i+1å…·ä½“å†…å®¹, \u0026#34;chunk_order_index\u0026#34;: æ˜¯è¯¥æ–‡ç« çš„ç¬¬i+1ä¸ªchunk, \u0026#34;full_doc_id\u0026#34;: doc_key}, } chunks = {å“ˆå¸Œå€¼: dict, å“ˆå¸Œå€¼: dict,...} \u0026#39;\u0026#39;\u0026#39; chunks = { # dpæ˜¯ dict[str, Union[int, str]]ï¼Œå³æ˜¯ä¸ªå­—å…¸ï¼Œç„¶åé”®ä¸ºkeyï¼Œå€¼ä¸ºUnion[int,str]å³int æˆ– str # Union[int,str]å…·ä½“æ¥è¯´ï¼Œå¯ä»¥æ˜¯ è¯¥chunkçš„tokenæ•°ï¼Œchunkå…·ä½“å†…å®¹ï¼Œæ˜¯è¯¥æ–‡ç« çš„ç¬¬iä¸ªchunk # **dpè¡¨ç¤ºè§£åŒ…å­—å…¸ï¼ˆå»æ‰å¤§æ‹¬å·ï¼‰ï¼Œå¹¶è¦æ±‚\u0026#34;full_doc_id\u0026#34;: doc_keyæ»¡è¶³dict[str, Union[int, str]] # chunking_by_token_size æ ¹æ® token æ•°é‡åˆ‡åˆ†æ–‡æœ¬ï¼Œè¿”å›List[dict]å§ compute_mdhash_id(dp[\u0026#34;content\u0026#34;], prefix=\u0026#34;chunk-\u0026#34;): {**dp, \u0026#34;full_doc_id\u0026#34;: doc_key,} for dp in chunking_by_token_size( doc[\u0026#34;content\u0026#34;], overlap_token_size=self.chunk_overlap_token_size, max_token_size=self.chunk_token_size, tiktoken_model=self.tiktoken_model_name, ) } # dict.update(dict)å¦‚æœå·²å­˜åœ¨ç›¸åŒçš„é”®ï¼Œåˆ™å¯¹åº”çš„å€¼ä¼šè¢«è¦†ç›–ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ æ–°çš„é”®å€¼å¯¹ã€‚ # dict1 = {\u0026#39;a\u0026#39;: 1, \u0026#39;b\u0026#39;: 2} # dict2 = {\u0026#39;b\u0026#39;: 3, \u0026#39;c\u0026#39;: 4} # dict1.update(dict2) # print(dict1) # Output: {\u0026#39;a\u0026#39;: 1, \u0026#39;b\u0026#39;: 3, \u0026#39;c\u0026#39;: 4} # å› ä¸ºç”¨äº†hashå†…å®¹åŒ…æ‹¬chunkå†…å®¹ï¼Œæ‰€ä»¥ä¸é‡å¤ inserting_chunks.update(chunks) \u0026#39;\u0026#39;\u0026#39; nä¸ª hash(\u0026#34;chunk-\u0026#34;+chunk_içš„å­—ç¬¦ä¸²) ç»„æˆçš„listä¼ å…¥self.full_docs.filter_keys self.full_docs.filter_keys å³ JsonKVStorage.filter_keys è¿”å›set{str}(ä»¥å­—ç¬¦ä¸²ä¸ºå…ƒç´ çš„å­—å…¸)ï¼Œä½œç”¨æ˜¯ï¼šæŸchunk å’Œå†å²æ•°æ®ä¸­é‡å¤æˆ–å’Œä¼ å…¥æ•°æ®ä¸­å…¶ä»–chunké‡å¤åˆ™æ’é™¤ã€‚ é€šè¿‡æ¯”å¯¹hashå€¼ \u0026#39;\u0026#39;\u0026#39; _add_chunk_keys = await self.text_chunks.filter_keys( list(inserting_chunks.keys()) ) # æ ¹æ®keyåœ¨_add_doc_keysé‡Œå¯¹inserting_chunksç­›é€‰åˆæ ¼çš„kvå¯¹ inserting_chunks = { k: v for k, v in inserting_chunks.items() if k in _add_chunk_keys } # æ—¥å¿—ç™»è®° if not len(inserting_chunks): logger.warning(\u0026#34;All chunks are already in the storage\u0026#34;) return logger.info(f\u0026#34;[New Chunks] inserting {len(inserting_chunks)} chunks\u0026#34;) # å°†inserting_chunks(å­—å…¸)å­˜å…¥json await self.chunks_vdb.upsert(inserting_chunks) å®ä½“å…³ç³»æŠ½å– åˆ†ä¸º å¤–éƒ¨ å’Œ extract_entitieså‡½æ•°å†…éƒ¨\nå¤–éƒ¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # ====== å®ä½“æŠ½å– ====== logger.info(\u0026#34;[Entity Extraction]...\u0026#34;) # asdictæ¥è‡ªâ€œfrom dataclasses import asdictâ€œï¼Œèƒ½æ„å»ºLightragç±»çš„å±æ€§å­—å…¸ # maybe_new_kgä¸ºæ›´æ–°è¿‡åçš„knowledge_graph_instï¼Œæ˜¯NetworkXStorageç±»çš„å®ä¾‹ # maybe_new_kgæœ€é‡è¦çš„å±æ€§ä¸º _graphï¼Œå…¶ä¸ºnx.Graph() maybe_new_kg = await extract_entities( inserting_chunks, knowledge_graph_inst=self.chunk_entity_relation_graph, entity_vdb=self.entities_vdb, relationships_vdb=self.relationships_vdb, global_config=asdict(self), ) # operate.pyä¸­ if not len(all_entities_data) if not len(all_relationships_data)ä¼šreturn None if maybe_new_kg is None: logger.warning(\u0026#34;No new entities and relationships found\u0026#34;) return self.chunk_entity_relation_graph = maybe_new_kg extract_entitieså‡½æ•°å†…éƒ¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 async def extract_entities( chunks: dict[str, TextChunkSchema], knowledge_graph_inst: BaseGraphStorage, entity_vdb: BaseVectorStorage, relationships_vdb: BaseVectorStorage, global_config: dict, ) -\u0026gt; Union[BaseGraphStorage, None]: \u0026#39;\u0026#39;\u0026#39; global_config[\u0026#34;llm_model_func\u0026#34;] -\u0026gt; gpt_4o_mini_complete(prompt, system_prompt=None, history_messages=[], **kwargs) -\u0026gt; openai_complete_if_cache(model, prompt, system_prompt=None, history_messages=[], base_url=None, api_key=None, **kwargs) åæ¥çš„å°è£…äº†ï¼Œå¯ä»¥é€‰æ‹©æ¨¡å‹ï¼Œä¸åƒè¿™é‡Œå‡½æ•°åå†™æ˜äº†4o_min ä¸Šä¸€è¡Œä¸‰ä¸ªå‚æ•°æ²¡æœ‰ä¼ å…¥å’Œè°ƒç”¨å®é™…ä¸Š \u0026#39;\u0026#39;\u0026#39; use_llm_func: callable = global_config[\u0026#34;llm_model_func\u0026#34;] # é»˜è®¤è®¾ç½®ä¸º1ï¼Œè²Œä¼¼å’Œå¤šè½®å¯¹è¯æœ‰å…³ entity_extract_max_gleaning = global_config[\u0026#34;entity_extract_max_gleaning\u0026#34;] \u0026#39;\u0026#39;\u0026#39; ordered_chunks = [ (hash(\u0026#34;chunk-\u0026#34;+chunk_içš„å­—ç¬¦ä¸²), {\u0026#34;tokens\u0026#34;: chunk_içš„tokenæ•°, \u0026#34;content\u0026#34;: chunk_iå…·ä½“å†…å®¹, \u0026#34;chunk_order_index\u0026#34;: æ˜¯è¯¥æ–‡ç« çš„ç¬¬iä¸ªchunk, \u0026#34;full_doc_id\u0026#34;: doc_key}), (a,b),... ] å³å¯ç´¢å¼•çš„chunks \u0026#39;\u0026#39;\u0026#39; ordered_chunks = list(chunks.items()) \u0026#39;\u0026#39;\u0026#39; add language and example number params to prompt additional parameter åŒ…æ‹¬ è¯­è¨€ å’Œ ä¾‹å­æ•°é‡ å®ä¾‹åŒ–Lightragçš„æ—¶å€™ å¯ä»¥æ·»åŠ å‚æ•°addon_params={\u0026#34;example_number\u0026#34;: 1, \u0026#34;language\u0026#34;: \u0026#34;Simplfied Chinese\u0026#34;} é»˜è®¤è‹±æ–‡ï¼ˆPROMPTS[\u0026#34;DEFAULT_LANGUAGE\u0026#34;]ï¼‰ï¼ŒNone \u0026#39;\u0026#39;\u0026#39; language = global_config[\u0026#34;addon_params\u0026#34;].get( \u0026#34;language\u0026#34;, PROMPTS[\u0026#34;DEFAULT_LANGUAGE\u0026#34;] ) example_number = global_config[\u0026#34;addon_params\u0026#34;].get(\u0026#34;example_number\u0026#34;, None) # å¦‚æœexample_numberä¸ä¸ºNoneï¼ŒæŒ‰è®¾ç½®çš„ä¸ªæ•°æ¥ï¼Œä¸”ä¸è¶…èŒƒå›´ï¼Œ # å¦‚æœä¸ºnoneï¼Œè®¾ç½®ä¸º PROMPTS[\u0026#34;entity_extraction_examples\u0026#34;] # examples=\u0026#34;example1\u0026#34;+\u0026#34;\\n\u0026#34;+\u0026#34;example2\u0026#34;+\u0026#34;\\n\u0026#34;+\u0026#34;example3\u0026#34; if example_number and example_number \u0026lt; len(PROMPTS[\u0026#34;entity_extraction_examples\u0026#34;]): examples = \u0026#34;\\n\u0026#34;.join( PROMPTS[\u0026#34;entity_extraction_examples\u0026#34;][: int(example_number)] ) else: examples = \u0026#34;\\n\u0026#34;.join(PROMPTS[\u0026#34;entity_extraction_examples\u0026#34;]) # tuple_delimiter=\u0026#34;\u0026lt;|\u0026gt;\u0026#34; record_delimiter=\u0026#34;##\u0026#34; completion_delimiter=\u0026#34;\u0026lt;|COMPLETE|\u0026gt;\u0026#34; # entity_types=[\u0026#34;organization\u0026#34;, \u0026#34;person\u0026#34;, \u0026#34;geo\u0026#34;, \u0026#34;event\u0026#34;] example_context_base = dict( tuple_delimiter=PROMPTS[\u0026#34;DEFAULT_TUPLE_DELIMITER\u0026#34;], record_delimiter=PROMPTS[\u0026#34;DEFAULT_RECORD_DELIMITER\u0026#34;], completion_delimiter=PROMPTS[\u0026#34;DEFAULT_COMPLETION_DELIMITER\u0026#34;], entity_types=\u0026#34;,\u0026#34;.join(PROMPTS[\u0026#34;DEFAULT_ENTITY_TYPES\u0026#34;]), language=language, ) \u0026#39;\u0026#39;\u0026#39; æ·»åŠ exampelçš„æ ¼å¼ exampleså­—ç¬¦ä¸²éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š (\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;{tuple_delimiter}\u0026#34;äººç‰©\u0026#34;{tuple_delimiter}\u0026#34;Jordan å¯¹æ¢ç´¢æœ‰ç€å…±åŒçš„æ‰¿è¯ºï¼Œå¹¶ä¸ Taylor å°±è®¾å¤‡è¿›è¡Œäº†é‡è¦äº’åŠ¨ã€‚\u0026#34;){record_delimiter} (\u0026#34;å…³ç³»\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;{tuple_delimiter}\u0026#34;Cruz\u0026#34;{tuple_delimiter}\u0026#34;Jordan å¯¹æ¢ç´¢çš„æ‰¿è¯ºæ˜¯å¯¹ Cruz æ§åˆ¶ä¸ç§©åºæ„¿æ™¯çš„åæŠ—ã€‚\u0026#34;{tuple_delimiter}\u0026#34;æ„è¯†å½¢æ€å†²çª, åæŠ—\u0026#34;{tuple_delimiter}5){record_delimiter} (\u0026#34;content_keywords\u0026#34;{tuple_delimiter}\u0026#34;power dynamics, ideological conflict, discovery, rebellion\u0026#34;){completion_delimiter} exampleså­—ç¬¦ä¸²éƒ¨åˆ†å†…å®¹è¯´æ˜ï¼š æ¯è¡Œæ˜¯å¯¹chunkçš„å®ä½“æŠ½å–ã€å…³ç³»æŠ½å–æˆ–æ•´ä½“å†…å®¹å…³é”®è¯æå– å¼€å¤´å¿…ä¸ºå®ä½“ã€å…³ç³»æˆ–å…³é”®è¯ï¼Œç„¶åç”¨{tuple_delimiter}éš”å¼€ï¼Œæ¯è¡Œè®°å½•1ä¸ªå…³ç³»è¿‡å®ä½“ï¼Œç„¶åè¡Œæœ«æ·»åŠ {record_delimiter} å…ƒæ•°æ®é™„åŠ ï¼šä¸ºå…³ç³»æ·»åŠ åˆ†ç±»æ ‡ç­¾ï¼ˆå¦‚â€œæƒåŠ›åŠ¨æ€â€â€œæ„è¯†å½¢æ€å†²çªâ€ï¼‰å’Œå¼ºåº¦è¯„åˆ†ï¼ˆå¦‚ Taylor-Jordan çš„å…³ç³»å¼ºåº¦ä¸º 8ï¼‰ examples.format(**dict)å°†ç±»å¦‚{tuple_delimiter}çš„å†…å®¹æ›¿æ¢ä¸ºdictä¸­çš„å€¼ï¼ˆ tuple_delimiter: å€¼ï¼‰ æœ€ç»ˆexamplesæ˜¯ {...} è¢«æ›¿æ¢äº†çš„ä¸€ä¸ªå­—ç¬¦ä¸² \u0026#39;\u0026#39;\u0026#39; examples = examples.format(**example_context_base) \u0026#39;\u0026#39;\u0026#39; entity_extract_promptä¸»è¦åŒ…æ‹¬ï¼š -Goal- ... -Steps- ... -Examples- ... -Real Data- ... \u0026#39;\u0026#39;\u0026#39; entity_extract_prompt = PROMPTS[\u0026#34;entity_extraction\u0026#34;] context_base = dict( tuple_delimiter=PROMPTS[\u0026#34;DEFAULT_TUPLE_DELIMITER\u0026#34;], record_delimiter=PROMPTS[\u0026#34;DEFAULT_RECORD_DELIMITER\u0026#34;], completion_delimiter=PROMPTS[\u0026#34;DEFAULT_COMPLETION_DELIMITER\u0026#34;], entity_types=\u0026#34;,\u0026#34;.join(PROMPTS[\u0026#34;DEFAULT_ENTITY_TYPES\u0026#34;]), examples=examples, language=language, ) # è®©å¤§æ¨¡å‹ç»§ç»­æŒ‰ä¸Šæ¬¡çš„æ ¼å¼ç»§ç»­æå– # \u0026#34;\u0026#34;\u0026#34;MANY entities were missed in the last extraction. # Add them below using the same format:\u0026#34;\u0026#34;\u0026#34; continue_prompt = PROMPTS[\u0026#34;entiti_continue_extraction\u0026#34;] # è¯¢é—®LLMæ˜¯å¦é—æ¼è®¸å¤š å®ä½“ ï¼Œå›ç­” æ˜¯/å¦ # \u0026#34;\u0026#34;\u0026#34;It appears some entities may have still been missed. # Answer YES | NO if there are still entities that need to be added.\u0026#34;\u0026#34;\u0026#34; if_loop_prompt = PROMPTS[\u0026#34;entiti_if_loop_extraction\u0026#34;] already_processed = 0 already_entities = 0 already_relations = 0 # return dict(maybe_nodes), dict(maybe_edges) # å³ è¿”å›ä¸€ä¸ª å…ƒç»„ï¼ŒåŒ…å«ä¸¤ä¸ªå­—å…¸ï¼š(nodes_dict, edges_dict) # nodes_dict = {str: dict...} # edges_dict = {(str, str): dict} async def _process_single_content(chunk_key_dp: tuple[str, TextChunkSchema]):... # =====æå–å‡ºæ¯ä¸ªchunkçš„entityå’Œrelation===== # results = [chunk_1çš„(nodes_dict, edges_dict), chunk_2çš„(nodes_dict, edges_dict)...] # = [ # ( {str: list[dict]} , {(str, str): list[dict]} ), # ( {str: list[dict]} , {(str, str): list[dict]} ), # ... # ] # è°ƒç”¨_process_single_content è¿”å›çš„äºŒå…ƒç»„ å³ result results = [] for result in tqdm_async( asyncio.as_completed([_process_single_content(c) for c in ordered_chunks]), total=len(ordered_chunks), desc=\u0026#34;Extracting entities from chunks\u0026#34;, unit=\u0026#34;chunk\u0026#34;, ): results.append(await result) maybe_nodes = defaultdict(list) maybe_edges = defaultdict(list) # m_nodes = {str: list[dict]}åˆå¹¶æˆ{str: list[dict,dict,...]}ï¼Œdictçš„æ•°é‡å¤§äºç­‰äº # m_edges = {(str, str): list[dict]}åˆå¹¶åŒç† # å°†list[äºŒå…ƒtuple] results å¤„ç†ä¸ºç»“ç‚¹å’Œè¾¹ # å› ä¸ºresultsä¸­çš„å„ä¸ª(nodes, edges)å…ƒç»„æ˜¯ä»¥chunkå•ä½æå–çš„ï¼Œæå–çš„å®ä½“å’Œå…³ç³»æœ‰è›®å¤šé‡å¤çš„ # æ‰€ä»¥è¿™é‡Œ{str: list[dict,dict,...]} ä¼šå¯¹åº”å¤šä¸ªdict for m_nodes, m_edges in results: # ä¸åŒchunkåŒæ ·å®ä½“çš„dictæ”¾åœ¨ä¸€ä¸ªlistäº† for k, v in m_nodes.items(): maybe_nodes[k].extend(v) # åŒç† for k, v in m_edges.items(): maybe_edges[tuple(sorted(k))].extend(v) # =====æ·»åŠ å®ä½“ï¼ˆç»“ç‚¹ï¼‰åˆ°å›¾æ•°æ®ç»“æ„===== logger.info(\u0026#34;Inserting entities into storage...\u0026#34;) all_entities_data = [] # knowledge_graph_instä¸ºNetworkXStorageå®ä¾‹ # for result in åˆ—è¡¨ç”Ÿæˆå¼: all_e....append(await result) # åˆ—è¡¨ç”Ÿæˆå¼=[_merge_upsert.(k, v,...graph_inst...) for k,v in...] # ä¸åŒchunkæå–çš„å®ä½“å’Œå…³ç³»æœ‰è›®å¤šé‡å¤çš„ï¼Œ{str: list[dict,dict,...]}ä¼šå¯¹åº”å¤šä¸ªdict # maybe_nodesï¼šæ‰€æœ‰chunkåŒæ ·å®ä½“çš„dictæ”¾åœ¨ä¸€ä¸ªlistäº†ï¼Œ{str: list[dict,dict,...]} # result = node_data = dict( # entity_name=entity_name # entity_type=entity_type, # description=description, # source_id=source_id, # ) # è¿™é‡Œçš„ä¸€ä¸ªresultæ˜¯é›†æˆè¯¥å®ä½“åœ¨ æ‰€æœ‰çš„chunkå’Œè¿‡å¾€graphé‡Œ # æå–å‡ºçš„dscriã€æºæ–‡ç« idï¼Œå‡ºç°æ¬¡æ•°æœ€å¤šçš„type for result in tqdm_async( asyncio.as_completed( [ _merge_nodes_then_upsert(k, v, knowledge_graph_inst, global_config) for k, v in maybe_nodes.items() ] ), total=len(maybe_nodes), desc=\u0026#34;Inserting entities\u0026#34;, unit=\u0026#34;entity\u0026#34;, ): all_entities_data.append(await result) # =====æ·»åŠ å…³ç³»ï¼ˆè¾¹ï¼‰åˆ°å›¾æ•°æ®ç»“æ„===== logger.info(\u0026#34;Inserting relationships into storage...\u0026#34;) all_relationships_data = [] # all_relationships_data = List[dict] # result = edge_data = dict( # src_id=src_id, # tgt_id=tgt_id, # description=description, # keywords=keywords, # ) # å¤šä¸ªchunkæå–å‡ºçš„dscriç”¨\u0026lt;SEP\u0026gt;è¿æ¥èµ·æ¥ï¼Œkeywordså»é‡æ’åºåç”¨\u0026lt;SEP\u0026gt;è¿æ¥ # k[0]æ˜¯(node1-\u0026gt;str,node2-\u0026gt;str), k[1]æ˜¯[dict, dict, ...]æ¯ä¸ªdictæ¥è‡ªä¸åŒchunk for result in tqdm_async( asyncio.as_completed( [ _merge_edges_then_upsert( k[0], k[1], v, knowledge_graph_inst, global_config ) for k, v in maybe_edges.items() ] ), total=len(maybe_edges), desc=\u0026#34;Inserting relationships\u0026#34;, unit=\u0026#34;relationship\u0026#34;, ): all_relationships_data.append(await result) if not len(all_entities_data): logger.warning(\u0026#34;Didn\u0026#39;t extract any entities, maybe your LLM is not working\u0026#34;) return None if not len(all_relationships_data): logger.warning( \u0026#34;Didn\u0026#39;t extract any relationships, maybe your LLM is not working\u0026#34; ) return None # =====å­˜å®ä½“å‘é‡æ•°æ®===== if entity_vdb is not None: data_for_vdb = { compute_mdhash_id(dp[\u0026#34;entity_name\u0026#34;], prefix=\u0026#34;ent-\u0026#34;): { \u0026#34;content\u0026#34;: dp[\u0026#34;entity_name\u0026#34;] + dp[\u0026#34;description\u0026#34;], \u0026#34;entity_name\u0026#34;: dp[\u0026#34;entity_name\u0026#34;], } for dp in all_entities_data } await entity_vdb.upsert(data_for_vdb) # =====å­˜å…³ç³»å‘é‡æ•°æ®===== if relationships_vdb is not None: data_for_vdb = { compute_mdhash_id(dp[\u0026#34;src_id\u0026#34;] + dp[\u0026#34;tgt_id\u0026#34;], prefix=\u0026#34;rel-\u0026#34;): { \u0026#34;src_id\u0026#34;: dp[\u0026#34;src_id\u0026#34;], \u0026#34;tgt_id\u0026#34;: dp[\u0026#34;tgt_id\u0026#34;], \u0026#34;content\u0026#34;: dp[\u0026#34;keywords\u0026#34;] + dp[\u0026#34;src_id\u0026#34;] + dp[\u0026#34;tgt_id\u0026#34;] + dp[\u0026#34;description\u0026#34;], } for dp in all_relationships_data } await relationships_vdb.upsert(data_for_vdb) return knowledge_graph_inst _process_single_contentå‡½æ•°å†…éƒ¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 async def _process_single_content(chunk_key_dp: tuple[str, TextChunkSchema]): nonlocal already_processed, already_entities, already_relations # chunk_key = hash(\u0026#39;chunk-\u0026#39;+chunk_iå…·ä½“å†…å®¹) chunk_key = chunk_key_dp[0] # chunk_dp è§ lightrag.pyä¸­çš„ chunkså˜é‡å‰çš„ æ³¨é‡Šï¼Œæ˜¯ä¸ªå­—å…¸ chunk_dp = chunk_key_dp[1] # contentå³chunk_iå…·ä½“å†…å®¹ content = chunk_dp[\u0026#34;content\u0026#34;] \u0026#34;\u0026#34;\u0026#34; æ›¿æ¢åˆå§‹promptæ¨¡æ¿é‡Œçš„{...} hint_prompt = entity_extract_prompt.format(**context_base, input_text=content) ä¸¤æ¬¡.formatæ˜¯å› ä¸ºæ‹…å¿ƒç¬¬ä¸€æ¬¡.formatå,å­—å…¸context_baseçš„å€¼ä¸­ä¼šæœ‰{input_text} æ•…ç¬¬ä¸€æ¬¡.formatä¸­ï¼Œç”¨input_text=\u0026#34;{input_text}\u0026#34;ä¿ç•™input_textä¸å˜ï¼Œç¬¬äºŒæ¬¡å†å…¨éƒ¨æ›¿æ¢ hint_promptå³ç»ˆæç‰ˆprompt \u0026#34;\u0026#34;\u0026#34; hint_prompt = entity_extract_prompt.format( **context_base, input_text=\u0026#34;{input_text}\u0026#34; ).format(**context_base, input_text=content) # llmæŠ½å–å®ä½“ \u0026#39;\u0026#39;\u0026#39; use_llm_func å³ gpt_4o_mini_complete(...) -\u0026gt; str use_llm_func: callable = global_config[\u0026#34;llm_model_func\u0026#34;] llm_model_func: callable = gpt_4o_mini_complete --- lightrag.pyå®šä¹‰çš„ç±»å±æ€§ï¼Œglobal_config async def gpt_4o_mini_complete(...) --- llm.py gpt_4o_mini_complete è¿”å›ï¼š return await openai_complete_if_cache( \u0026#34;gpt-4o-mini\u0026#34;, prompt, system_prompt=system_prompt, history_messages=history_messages, **kwargs, ) final_resultæ˜¯str \u0026#39;\u0026#39;\u0026#39; final_result = await use_llm_func(hint_prompt) \u0026#39;\u0026#39;\u0026#39; ä¸€ä¸ªåˆ—è¡¨ history = [ {\u0026#34;role\u0026#34;: \u0026#39;user\u0026#39;, \u0026#34;content\u0026#34;: hint_prompt} {\u0026#34;role\u0026#34;: \u0026#39;assistant\u0026#39;, \u0026#34;content\u0026#34;: final_result} ] \u0026#39;\u0026#39;\u0026#39; history = pack_user_ass_to_openai_messages(hint_prompt, final_result) # \u0026#34;æ‹¾ç©—\u0026#34; å³é‡å¤æŠ½å–ï¼Œé˜²æ­¢é—æ¼ # entity_extract_max_gleaningé»˜è®¤ä¸º1 for now_glean_index in range(entity_extract_max_gleaning): # ç›´æ¥å‘Šè¯‰å®ƒé—æ¼äº†å®ä½“ï¼Œè¦ç»§ç»­æå– # \u0026#34;\u0026#34;\u0026#34;MANY entities were missed in the last extraction. # Add them below using the same format:\u0026#34;\u0026#34;\u0026#34; glean_result = await use_llm_func(continue_prompt, history_messages=history) \u0026#39;\u0026#39;\u0026#39; [ {\u0026#34;role\u0026#34;: \u0026#39;user\u0026#39;, \u0026#34;content\u0026#34;: hint_prompt} {\u0026#34;role\u0026#34;: \u0026#39;assistant\u0026#39;, \u0026#34;content\u0026#34;: final_result} {\u0026#34;role\u0026#34;: \u0026#39;user\u0026#39;, \u0026#34;content\u0026#34;: continue_prompt} {\u0026#34;role\u0026#34;: \u0026#39;assistant\u0026#39;, \u0026#34;content\u0026#34;: glean_result} ] \u0026#39;\u0026#39;\u0026#39; history += pack_user_ass_to_openai_messages(continue_prompt, glean_result) # str+str å­—ç¬¦ä¸²ç›¸è¿ final_result += glean_result # è¾¾åˆ°è®¾å®šçš„æœ€å¤§æ¬¡æ•°ï¼Œè·³å‡º if now_glean_index == entity_extract_max_gleaning - 1: break #æœªè¾¾åˆ°ï¼Œè®©LLMåˆ¤æ–­æ˜¯å¦éœ€è¦å†æ¬¡ æ‹¾ç©— if_loop_result: str = await use_llm_func( if_loop_prompt, history_messages=history ) if_loop_result = if_loop_result.strip().strip(\u0026#39;\u0026#34;\u0026#39;).strip(\u0026#34;\u0026#39;\u0026#34;).lower() # ä¸éœ€è¦åˆ™break if if_loop_result != \u0026#34;yes\u0026#34;: break \u0026#39;\u0026#39;\u0026#39; å‡å¦‚è¯´final result (\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;{tuple_delimiter}\u0026#34;äººç‰©\u0026#34;{tuple_delimiter}\u0026#34;Jordan å¯¹æ¢ç´¢æœ‰ç€å…±åŒçš„æ‰¿è¯ºï¼Œå¹¶ä¸ Taylor å°±è®¾å¤‡è¿›è¡Œäº†é‡è¦äº’åŠ¨ã€‚\u0026#34;){record_delimiter} (\u0026#34;å…³ç³»\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;{tuple_delimiter}\u0026#34;Cruz\u0026#34;{tuple_delimiter}\u0026#34;Jordan å¯¹æ¢ç´¢çš„æ‰¿è¯ºæ˜¯å¯¹ Cruz æ§åˆ¶ä¸ç§©åºæ„¿æ™¯çš„åæŠ—ã€‚\u0026#34;{tuple_delimiter}\u0026#34;æ„è¯†å½¢æ€å†²çª, åæŠ—\u0026#34;{tuple_delimiter}5){record_delimiter} (\u0026#34;content_keywords\u0026#34;{tuple_delimiter}\u0026#34;power dynamics, ideological conflict, discovery, rebellion\u0026#34;){completion_delimiter} (\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;{tuple_delimiter}\u0026#34;äººç‰©\u0026#34;{tuple_delimiter}\u0026#34;Jordan å¯¹æ¢ç´¢æœ‰ç€å…±åŒçš„æ‰¿è¯ºï¼Œå¹¶ä¸ Taylor å°±è®¾å¤‡è¿›è¡Œäº†é‡è¦äº’åŠ¨ã€‚\u0026#34;){record_delimiter} gleanè¡¥å……(\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;J\u0026#34;{tuple_delimiter}\u0026#34;äººç‰©\u0026#34;{tuple_delimiter}\u0026#34;J å¯¹æ¢ç´¢æœ‰æ‰¿è¯ºï¼Œå¹¶ä¸ Täº’åŠ¨ã€‚\u0026#34;){record_delimiter} (\u0026#34;å…³ç³»\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;{tuple_delimiter}\u0026#34;Cruz\u0026#34;{tuple_delimiter}\u0026#34;Jordan å¯¹æ¢ç´¢çš„æ‰¿è¯ºæ˜¯å¯¹ Cruz æ§åˆ¶ä¸ç§©åºæ„¿æ™¯çš„åæŠ—ã€‚\u0026#34;{tuple_delimiter}\u0026#34;æ„è¯†å½¢æ€å†²çª, åæŠ—\u0026#34;{tuple_delimiter}5){record_delimiter} (\u0026#34;content_keywords\u0026#34;{tuple_delimiter}\u0026#34;power dynamics, ideological conflict, discovery, rebellion\u0026#34;){completion_delimiter} å°±ä¼šå˜æˆ [\u0026#34;(\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;...\u0026#34;)\u0026#34;, \u0026#34;(\u0026#34;å…³ç³»\u0026#34;{tuple_delimiter}\u0026#34;Jordan...)\u0026#34;, (\u0026#34;content_keywords\u0026#34;{tuple_delimiter}\u0026#34;power dynamics,...\u0026#34;)\u0026#34;,...] \u0026#39;\u0026#39;\u0026#39; records = split_string_by_multi_markers( final_result, [context_base[\u0026#34;record_delimiter\u0026#34;], context_base[\u0026#34;completion_delimiter\u0026#34;]], ) # from collections import defaultdict \u0026#34;\u0026#34;\u0026#34; maybe_nodes = { å®ä½“1_name-\u0026gt;str: [dict( entity_name=entity_name, entity_type=entity_type, description=entity_description, å—id source_id=entity_source_id, ),...], å®ä½“2_name-\u0026gt;str: [dict( entity_name=entity_name, entity_type=entity_type, description=entity_description, å—id source_id=entity_source_id, ),...] } maybe_edges = { (å®æ–½å®ä½“-\u0026gt;str, æ¥æ”¶å®ä½“-\u0026gt;str): [dict( å®æ–½å®ä½“ src_id=source, æ¥æ”¶å®ä½“ tgt_id=target, weight=weight, description=edge_description, keywords=edge_keywords, source_id=edge_source_id, ),...] } ç®€è®°ä¸º maybe_nodes = {str:list[dict]} mabybe_edges = {(str,str):list[dict]} \u0026#34;\u0026#34;\u0026#34; maybe_nodes = defaultdict(list) maybe_edges = defaultdict(list) for record in records: # è·å–æ‹¬å·é‡Œå†…å®¹\u0026#34;(\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;...\u0026#34;)\u0026#34;-\u0026gt;\u0026#34;\u0026#34;å®ä½“\u0026#34;{tuple_delimiter}\u0026#34;Jordan\u0026#34;...\u0026#34;\u0026#34; record = re.search(r\u0026#34;\\((.*)\\)\u0026#34;, record) if record is None: continue record = record.group(1) # record_attributes=List[str,str...] record_attributes = split_string_by_multi_markers( record, [context_base[\u0026#34;tuple_delimiter\u0026#34;]] ) \u0026#34;\u0026#34;\u0026#34; if_entities= dict( entity_name=entity_name, entity_type=entity_type, description=entity_description, å—id source_id=entity_source_id, ) \u0026#34;\u0026#34;\u0026#34; if_entities = await _handle_single_entity_extraction( record_attributes, chunk_key ) # maybe_nodesä¸ºé»˜è®¤ å€¼ ä¸ºç©ºåˆ—è¡¨çš„ å­—å…¸ # {JORDAN:[{e_name:..., e_type:.......}]} if if_entities is not None: maybe_nodes[if_entities[\u0026#34;entity_name\u0026#34;]].append(if_entities) continue \u0026#34;\u0026#34;\u0026#34; if_relation= dict( src_id=source, tgt_id=target, weight=weight, description=edge_description, keywords=edge_keywords, source_id=edge_source_id, ) å•æ¡recordå¤„ç†å‡ºrelation \u0026#34;\u0026#34;\u0026#34; if_relation = await _handle_single_relationship_extraction( record_attributes, chunk_key ) if if_relation is not None: # {(JORDAN,JENNY):[{src_id:..., tgt_id:..., }]} maybe_edges[(if_relation[\u0026#34;src_id\u0026#34;], if_relation[\u0026#34;tgt_id\u0026#34;])].append( if_relation ) # ä¸‹é¢ä¸‰ä¸ªalreadyéƒ½æ˜¯chunkçº§å¾ªç¯å¤–çš„ already_processed += 1 # ç´¯åŠ æ¯ä¸ªchunkå¸¦æ¥çš„å®ä½“æ•°é‡å’Œå…³ç³»æ•°é‡ already_entities += len(maybe_nodes) already_relations += len(maybe_edges) # PROMPTS[\u0026#34;process_tickers\u0026#34;] = [\u0026#34;â ‹\u0026#34;, \u0026#34;â ™\u0026#34;, \u0026#34;â ¹\u0026#34;, \u0026#34;â ¸\u0026#34;, \u0026#34;â ¼\u0026#34;, \u0026#34;â ´\u0026#34;, \u0026#34;â ¦\u0026#34;, \u0026#34;â §\u0026#34;, \u0026#34;â ‡\u0026#34;, \u0026#34;â \u0026#34;] now_ticks = PROMPTS[\u0026#34;process_tickers\u0026#34;][ already_processed % len(PROMPTS[\u0026#34;process_tickers\u0026#34;]) ] # æ‰“å°å¤„ç†äº†å¤šå°‘ä¸ªchunksï¼Œå·²ç»å¤„ç†äº†çš„å®ä½“å’Œå…³ç³» print( f\u0026#34;{now_ticks} Processed {already_processed} chunks, {already_entities} entities(duplicated), {already_relations} relations(duplicated)\\r\u0026#34;, end=\u0026#34;\u0026#34;, flush=True, ) # ç”±defaultdictè½¬å›dict return dict(maybe_nodes), dict(maybe_edges) æ›´æ–°å„å­˜å‚¨åŒº kv_store_doc_status.json\nkv_store_full_docs.json\nkv_store_Ilm_response_cache.json\nkv_store_text_chunks.json\nvdb_chunks.json\nvdb_entities.json\nvdb_relationships.json\nchunk_overlap_token_size\n1 chunk_overlap_token_size: int = 100 # vdbå­˜å‚¨ï¼Œä»¥å­˜å®ä½“æ•°æ®ä¸ºä¾‹\n1 2 3 4 5 6 7 8 9 10 11 # =====å­˜å®ä½“å‘é‡æ•°æ®===== if entity_vdb is not None: data_for_vdb = { compute_mdhash_id(dp[\u0026#34;entity_name\u0026#34;], prefix=\u0026#34;ent-\u0026#34;): { \u0026#34;content\u0026#34;: dp[\u0026#34;entity_name\u0026#34;] + dp[\u0026#34;description\u0026#34;], \u0026#34;entity_name\u0026#34;: dp[\u0026#34;entity_name\u0026#34;], } for dp in all_entities_data } # data_for_vdb: dict[str, dict] await entity_vdb.upsert(data_for_vdb) entity_vdb ä¸º NanoVectorDBStorageç±»ï¼ˆstorage.pyï¼‰ çš„å®ä¾‹åŒ–\nå…¶ .upsertæ–¹æ³•å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 async def upsert(self, data: dict[str, dict]): # æ—¥å¿—å’Œé•¿åº¦å¤„ç† logger.info(f\u0026#34;Inserting {len(data)} vectors to {self.namespace}\u0026#34;) if not len(data): logger.warning(\u0026#34;You insert an empty data to vector DB\u0026#34;) return [] # k1, v1ä¸ºdictä¸­çš„é”®å€¼å¯¹ str:str, ä»–ä»¬è¢«è§£åŒ…å‡ºæ¥ï¼Œæœ€ç»ˆlist_data=List[{str:str}] # å®ä½“vdbä¸­ list-dataä¸­æ¯ä¸ªå­—å…¸å…ƒç´ ä¸º # { # \u0026#34;__id__\u0026#34;: hash_id, # \u0026#34;content\u0026#34;: dp[\u0026#34;entity_name\u0026#34;] + dp[\u0026#34;description\u0026#34;] # \u0026#34;entity_name\u0026#34;: dp[\u0026#34;entity_name\u0026#34;] # } list_data = [ { \u0026#34;__id__\u0026#34;: k, **{k1: v1 for k1, v1 in v.items() if k1 in self.meta_fields}, } for k, v in data.items() ] # List[str] contents = [v[\u0026#34;content\u0026#34;] for v in data.values()] # List[List[32ä¸ªstr]] batches = [ contents[i : i + self._max_batch_size] for i in range(0, len(contents), self._max_batch_size) ] # æ¯æ‰¹32ä¸ªstrè¾“å…¥embedding_funcå¤„ç†æˆnp.array(32, dim)çš„å‘é‡æ•°æ® embedding_tasks = [self.embedding_func(batch) for batch in batches] embeddings_list = [] for f in tqdm_async( asyncio.as_completed(embedding_tasks), total=len(embedding_tasks), desc=\u0026#34;Generating embeddings\u0026#34;, unit=\u0026#34;batch\u0026#34;, ): embeddings = await f # embeddings_list: List[np.array(32,dim), np.array(32,dim)...] # (n,32,dim) embeddings_list.append(embeddings) # å°†å¤šä¸ªæ•°ç»„æ²¿ç€æŒ‡å®šçš„è½´ï¼ˆé»˜è®¤æ˜¯ç¬¬0è½´ï¼‰è¿æ¥ # (n,32,dim)-\u0026gt;(n*32,dim) æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ª(å®ä½“å+æè¿°)çš„vector embeddings = np.concatenate(embeddings_list) # { # \u0026#34;__id__\u0026#34;: hash_id, # \u0026#34;content\u0026#34;: dp[\u0026#34;entity_name\u0026#34;] + dp[\u0026#34;description\u0026#34;] # \u0026#34;entity_name\u0026#34;: dp[\u0026#34;entity_name\u0026#34;] # \u0026#34;__vector__\u0026#34;: np.array(dim) # } for i, d in enumerate(list_data): d[\u0026#34;__vector__\u0026#34;] = embeddings[i] # from nano_vectordb import NanoVectorDB # NanoVectorDB çš„ upsertæ–¹æ³•ï¼Œdataså…³é”®å­—ä¼ å…¥List[dict] # å°†List[dict]ä¸­å†…å®¹å†™åˆ°.jsonæ–‡ä»¶ä¸­å› ä¸ºä¹‹å‰çš„åˆ›å»ºï¼Œä»¥å®ƒå†…ç½®çš„æ–¹å¼ã€‚ results = self._client.upsert(datas=list_data) return results æé—®ï¼ˆQueryï¼‰ rag.query-\u0026gt;self.aquery\naqueryå†… åˆ†å››ç§æ¨¡å¼ï¼Œnaive å’Œ local global hybrid\nnaiveè¿›å…¥ naive_query å…¶ä»–ä¸‰ç§è¿›å…¥kg_query\n1 2 3 4 5 6 7 8 9 async def aquery(self, query: str, param: QueryParam = QueryParam()): if param.mode in [\u0026#34;local\u0026#34;, \u0026#34;global\u0026#34;, \u0026#34;hybrid\u0026#34;]: response = await kg_query(...) elif param.mode == \u0026#34;naive\u0026#34;: response = await naive_query(...) else: raise ValueError(f\u0026#34;Unknown mode {param.mode}\u0026#34;) await self._query_done() return response naiveï¼ˆæœ´ç´ ï¼‰ ç›´æ¥å°†query_vectorå’Œchunk_vectoråŒ¹é…ã€‚\nå°†æé—®strè½¬ä¸ºvectorï¼Œç„¶åå†chunks_vdbä¸­åŒ¹é…åˆ°â€œcosine_better_than_thresholdâ€çš„å‰60åä¸ªchunk_idï¼ˆå¦‚æœèƒ½åŒ¹é…åˆ°è¶…è¿‡60ä¸ªä½äºé˜ˆå€¼çš„ï¼‰ ç„¶åæ ¹æ® chunk_idå» text_chunks_dbé‡Œæ‰¾åˆ°strs æœ€åå°†strsåµŒå…¥promptè¾“å…¥LLM ä¹Ÿå°±æ˜¯ç›´æ¥å°†ä¸é—®å¥ç›¸ä¼¼çš„chunksä½œä¸ºè¾…åŠ©æ•°æ®è®©aiå›ç­”é—®é¢˜ï¼Œç›¸ä¼¼æ€§é€šè¿‡NanoVectorDBæä¾›çš„å‘é‡é‚»è¿‘ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ç”±embeddingå†³å®š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 async def naive_query( query, chunks_vdb: BaseVectorStorage, text_chunks_db: BaseKVStorage[TextChunkSchema], query_param: QueryParam, global_config: dict, ): \u0026#34;\u0026#34;\u0026#34; query: str param=QueryParam(mode=\u0026#34;naive\u0026#34;) chunks_vdb: embeddingåå­˜å…¥è¿™é‡Œï¼Œä¹Ÿæ˜¯å­—å…¸ä¸­åŒ…å« chunkçš„embedding text_chunks_db: åŸæ–‡å­—ç¬¦ä¸²å­˜å…¥è¿™é‡Œï¼Œå­—å…¸ç»“æ„ \u0026#34;\u0026#34;\u0026#34; use_model_func = global_config[\u0026#34;llm_model_func\u0026#34;] # ä¸€ã€å°†æé—®strè½¬ä¸ºvectorï¼Œç„¶åå†chunks_vdbä¸­åŒ¹é…åˆ°â€œcosine_better_than_thresholdâ€çš„chunk_id # è·å–æ’åå‰top_kä¸ªç›¸å…³æ–‡æœ¬å— # top_k: int = 60 results = await chunks_vdb.query(query, top_k=query_param.top_k) if not len(results): return PROMPTS[\u0026#34;fail_response\u0026#34;] chunks_ids = [r[\u0026#34;id\u0026#34;] for r in results] # äºŒã€ç„¶åæ ¹æ® chunk_idå» text_chunks_dbé‡Œæ‰¾åˆ°strs # chunks: List[str] chunks = await text_chunks_db.get_by_ids(chunks_ids) maybe_trun_chunks = truncate_list_by_token_size( chunks, key=lambda x: x[\u0026#34;content\u0026#34;], max_token_size=query_param.max_token_for_text_unit, ) logger.info(f\u0026#34;Truncate {len(chunks)} to {len(maybe_trun_chunks)} chunks\u0026#34;) # section:str = ï¼ˆæ¯”å¦‚ï¼‰ # \u0026#34;æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒ... # --New Chunk-- # æ·±åº¦ç¥ç»ç½‘ç»œé€šè¿‡å¤šå±‚éçº¿æ€§å˜æ¢... # --New Chunk-- # Transformeræ¶æ„åœ¨NLPé¢†åŸŸ...\u0026#34; section = \u0026#34;\\n--New Chunk--\\n\u0026#34;.join([c[\u0026#34;content\u0026#34;] for c in maybe_trun_chunks]) if query_param.only_need_context: return section # ä¸‰ã€æœ€åå°†strsåµŒå…¥promptè¾“å…¥LLM sys_prompt_temp = PROMPTS[\u0026#34;naive_rag_response\u0026#34;] sys_prompt = sys_prompt_temp.format( content_data=section, response_type=query_param.response_type ) if query_param.only_need_prompt: return sys_prompt response = await use_model_func( query, system_prompt=sys_prompt, ) if len(response) \u0026gt; len(sys_prompt): response = ( response[len(sys_prompt) :] .replace(sys_prompt, \u0026#34;\u0026#34;) .replace(\u0026#34;user\u0026#34;, \u0026#34;\u0026#34;) .replace(\u0026#34;model\u0026#34;, \u0026#34;\u0026#34;) .replace(query, \u0026#34;\u0026#34;) .replace(\u0026#34;\u0026lt;system\u0026gt;\u0026#34;, \u0026#34;\u0026#34;) .replace(\u0026#34;\u0026lt;/system\u0026gt;\u0026#34;, \u0026#34;\u0026#34;) .strip() ) return response localã€global and hybrid ï¼ˆå±€éƒ¨ï¼‰ï¼ˆå…¨å±€ï¼‰ï¼ˆæ··åˆï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 async def kg_query( query, knowledge_graph_inst: BaseGraphStorage, entities_vdb: BaseVectorStorage, relationships_vdb: BaseVectorStorage, text_chunks_db: BaseKVStorage[TextChunkSchema], query_param: QueryParam, global_config: dict, ) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34; query: str knowledge_graph_inst: NetworkXStorage \u0026#34;\u0026#34;\u0026#34; context = None example_number = global_config[\u0026#34;addon_params\u0026#34;].get(\u0026#34;example_number\u0026#34;, None) # 1/2/3 ä¸ª examples=å¤šä¸ªstrè¿æ¥ if example_number and example_number \u0026lt; len(PROMPTS[\u0026#34;keywords_extraction_examples\u0026#34;]): examples = \u0026#34;\\n\u0026#34;.join( PROMPTS[\u0026#34;keywords_extraction_examples\u0026#34;][: int(example_number)] ) else: examples = \u0026#34;\\n\u0026#34;.join(PROMPTS[\u0026#34;keywords_extraction_examples\u0026#34;]) language = global_config[\u0026#34;addon_params\u0026#34;].get( \u0026#34;language\u0026#34;, PROMPTS[\u0026#34;DEFAULT_LANGUAGE\u0026#34;] ) # check mode if query_param.mode not in [\u0026#34;local\u0026#34;, \u0026#34;global\u0026#34;, \u0026#34;hybrid\u0026#34;]: logger.error(f\u0026#34;Unknown mode {query_param.mode} in kg_query\u0026#34;) return PROMPTS[\u0026#34;fail_response\u0026#34;] # LLM generate keywords use_model_func = global_config[\u0026#34;llm_model_func\u0026#34;] kw_prompt_temp = PROMPTS[\u0026#34;keywords_extraction\u0026#34;] kw_prompt = kw_prompt_temp.format(query=query, examples=examples, language=language) # Output: # {{ # \u0026#34;high_level_keywords\u0026#34;: [\u0026#34;Education\u0026#34;, \u0026#34;Poverty reduction\u0026#34;, \u0026#34;Socioeconomic development\u0026#34;], # \u0026#34;low_level_keywords\u0026#34;: [\u0026#34;School access\u0026#34;, \u0026#34;Literacy rates\u0026#34;, \u0026#34;Job training\u0026#34;, \u0026#34;Income inequality\u0026#34;] # }} result = await use_model_func(kw_prompt, keyword_extraction=True) logger.info(\u0026#34;kw_prompt result:\u0026#34;) print(result) try: # json_text = locate_json_string_body_from_string(result) # handled in use_model_func keywords_data = json.loads(result) # List[str] hl_keywords = keywords_data.get(\u0026#34;high_level_keywords\u0026#34;, []) ll_keywords = keywords_data.get(\u0026#34;low_level_keywords\u0026#34;, []) # Handle parsing error except json.JSONDecodeError as e: print(f\u0026#34;JSON parsing error: {e} {result}\u0026#34;) return PROMPTS[\u0026#34;fail_response\u0026#34;] # Handdle keywords missing # å¦‚æœlocalï¼Œll_keywordså¿…ä¸º\u0026#34;kw1, kw2, ...\u0026#34; # å¦‚æœglobalï¼Œhl_keywordså¿…ä¸º\u0026#34;kw1, kw2, ...\u0026#34; # å¦‚æœhybridï¼ŒäºŒè€…éƒ½å¿…ä¸º\u0026#34;kw1, kw2, ...\u0026#34; if hl_keywords == [] and ll_keywords == []: logger.warning(\u0026#34;low_level_keywords and high_level_keywords is empty\u0026#34;) return PROMPTS[\u0026#34;fail_response\u0026#34;] if ll_keywords == [] and query_param.mode in [\u0026#34;local\u0026#34;, \u0026#34;hybrid\u0026#34;]: logger.warning(\u0026#34;low_level_keywords is empty\u0026#34;) return PROMPTS[\u0026#34;fail_response\u0026#34;] else: ll_keywords = \u0026#34;, \u0026#34;.join(ll_keywords) if hl_keywords == [] and query_param.mode in [\u0026#34;global\u0026#34;, \u0026#34;hybrid\u0026#34;]: logger.warning(\u0026#34;high_level_keywords is empty\u0026#34;) return PROMPTS[\u0026#34;fail_response\u0026#34;] else: hl_keywords = \u0026#34;, \u0026#34;.join(hl_keywords) # Build context # [\u0026#34;kw1, kw2, ...\u0026#34;, \u0026#34;kw1, kw2, ...\u0026#34;] keywords = [ll_keywords, hl_keywords] # query_param.modeæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¼šé€‰æ‹©ä¸åŒæ¨¡å¼ï¼Œè¿”å›çš„contextä¸ä¸€æ · # è²Œä¼¼éœ€è¦å…³é”®å­—å¯¹åº”å›¾ä¸­ç»“ç‚¹ï¼Œä¸‡ä¸€åŒä¹‰ä¸åŒè¯å’‹åŠï¼Œå­¦æ ¡/é™¢æ ¡ï¼Œå°±å¯¹åº”ä¸ä¸Šäº† # context:str = \u0026#34;\u0026#34;\u0026#34; -----Entities----- ```csv {entities_context} -----Relationships----- ```csv {relations_context} ``` -----Sources----- ```csv {text_units_context} ``` \u0026quot;\u0026quot;\u0026quot; # åŒ…å«äº†å®ä½“ã€å…³ç³»ã€ç›¸å…³chunks context = await _build_query_context( keywords, knowledge_graph_inst, entities_vdb, relationships_vdb, text_chunks_db, query_param, ) if query_param.only_need_context: return context if context is None: return PROMPTS[\u0026quot;fail_response\u0026quot;] sys_prompt_temp = PROMPTS[\u0026quot;rag_response\u0026quot;] sys_prompt = sys_prompt_temp.format( context_data=context, response_type=query_param.response_type ) if query_param.only_need_prompt: return sys_prompt response = await use_model_func( query, system_prompt=sys_prompt, ) if len(response) \u0026gt; len(sys_prompt): response = ( response.replace(sys_prompt, \u0026quot;\u0026quot;) .replace(\u0026quot;user\u0026quot;, \u0026quot;\u0026quot;) .replace(\u0026quot;model\u0026quot;, \u0026quot;\u0026quot;) .replace(query, \u0026quot;\u0026quot;) .replace(\u0026quot;\u0026lt;system\u0026gt;\u0026quot;, \u0026quot;\u0026quot;) .replace(\u0026quot;\u0026lt;/system\u0026gt;\u0026quot;, \u0026quot;\u0026quot;) .strip() ) return response ","date":"2025-04-01T00:00:00Z","permalink":"https://rooobeam.github.io/p/lightrag1.0.3%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/","title":"Lightrag1.0.3ä»£ç è§£è¯»"},{"content":"ç¬¬åç«  CALL å’Œ RETæŒ‡ä»¤ retã€retf ret â€”â€” return\tretf â€”â€” return far\nret å‡ºæ ˆå­—å•å…ƒ æ”¾å…¥IP\nç›¸å½“äº pop IP\nretf ç¬¬ä¸€æ¬¡å‡ºæ ˆ å­—å•å…ƒ æ”¾å…¥ IPï¼Œç¬¬äºŒæ¬¡å‡ºæ ˆ å­—å•å…ƒ æ”¾å…¥CSï¼Œç›¸å½“äº\npop IP\npop CS\næ ˆé‡Œï¼ŒCSæ€»åœ¨IPåº•ä¸‹\n|\t| | IP | | CS | |\u0026mdash;\u0026mdash;-|\nç»“åˆä¸Šåœ°å€æ¥è¯´ï¼ŒCSæ€»åœ¨IPçš„å³è¾¹ï¼ˆé«˜åœ°å€ï¼‰ï¼Œå› ä¸ºspå‹æ ˆä¼šä»é«˜åˆ°ä½èµ°ã€‚\nIP CS â€‹\tâ†‘ â€‹\tsp\nå‡ºæ ˆã€å‹æ ˆæ€»æ˜¯ä¸€ä¸ªå­—å•å…ƒ\nå®ç°ä»1000:0000å¤„å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤ï¼Œè°çŸ¥é“1000:0000å¤„æœ‰å•¥ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 assume cs:code stack segment db 16 dup (0) stack ends code segment start:\tmov ax, stack mov ss, ax mov sp, 16 mov ax, 1000h push ax mov ax, 00h push ax retf code ends call æ ‡å·å‹ call s (sæ˜¯æ ‡å·)ï¼ˆä½ç§»è½¬ç§»ï¼‰ï¼Œå°†å½“å‰IPå‹å…¥æ ˆï¼Œç„¶åè¿‘è½¬ç§»åˆ°sï¼Œç›¸å½“äº\npush IP\njmp near ptr s(æ ‡å·)\n1000:3å¤„æŒ‡ä»¤ä¸ºcall sï¼Œså¤„å†…å®¹ä¸ºs:pop ax\næ‰§è¡Œå®Œè¿™ä¸¤æ¡æŒ‡ä»¤åï¼Œaxæ•°å€¼ä¸º 3\ncall far ptr sï¼ˆæ ‡å·ï¼‰ï¼Œå…ˆå°†CSå‹å…¥æ ˆï¼Œå†å°†IPå‹æ ˆï¼Œç„¶åè¿œè½¬ç§»åˆ°sï¼Œç›¸å½“äº\npush CS\npush IP\njmp far ptr s(æ ‡å·)\nå¯„å­˜å™¨å‹ call 16ä½regï¼Œå‹æ ˆIPï¼ŒIP=(reg)\npush IP\njmp 16ä½reg\nå†…å­˜å•å…ƒå‹ call word ptr å†…å­˜å•å…ƒåœ°å€ï¼Œåœ°å€å–å‡ºå†…å®¹å¤§å°ä¸ºå­—å•å…ƒï¼Œä»…å‹æ ˆIPï¼Œç›¸å½“äº\npush IP\njmp word ptr å¦‚es:[bx]\ncall dword ptr å†…å­˜å•å…ƒåœ°å€ï¼Œåœ°å€å–å‡ºå†…å®¹å¤§å°ä¸ºåŒå­—ï¼Œå…ˆå‹æ ˆCSå†å‹æ ˆIPï¼Œç›¸å½“äº\npush CS\npush IP\njmp dword ptr å¦‚es:[bx]\ncallå’Œretå®ç°æ¨¡å—åŒ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 assume cs:code stack segment db 8 dup (0) db 8 dup (0) stack ends code segment start: mov ax, stack mov ss, ax mov sp, 16 mov ax, 1000h call s mov ax, 4c00h int 21h s: add ax,ax ret code ends end start mulæŒ‡ä»¤ å®éªŒ10 1.æ˜¾ç¤ºå­—ç¬¦ä¸² æˆ‘çš„é”™è¯¯âŒï¼š\nå¤–éƒ¨çš„dlä¸º3è¡¨ç¤ºç¬¬ä¸‰åˆ—ï¼Œå¯¹åº”å­—èŠ‚æ—¶è¦ä¹˜äºŒï¼Œç¬¬6ä¸ªå­—ç¬¦ jcxzç»“åˆjmpä½¿ç”¨ï¼Œä¸è¦ç»“åˆloopä½¿ç”¨ï¼Œloopä¼šæ”¹å˜cxï¼ï¼Œå…ˆå‡cx1å†åˆ¤æ–­cxå€¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 assume cs:code data segment db \u0026#39;Welcome to masm!\u0026#39;,0 data ends code segment start: mov dh, 8h mov dl, 3h mov cl, 2h mov ax, data mov ds, ax mov si, 0 call show_str mov ax, 4c00h int 21h show_str: ;--------------------ä»¥ä¸Šä¸ºç»™å®šï¼Œä»¥ä¸‹ä¸ºä½œç­”------------------- ;===set print sreg=== mov ax, 0b800h mov es, ax ;===set print reg=== ;di=a0h*dh+dl*2 ;a0h*dh mov al, 0a0h mul dh ;+2*dl mov dh, 00h add ax, dx add ax, dx mov di, ax ;===print to es:di=== ;save cl mov bl, cl s: ;check if end mov cl, ds:[si] mov ch, 0h jcxz fin mov es:[di], cl mov es:[di+1], bl add di, 02h add si, 01h jmp s fin: ret code ends end start ","date":"2025-03-31T00:00:00Z","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E5%8D%81%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬åç« "},{"content":"networkx.Graph ç±»å¸¸è§æ–¹æ³•å’Œå±æ€§ ç›®å½• 1. åˆå§‹åŒ–å›¾ 2. æ·»åŠ èŠ‚ç‚¹ 3. æ·»åŠ è¾¹ 4. åˆ é™¤èŠ‚ç‚¹/è¾¹ 5. æ£€æŸ¥å­˜åœ¨æ€§ 6. åŸºæœ¬å±æ€§ 7. èŠ‚ç‚¹ä¸è¾¹çš„å±æ€§ 8. å›¾çš„æ“ä½œ 9. èŠ‚ç‚¹é‚»å±…ä¸åº¦æ•° 10. ç¤ºä¾‹ä»£ç  1. åˆå§‹åŒ–å›¾ 1 2 import networkx as nx G = nx.Graph() # åˆ›å»ºç©ºçš„æ— å‘å›¾ 2. æ·»åŠ èŠ‚ç‚¹ 1 2 3 4 5 # æ·»åŠ å•ä¸ªèŠ‚ç‚¹ï¼ˆå¸¦å±æ€§ï¼‰ G.add_node(1, color=\u0026#39;red\u0026#39;, size=10) # æ‰¹é‡æ·»åŠ èŠ‚ç‚¹ èŠ‚ç‚¹2ã€3å…±ç”¨å±æ€§ G.add_nodes_from([2, 3], category=\u0026#39;A\u0026#39;) 3. æ·»åŠ è¾¹ 1 2 3 4 5 6 7 8 # æ·»åŠ å•æ¡è¾¹ï¼ˆå¸¦æƒé‡ï¼‰ G.add_edge(1, 2, weight=4.7) # æ‰¹é‡æ·»åŠ è¾¹ G.add_edges_from([(1, 3), (2, 3)], type=\u0026#39;friendship\u0026#39;) # æ‰¹é‡æ·»åŠ å¸¦æƒé‡çš„è¾¹ G.add_weighted_edges_from([(1, 2, 0.5), (2, 3, 0.8)]) 4. åˆ é™¤èŠ‚ç‚¹/è¾¹ 1 2 3 4 5 6 7 # åˆ é™¤èŠ‚ç‚¹ G.remove_node(1) G.remove_nodes_from([2, 3]) # åˆ é™¤è¾¹ G.remove_edge(1, 2) G.remove_edges_from([(1, 2), (2, 3)]) 5. æ£€æŸ¥å­˜åœ¨æ€§ 1 2 G.has_node(1) # è¿”å›å¸ƒå°”å€¼ G.has_edge(1,2) # è¿”å›å¸ƒå°”å€¼ 6. åŸºæœ¬å±æ€§ 1 2 3 4 5 6 7 8 9 10 11 12 13 # èŠ‚ç‚¹å’Œè¾¹è§†å›¾ list(G.nodes) # [1, 2, 3] list(G.edges(data=\u0026#39;weight\u0026#39;)) # è¾¹åŠå±æ€§ # é‚»æ¥å­—å…¸ G.adj[1] # è¾“å‡º: {2: {\u0026#39;weight\u0026#39;: 0.5}} # å…¨å±€å±æ€§ G.graph[\u0026#39;name\u0026#39;] = \u0026#39;My Graph\u0026#39; # ç»Ÿè®¡æ–¹æ³• G.number_of_nodes() # èŠ‚ç‚¹æ€»æ•° G.number_of_edges() # è¾¹æ€»æ•° 7. èŠ‚ç‚¹ä¸è¾¹çš„å±æ€§ 1 2 3 4 5 6 7 8 9 10 # èŠ‚ç‚¹å±æ€§æ“ä½œï¼Œå…ˆè¦ä¿è¯ 1 ç»“ç‚¹å­˜åœ¨ G.nodes[1][\u0026#39;color\u0026#39;] = \u0026#39;blue\u0026#39; G.nodes.add(2, \u0026#39;color\u0026#39; = \u0026#39;blue\u0026#39;) color = G.nodes[1].get(\u0026#39;color\u0026#39;, \u0026#39;default\u0026#39;) color = G.nodes.get(1, \u0026#39;color\u0026#39;, \u0026#39;default\u0026#39;) # è¾¹å±æ€§æ“ä½œ G.edges[1, 2][\u0026#39;weight\u0026#39;] = 5.0 weight = G.edges[1, 2].get(\u0026#39;weight\u0026#39;, 1.0) æ³¨æ„ç‚¹ï¼š\nè¯­æ³•ç­‰æ•ˆæ€§ï¼šå±æ€§å colorï¼ˆå…³é”®å­—å‚æ•°ï¼‰å’Œ 'color'ï¼ˆå­—å…¸é”®ï¼‰æœ¬è´¨æ˜¯åŒä¸€ä¸ªå±æ€§ã€‚\nå®‰å…¨æ“ä½œï¼šç”¨ G.nodes.get(2, {}) å¯é¿å…å¼‚å¸¸ã€‚\n1 2 3 4 5 6 7 8 9 import networkx as nx # åˆ›å»ºå›¾å¹¶æ·»åŠ èŠ‚ç‚¹ï¼ˆä¸¤ç§ç­‰æ•ˆæ–¹å¼ï¼‰ G = nx.Graph() G.add_node(2, color=\u0026#39;blue\u0026#39;) # è®¿é—®å±æ€§ï¼ˆéœ€ç¡®ä¿èŠ‚ç‚¹å’Œå±æ€§åæ­£ç¡®ï¼‰ï¼Œç”¨\u0026#39;color\u0026#39;è®¿é—® print(G.nodes[2][\u0026#39;color\u0026#39;]) # \u0026#39;blue\u0026#39; print(G.nodes.get(2,\u0026#39;color\u0026#39;) # \u0026#39;blue\u0026#39; 8. å›¾çš„æ“ä½œ 1 2 3 G.clear() # æ¸…ç©ºå›¾ï¼ˆä¿ç•™å±æ€§ï¼‰ G.copy() # æ·±æ‹·è´å›¾ subG = G.subgraph([1, 2]) # ç”Ÿæˆå­å›¾ 9. èŠ‚ç‚¹é‚»å±…ä¸åº¦æ•° 1 2 list(G.neighbors(1)) # è¿”å›é‚»å±…åˆ—è¡¨ G.degree(1) # è¿”å›èŠ‚ç‚¹åº¦æ•° 10. ç¤ºä¾‹ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import networkx as nx # åˆ›å»ºå›¾ G = nx.Graph(name=\u0026#34;ç¤ºä¾‹å›¾\u0026#34;) G.add_nodes_from([1, 2, 3], category=\u0026#39;sample\u0026#39;) G.add_edges_from([(1, 2), (2, 3)], weight=1.0) # è®¾ç½®å±æ€§ G.nodes[1][\u0026#39;color\u0026#39;] = \u0026#39;red\u0026#39; G.edges[1, 2][\u0026#39;weight\u0026#39;] = 2.5 # è¾“å‡ºä¿¡æ¯ print(\u0026#34;èŠ‚ç‚¹åˆ—è¡¨:\u0026#34;, list(G.nodes)) print(\u0026#34;è¾¹åˆ—è¡¨:\u0026#34;, list(G.edges(data=True))) print(\u0026#34;èŠ‚ç‚¹1çš„é‚»å±…:\u0026#34;, list(G.neighbors(1))) print(\u0026#34;èŠ‚ç‚¹1çš„åº¦æ•°:\u0026#34;, G.degree(1)) æ³¨æ„äº‹é¡¹\nè¾¹æ“ä½œä¼šè‡ªåŠ¨æ·»åŠ ä¸å­˜åœ¨çš„èŠ‚ç‚¹ èŠ‚ç‚¹æ”¯æŒä»»æ„å¯å“ˆå¸Œå¯¹è±¡ï¼ˆå¦‚å…ƒç»„ã€å­—ç¬¦ä¸²ï¼‰ æ‰¹é‡æ“ä½œæ¯”é€æ¡æ“ä½œæ›´é«˜æ•ˆ ","date":"2025-03-28T20:03:22+08:00","permalink":"https://rooobeam.github.io/p/networkx.graph%E7%B1%BB/","title":"Networkx.Graphç±»"},{"content":".pop(self,index)æ–¹æ³• 1 2 3 a=[1,2,3] a.pop(1) print(a)\t# [1,3] å‡½æ•°ä¼ å®å‚è¿˜æ˜¯å½¢å‚é—®é¢˜ åœ¨ Python ä¸­ï¼Œå‚æ•°ä¼ é€’å§‹ç»ˆæ˜¯ å¼•ç”¨ä¼ é€’ï¼ˆä¼ åœ°å€çš„ï¼‰ã€‚ä½†æ ¹æ®å¯¹è±¡ç±»å‹ï¼ˆå¯å˜/ä¸å¯å˜ï¼‰çš„ä¸åŒï¼Œä¼šäº§ç”Ÿç±»ä¼¼ã€Œå€¼ä¼ é€’ã€æˆ–ã€Œå¼•ç”¨ä¼ é€’ã€çš„è¡¨è±¡ï¼š\nç»“è®ºï¼šçœ‹å¯¹è±¡ç±»å‹\nä¸å¯å˜å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å…ƒç»„ç­‰ï¼‰ä½œä¸ºå‚æ•°æ—¶ï¼š å½¢å‚æ¥æ”¶åˆ°çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ è‹¥åœ¨å‡½æ•°å†…ä¿®æ”¹å½¢å‚ï¼Œä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå®å‚ä¸å—å½±å“ï¼ˆç±»ä¼¼å€¼ä¼ é€’ï¼‰ nonlocalå£°æ˜å®ç°è®¿é—®å¤–éƒ¨å˜é‡ï¼Ÿ å¯å˜å¯¹è±¡ï¼ˆåˆ—è¡¨ã€å­—å…¸ã€é›†åˆç­‰ï¼‰ä½œä¸ºå‚æ•°æ—¶ï¼š å½¢å‚æ¥æ”¶åˆ°çš„ä¹Ÿæ˜¯å¯¹è±¡çš„å¼•ç”¨ è‹¥åœ¨å‡½æ•°å†… åŸåœ°ä¿®æ”¹ å½¢å‚ï¼ˆå¦‚ appendã€+= ç­‰æ“ä½œï¼‰ï¼Œå®å‚ä¼šåŒæ­¥å˜åŒ–ï¼ˆç±»ä¼¼å¼•ç”¨ä¼ é€’ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 def f(obj): # ä¿®æ”¹å½¢å‚ obj += obj # ä¸å¯å˜å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ï¼‰ obj1 = \u0026#34;123456\u0026#34; demo(obj1) print(\u0026#34;å‡½æ•°è°ƒç”¨åobj1:\u0026#34; + obj1) # 123456ï¼ˆæœªå˜ï¼‰ # å¯å˜å¯¹è±¡ï¼ˆåˆ—è¡¨ï¼‰ obj2 = [1,2,3] demo(obj2) print(\u0026#34;å‡½æ•°è°ƒç”¨åobj2:\u0026#34; + str(obj2)) # [1,2,3,1,2,3]ï¼ˆå·²å˜ï¼‰ pychram æ¥å›æŸ¥çœ‹ä»£ç  pycharmä¼šç”¨ctrl+é¼ æ ‡å·¦é”®ç‚¹å‡»å‡½æ•°æ¥è¿›å…¥å‡½æ•°ä½“æŸ¥çœ‹å‡½æ•°å…·ä½“å®ç°éƒ¨åˆ†ã€‚ä½†æ˜¯æˆ‘å¸¸å¸¸ç‚¹å‡»åå°±å›ä¸æ¥äº†ï¼Œä¸åŒæ–‡ä»¶çš„å‡½æ•°è°ƒç”¨æ¥å›æ‰¾è®©äººå¤´å¤§ã€‚\nå¯ä»¥æ¥å›çš„æ–¹æ³•æ˜¯ï¼š\nctrl+alt+å·¦æ–¹å‘é”®(â†) åé€€(å›é€€å›åŸæ¥ä½ç½®, ä¸è¡Œå°±å¤šæ‘å‡ æ¬¡ï¼Œå› ä¸ºå…‰æ ‡ç‚¹å‡»çš„åœ°æ–¹å¥½åƒä¹Ÿä¼šè®°å½•)\nctrl+alt+å³æ–¹å‘é”®(â†’) å‰è¿›(å³å›åˆ°åˆšæ‰ç‚¹å‡»çš„å‡½æ•°ä½ç½®)\nå‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/shmily_ke/article/details/136975710\nfor _ in range(len(queue)) ä¸‹åˆ’çº¿ \u0026lsquo;_\u0026rsquo;ï¼š_ æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œè¡¨ç¤ºâ€œæˆ‘ä¸å…³å¿ƒè¿™ä¸ªç´¢å¼•å€¼â€\nlen(queue)å¿½ç•¥å¾ªç¯ä¸­queueæœ¬èº«çš„å˜åŒ–\nç‰¹æ€§ for _ in range(len(queue)) for _ in queue éå†æ–¹å¼ åŸºäºç´¢å¼•ï¼ŒèŒƒå›´å›ºå®š åŠ¨æ€è·Ÿè¸ªå˜åŒ– q å¢åŠ å…ƒç´  ä¸ä¼šéå†åˆ°æ–°æ·»åŠ çš„å…ƒç´  å¯èƒ½ä¼šéå†åˆ°æ–°æ·»åŠ çš„å…ƒç´  **q åˆ é™¤å…ƒç´  ** å¯èƒ½å¯¼è‡´ç´¢å¼•è¶Šç•Œ å¯èƒ½å¯¼è‡´è·³è¿‡å…ƒç´ æˆ–æå‰ç»“æŸ 103. äºŒå‰æ ‘çš„é”¯é½¿å½¢å±‚åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nå¯¹æ¯”æˆ‘çš„ä»£ç å’Œé¢˜è§£ä»£ç å¦‚ä¸‹ï¼š\næˆ‘çš„è¿˜è¦ç”¨cntè®°å½•ä¸‹ä¸€å±‚çš„ç»“ç‚¹ä¸ªæ•°ï¼Œå®ƒåªéœ€è¦for _ in range(len(queue))ä¸­çš„len(queue)å°±èƒ½ä¿ç•™ä¸€å±‚çš„å€¼ç„¶åå¾ªç¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Solution: def zigzagLevelOrder(self, root: Optional[TreeNode]) -\u0026gt; List[List[int]]: if not root: return [] res, queue = [], collections.deque() queue.append(root) while queue: tmp = [] for _ in range(len(queue)): node = queue.popleft() tmp.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) res.append(tmp[::-1] if len(res) % 2 else tmp) return res é“¾æ¥ï¼šhttps://leetcode.cn/problems/binary-tree-zigzag-level-order-traversal/solutions/2361613/103-er-cha-shu-de-ju-chi-xing-ceng-xu-bi-qz2q/ éƒ¨åˆ† å¯è¿­ä»£å‹æ•°æ® é€†åº list.reverse() reversed(iterable) list[::-1]â€”â€”éœ€è¦å¯¹è±¡æœ‰__getitem__ï¼Œæœ€å¥½ç”¨ ç‰¹æ€§ reverse() reversed() [::-1] â€ŒåŠŸèƒ½â€Œ åŸåœ°åè½¬åˆ—è¡¨ è¿”å›åè½¬åçš„è¿­ä»£å™¨ è¿”å›åè½¬åçš„æ–°å¯¹è±¡ â€Œé€‚ç”¨å¯¹è±¡â€Œ ä»…åˆ—è¡¨ï¼ˆlistï¼‰ æ‰€æœ‰å¯è¿­ä»£å¯¹è±¡ï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰ æ‰€æœ‰æ”¯æŒåˆ‡ç‰‡çš„æœ‰åºåºåˆ—ï¼ˆåˆ—è¡¨ã€å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰ï¼‰ â€Œè¿”å›å€¼â€Œ None è¿­ä»£å™¨ åè½¬åçš„æ–°å¯¹è±¡ â€Œå†…å­˜æ•ˆç‡â€Œ é«˜ï¼ˆåŸåœ°æ“ä½œï¼Œä¸ç”Ÿæˆæ–°å¯¹è±¡ï¼‰ é«˜ï¼ˆè¿”å›è¿­ä»£å™¨ï¼Œä¸ç”Ÿæˆå®Œæ•´å‰¯æœ¬ï¼‰ ä½ï¼ˆç”Ÿæˆå®Œæ•´å‰¯æœ¬ï¼Œå ç”¨é¢å¤–å†…å­˜ï¼‰ â€Œæ—¶é—´å¤æ‚åº¦â€Œ O(n)ï¼ˆç›´æ¥äº¤æ¢å…ƒç´ ï¼‰ O(1)ï¼ˆå»¶è¿Ÿè®¡ç®—ï¼Œå®é™…éå†æ—¶ O(n)ï¼‰ O(n)ï¼ˆå¤åˆ¶æ‰€æœ‰å…ƒç´ ï¼‰ â€Œä¿®æ”¹åŸæ•°æ®â€Œ âœ… æ˜¯ âŒ å¦ âŒ å¦ â€Œæ”¯æŒé“¾å¼æ“ä½œâ€Œ âŒ å¦ï¼ˆè¿”å› Noneï¼‰ âœ… æ˜¯ï¼ˆå¯ä¸ list()ã€join() ç­‰ç»“åˆï¼‰ âœ… æ˜¯ï¼ˆç›´æ¥ç”Ÿæˆæ–°å¯¹è±¡ï¼‰ for key in dic_1 if key in dic_2 1 2 3 4 5 6 dic_1={\u0026#39;a\u0026#39;:1,\u0026#39;b\u0026#39;:2,\u0026#39;c\u0026#39;:3} dic_2={\u0026#39;b\u0026#39;:2} dic_3 = { key: dic_1[key] for key in dic_1 if key in dic_2 } print(dic_3)\t# {\u0026#39;b\u0026#39;: 2} å£°æ˜å¤šä¸ªå…¨å±€å˜é‡ é€—å· éš”å¼€ï¼Œâ€œ \\ â€è¿æ¥ä¸‹ä¸€è¡Œ\n1 2 3 4 5 6 7 8 9 10 global \\ _manager, \\ is_multiprocess, \\ _storage_lock, \\ _internal_lock, \\ _pipeline_status_lock, \\ _shared_dicts, \\ _init_flags, \\ _initialized, \\ _update_flags å­—å…¸ .joinæ–¹æ³• 1 2 3 4 5 content = \u0026#34;æ•°æ®1|æ•°æ®2#æ•°æ®3@éœ€è¦ä¿ç•™çš„+ç¬¦å·+æ•°æ®4\u0026#34; markers = [\u0026#34;|\u0026#34;, \u0026#34;#\u0026#34;, \u0026#34;@\u0026#34;, \u0026#34;+\u0026#34;] results = re.split(\u0026#34;|\u0026#34;.join(re.escape(marker) for marker in markers), content) print(results) dataclasses dataclasses çš„ dataclass, field\npycharmä¹¦ç­¾åŠŸèƒ½ æŒ‰ F11 å¯¹å…‰æ ‡é‚£è¡Œç”Ÿæˆä¹¦ç­¾\npycharmå…³è­¦å‘Š å³ä¸Šè§’æœ‰ é»„è‰²ä¸‰è§’å½¢è­¦å‘Šå›¾æ ‡âš  ç›´æ¥é¼ æ ‡æ”¾ç½®âš å¤„ ä¼šè‡ªåŠ¨æ˜¾ç¤º å¦‚ â€œ 25ä¸ªè­¦å‘Šï¼Œ3ä¸ªå¼±è­¦å‘Š é«˜äº®æ˜¾ç¤ºï¼šæ‰€æœ‰é—®é¢˜ â€ ç‚¹å‡» é«˜äº®æ˜¾ç¤ºï¼šæ‰€æœ‰é—®é¢˜ å¼¹å‡ºâ€œæ—  è¯­æ³• æ‰€æœ‰é—®é¢˜â€ï¼Œç‚¹å‡» æ—  å³å¯ã€‚ func(*args,**kwargs) å‡½æ•°å®šä¹‰ä¸­ï¼Œå¯ä»¥æœ‰ä¸€ä¸ª *args å’Œ ä¸€ä¸ª **kwargs å‚æ•°ï¼Œargs å’Œ kwargs æ˜¯çº¦å®šä¿—æˆçš„å‚æ•°å‘½åã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥func(*a,**b)\næˆ‘çš„ç†è§£ï¼š\nargsæ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œ*argsæ˜¯è§£åŒ…ï¼Œå³ æœªçŸ¥å…ƒç»„(a,b\u0026hellip;) è§£åŒ…æˆ a,b\u0026hellip; æ”¾åˆ°funcçš„æ‹¬å·é‡Œï¼Œå˜æˆ func(a,b\u0026hellip;) kwargsæ˜¯ä¸€ä¸ªå­—å…¸æœªçŸ¥å­—å…¸{a: b, c: d\u0026hellip;}ï¼Œè§£åŒ…æ”¾funcé‡Œï¼Œå˜æˆ func(a=b, c=d\u0026hellip;) ä½¿ç”¨å¼ç†è§£ï¼š\n*func(fixed_arg, args, obvious_kwarg=123, **kwargs)ä¸­\nfixed_arg ä¼ é€’ï¼šå®ƒæ˜¯å›ºå®šä½ç½®å‚æ•°ï¼Œæ²¡æœ‰é»˜è®¤å€¼ã€‚ *args æ¥æ”¶æ‰€æœ‰å¤šä½™çš„ä½ç½®å‚æ•°ï¼šæ‰€æœ‰æœªè¢« fixed_arg æ¥æ”¶çš„ä½ç½®å‚æ•°éƒ½ä¼šè¢«æ‰“åŒ…åˆ° *argsã€‚ obvious_kwarg æ˜¯ä»…é™å…³é”®å­—å‚æ•°ï¼šå®ƒåªèƒ½é€šè¿‡å…³é”®å­—ä¼ é€’ï¼Œä¸èƒ½é€šè¿‡ä½ç½®ä¼ é€’ã€‚ **kwargs æ¥æ”¶æ‰€æœ‰å¤šä½™çš„å…³é”®å­—å‚æ•°ï¼šæ‰€æœ‰æœªè¢« fixed_argã€*args å’Œ obvious æ¥æ”¶çš„å…³é”®å­—å‚æ•°éƒ½ä¼šè¢«æ‰“åŒ…åˆ° **kwargsã€‚ 1 2 3 4 5 6 7 def func(fixed_arg, *args, obvious_kwarg=123, **kwargs): print(f\u0026#34;ä½ç½®å‚æ•°: {fixed_arg}\u0026#34;)\t# 10 print(f\u0026#34;å¤šä½™çš„ä½ç½®å‚æ•°: {args}\u0026#34;)\t# (20, 30) print(f\u0026#34;æ˜¾å¼ä¼ é€’çš„å…³é”®å­—å‚æ•°: {obvious_kwarg}\u0026#34;)\t# 60 print(f\u0026#34;å¯å˜å…³é”®å­—å‚æ•°: {kwargs}\u0026#34;)\t# {\u0026#39;x\u0026#39;: 40, \u0026#39;y\u0026#39;: 50} func(10, 20, 30, x=40, y=50, obvious_kwarg=60) [a:b]ä¸åŒ…å«ç¬¬bä¸ªå…ƒç´  [a:b]ä¸åŒ…å«ç¬¬bä¸ªå…ƒç´ ï¼Œæ²¡äº†\né¢˜ç›®ï¼šå¡«ç©ºï¼Œsæ˜¯ä¸ªstrï¼Œé•¿åº¦\u0026gt;1ï¼Œè·å–å…¶å‰ç¼€ï¼Œå¦‚\u0026quot;123 -\u0026gt; 1 12 123\u0026quot;\ns_arr=[s[ __ ] for i in range( ___ )]\n1 2 3 4 s=\u0026#34;123\u0026#34; # :i è¡¨ç¤º 0:iï¼Œä¸åŒ…å«å…ƒç´ [i]ï¼Œæ‰€ä»¥è‹¥è¦åŒ…æ‹¬å…ƒç´ [len(s)-1]ï¼Œi èŒƒå›´ä¸º 1~len(s)ï¼Œrangeè¦äº§ç”Ÿ1~len(s)ï¼Œåˆ™range(1,len(s)+1) s_arr=[s[:i] for i in range(1, len(s)+1)] print(s_arr) from collections import defaultdict ç›´è¯‘ â€”â€” æœ‰é»˜è®¤çš„ å€¼ çš„å­—å…¸\n1 2 3 4 5 6 7 8 9 10 11 from collections import defaultdict maybe_nodes = defaultdict(list) # è®¿é—®ä¸å­˜åœ¨çš„é”® \u0026#34;A\u0026#34;ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ maybe_nodes[\u0026#34;A\u0026#34;].append(1) maybe_nodes[\u0026#34;A\u0026#34;].append(2) # è®¿é—®ä¸å­˜åœ¨çš„é”® \u0026#34;B\u0026#34;ï¼ŒåŒæ ·ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ maybe_nodes[\u0026#34;B\u0026#34;].append(3) print(maybe_nodes) # defaultdict(\u0026lt;class \u0026#39;list\u0026#39;\u0026gt;, {\u0026#39;A\u0026#39;: [1, 2], \u0026#39;B\u0026#39;: [3]}) .extend å¯¹æ¯”.extendå’Œ.append\n1 2 3 4 5 6 7 8 9 10 11 base_list = [1, 2, 3] to_add = [4, 5] # ä½¿ç”¨ append base_list.append(to_add) print(base_list) # è¾“å‡º [1, 2, 3, [4, 5]] â†’ æ•´ä¸ªåˆ—è¡¨è¢«å½“ä½œä¸€ä¸ªå…ƒç´ æ·»åŠ  # ä½¿ç”¨ extend base_list = [1, 2, 3] base_list.extend(to_add) print(base_list) # è¾“å‡º [1, 2, 3, 4, 5] â†’ é€ä¸ªå…ƒç´ åˆå¹¶ pycharmæŠ˜å ã€å±•å¼€ æŠ˜å æ‰€æœ‰ä»£ç \tCtrl Shift -\nå±•å¼€æ‰€æœ‰ä»£ç \tCtrl Shift +\næŠ˜å å…‰æ ‡æ‰€åœ¨å±‚æ‰€æœ‰å¯æŠ˜å ä»£ç (truncate)\tCtrl Alt -\nå±•å¼€å…‰æ ‡æ‰€åœ¨å±‚æ‰€æœ‰å¯æŠ˜å ä»£ç (truncate)\tCtrl Alt +\næŠ˜å å…‰æ ‡æ‰€åœ¨å±‚\tCtrl -\nå¼€å…‰æ ‡æ‰€åœ¨å±‚\tCtrl +\næç¤ºè¯å·¥ç¨‹ä»£ç ä¾‹å­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 async def _handle_entity_relation_summary( entity_or_relation_name: str, description: str, global_config: dict, ) -\u0026gt; str: use_llm_func: callable = global_config[\u0026#34;llm_model_func\u0026#34;] llm_max_tokens = global_config[\u0026#34;llm_model_max_token_size\u0026#34;] tiktoken_model_name = global_config[\u0026#34;tiktoken_model_name\u0026#34;] summary_max_tokens = global_config[\u0026#34;entity_summary_to_max_tokens\u0026#34;] language = global_config[\u0026#34;addon_params\u0026#34;].get( \u0026#34;language\u0026#34;, PROMPTS[\u0026#34;DEFAULT_LANGUAGE\u0026#34;] ) # description=dsri_1\u0026lt;SEP\u0026gt;dsri_2\u0026lt;SEP\u0026gt;... # è·å–æè¿°çš„tokenså¹¶åˆ¤æ–­æ˜¯å¦è¦æ€»ç»“ tokens = encode_string_by_tiktoken(description, model_name=tiktoken_model_name) if len(tokens) \u0026lt; summary_max_tokens: # No need for summary return description # å°†å¤šä¸ªdsri æ€»ç»“æˆä¸€ä¸ªç»¼åˆçš„ prompt_template = PROMPTS[\u0026#34;summarize_entity_descriptions\u0026#34;] # ä¿è¯åœ¨llmæœ€å¤§tokensé™åˆ¶ä¸‹ use_description = decode_tokens_by_tiktoken( tokens[:llm_max_tokens], model_name=tiktoken_model_name ) # description_list: dsri_1\u0026lt;SEP\u0026gt;dsri_2\u0026lt;SEP\u0026gt; è¢«\u0026lt;SEP\u0026gt;åˆ†å‰² context_base = dict( entity_name=entity_or_relation_name, description_list=use_description.split(GRAPH_FIELD_SEP), language=language, ) use_prompt = prompt_template.format(**context_base) logger.debug(f\u0026#34;Trigger summary: {entity_or_relation_name}\u0026#34;) summary = await use_llm_func(use_prompt, max_tokens=summary_max_tokens) return summary pycharmä¸€ç›´æ˜¾ç¤ºæ­£åœ¨å…³é—­é¡¹ç›® pycharmå…³é—­åä¸€ç›´æ˜¾ç¤ºæ­£åœ¨å…³é—­é¡¹ç›®çš„è§£å†³æ–¹æ³•-CSDNåšå®¢\n","date":"2025-03-24T00:00:00Z","permalink":"https://rooobeam.github.io/p/py_coding_tricks/","title":"Py_coding_tricks"},{"content":"ç›®å½• ç›®å½•ç»“æ„ - - - - abs dict help minã€max setattrã€getattr all_any dir hexã€oct next slice divmod id object sorted ascii enumerate input staticmethod bin open eval int str bool exec isinstance ordã€chr sum bytes bytearray filter issubclass pow super float iter print tuple callable formatã€f-string len property type set frozenset list range classmethod repr zip map reversed import_module complex hasattr - abs abs(x) è¿”å›æ•°å­—çš„ç»å¯¹å€¼ã€‚ x å¯ä»¥æ˜¯æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå¤æ•°ï¼›å¦‚æœæ˜¯å¤æ•°ï¼Œåˆ™è¿”å›å®ƒçš„å¤§å°ã€‚\n1 2 3 4 a=abs(-50) print(a) b=abs(3 + 4j ) print(b) dict class dict(**kwarg) ç­‰å·æ¨¡å¼ class dict(mapping, **kwarg) zipæ¨¡å¼ class dict(iterable, **kwarg) äºŒå…ƒç»„åˆ—è¡¨ ä¸»è¦æ˜¯zipæ¨¡å¼å’ŒäºŒå…ƒå…ƒç»„æ¨¡å¼\n1 2 3 4 5 6 7 8 9 x = dict() # åˆ›å»ºç©ºå­—å…¸{} y = dict(a=\u0026#39;a\u0026#39;, b=\u0026#39;b\u0026#39;, t=\u0026#39;t\u0026#39;) # ä¼ å…¥å…³é”®å­—ï¼Œç­‰äºå·æ¨¡å¼ z = dict(zip([\u0026#39;one\u0026#39;, \u0026#39;two\u0026#39;, \u0026#39;three\u0026#39;], [1, 2, 3])) # æ˜ å°„å‡½æ•°æ–¹å¼ï¼Œzipæ¨¡å¼ u = dict([(\u0026#39;one\u0026#39;, 1), (\u0026#39;two\u0026#39;, 2), (\u0026#39;three\u0026#39;, 3)]) # å¯è¿­ä»£å¯¹è±¡æ–¹å¼ï¼ŒäºŒå…ƒå…ƒç»„ä»£æ›¿ç­‰å·æ¨¡å¼ï¼ŒäºŒå…ƒåˆ—è¡¨å…ƒç´ ä¼šè­¦å‘Š print(x, y, z, u) # ä¹Ÿå¯ç›´æ¥ç”¨{}ã€:åˆ›å»ºå­—å…¸ v = {123: \u0026#39;123\u0026#39;, 456: \u0026#39;456\u0026#39;} print(v, type(v)) help help([object])\tobject \u0026ndash; å¯¹è±¡ï¼›\nè¿”å›å¯¹è±¡å¸®åŠ©ä¿¡æ¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 help(list) # è¾“å‡ºï¼š # # Help on class list in module builtins: # class list(object) # | list(iterable=(), /) # | # | Built-in mutable sequence. # | # | If no argument is given, the constructor creates a new empty list. # | The argument must be an iterable if specified. # | # | Methods defined here: # | # ...... min_max è¿”å›å¯è¿­ä»£å‚æ•°ä¸­çš„æœ€å°ã€æœ€å¤§å…ƒç´ ã€‚\n1 2 print (\u0026#34;min(80, 100, 1000) : \u0026#34;, min(80, 100, 1000)) print (\u0026#34;min(80, 100, 1000) : \u0026#34;, max(80, 100, 1000)) setattrã€getattr (attrâ€”â€”attribute)\nsetattrç”¨äºè®¾ç½®å¯¹è±¡çš„å±æ€§å€¼ï¼Œgetattrç”¨äºè·å–å¯¹è±¡çš„å±æ€§å€¼ã€‚ç›¸æ¯”äº \u0026ldquo;.\u0026rdquo; åŠŸèƒ½æ›´ä¸°å¯Œã€‚\nå½“å®ä¾‹aæœ‰å±æ€§baræ—¶ï¼Œå½“ä½¿ç”¨setattr(a, \u0026lsquo;bar\u0026rsquo;, 5)æ—¶ï¼Œä¼šå°†å®ä¾‹aå±æ€§barè®¾ç½®ä¸º5; å½“å®ä¾‹aæ— å±æ€§baræ—¶ï¼Œä¼šä¸ºå®ä¾‹aåˆ›å»ºä¸€ä¸ªå®ä¾‹å±æ€§barï¼Œèµ‹å€¼ä¸º5ï¼Œè€Œç±»å±æ€§ä¸å˜ã€‚ getattrå½“å±æ€§ä¸å­˜åœ¨æ—¶é¿å…æŠ›å‡ºAttributeErrorï¼Œè‹¥è®¾ç½®é»˜è®¤å€¼ï¼Œåˆ™ä¸ä¼šæŠ¥é”™ã€‚ä¾‹å¦‚ï¼Œgetattr(a, \u0026lsquo;baz\u0026rsquo;, \u0026lsquo;default\u0026rsquo;)ä¼šè¿”å›\u0026rsquo;default\u0026rsquo;ï¼Œè€Œa.bazåˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class A(object): bar = 1 a = A() print(getattr(a, \u0026#39;bar\u0026#39;)) # è·å–å±æ€§ bar å€¼ setattr(a, \u0026#39;bar\u0026#39;, 5) setattr(a, \u0026#39;weight\u0026#39;, 5) # è®¾ç½®å±æ€§ weight å€¼ï¼Œä¸å­˜åœ¨ä¼šä¸ºè¯¥å¯¹è±¡åˆ›å»ºï¼Œä½†ç±»ä¸å˜ print(a.bar, a.weight) b=A() try: print(getattr(b, \u0026#39;weight\u0026#39;)) except AttributeError as e: print(f\u0026#34;å±æ€§è®¿é—®é”™è¯¯: {e}\u0026#34;)\t# ä¸ºå¯¹è±¡åˆ›å»ºï¼Œä½†ç±»ä¸å˜ï¼Œbæ— weightå±æ€§ print(getattr(b, \u0026#39;weight\u0026#39;ï¼Œ-1))\t# è®¾ç½®é»˜è®¤å€¼ï¼Œè¿”å›-1ä¸æŠ¥é”™ all ã€any allï¼šæ˜¯å¦éƒ½ä¸ºTrue\tanyï¼šæ˜¯å¦å­˜åœ¨True\nall(iterable, /)\nåˆ¤æ–­ç»™å®šçš„å¯è¿­ä»£å‚æ•° iterable ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸º TRUEï¼Œå¦‚æœæ˜¯è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚ å…ƒç´ é™¤äº†æ˜¯ 0ã€ç©ºã€Noneã€False å¤–éƒ½ç®— Trueã€‚ ç©ºå…ƒç»„ã€ç©ºåˆ—è¡¨è¿”å›å€¼ä¸ºTrueï¼Œè¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ã€‚ ä¸ä¼šè¿›å…¥å†…å±‚ã€‚ 1 2 3 print(all([\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;, \u0026#39;c\u0026#39;, \u0026#39;d\u0026#39;])) # å…ƒç´ éƒ½ä¸ä¸ºç©ºæˆ–0ï¼ŒTrue print(all([\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;, \u0026#39;\u0026#39;, \u0026#39;d\u0026#39;])) # å­˜åœ¨ä¸€ä¸ªä¸ºç©ºçš„å…ƒç´ ï¼ŒFalse print(all([[\u0026#39;\u0026#39;],[\u0026#39;\u0026#39;]]))\t# ä¸ä¼šè¿›å…¥å†…å±‚ï¼Œé¦–å±‚å…ƒç´ [\u0026#39;\u0026#39;]ä¸ä¸º0ã€ç©ºã€Noneã€False any(iterable, /) â€œæ˜¯å¦å­˜åœ¨ Trueâ€çš„æ„æ€ï¼ŒTrueä»£è¡¨çš„æ˜¯ éç©ºç±»æ•°æ®ã€‚ dir dir() å‡½æ•°ä¸å¸¦å‚æ•°æ—¶ï¼Œè¿”å›å½“å‰èŒƒå›´å†…çš„å˜é‡ã€æ–¹æ³•å’Œå®šä¹‰çš„ç±»å‹åˆ—è¡¨ å¸¦å‚æ•°æ—¶â€”â€”dir([object])ï¼Œè¿”å›å‚æ•°çš„å±æ€§ã€æ–¹æ³•åˆ—è¡¨ã€‚ å¦‚æœå‚æ•°åŒ…å«æ–¹æ³•__dir__()ï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚å¦‚æœå‚æ•°ä¸åŒ…å«__dir__()ï¼Œè¯¥æ–¹æ³•å°†æœ€å¤§é™åº¦åœ°æ”¶é›†å‚æ•°ä¿¡æ¯ã€‚ 1 2 3 4 5 6 7 8 9 10 class MyClass: def __init__(self): self.public_attr = 10 self.__private_attr=20 def normal_method(self): pass obj = MyClass()\t# å®ä¾‹åŒ–å¯¹è±¡ print(dir(obj)) è¾“å‡ºåŒ…å« \u0026lsquo;_MyClass__private_attr\u0026rsquo;, \u0026rsquo;normal_method\u0026rsquo;, \u0026lsquo;public_attr\u0026rsquo;\n[ \u0026lsquo;_MyClass__private_attr\u0026rsquo;, \u0026lsquo;__class__\u0026rsquo;, \u0026lsquo;__delattr__\u0026rsquo;, \u0026lsquo;__dict__\u0026rsquo;, \u0026lsquo;__dir__\u0026rsquo;, \u0026lsquo;__doc__\u0026rsquo;, \u0026hellip;\u0026hellip; \u0026lsquo;normal_method\u0026rsquo;, \u0026lsquo;public_attr\u0026rsquo; ]\nå®é™…åº”ç”¨åœºæ™¯\nå¿«é€ŸæŸ¥çœ‹å¯¹è±¡å†…å®¹ åŠ¨æ€æ£€æŸ¥å¯¹è±¡åŠŸèƒ½ é™åˆ¶æš´éœ²çš„æ¥å£ï¼ˆè®¾ç½®æ¥å£ï¼‰ 1 2 # å¿«é€ŸæŸ¥çœ‹å¯¹è±¡å†…å®¹ print(dir()) # æŸ¥çœ‹å­—å…¸çš„æ–¹æ³•ï¼Œå¦‚ keys, values, items 1 2 3 4 # åŠ¨æ€æ£€æŸ¥å¯¹è±¡åŠŸèƒ½ obj = SomeClass() if \u0026#34;__iter__\u0026#34; in dir(my_object): print(\u0026#34;å¯¹è±¡æ˜¯å¯è¿­ä»£çš„\u0026#34;) 1 2 3 4 5 6 7 8 9 10 # é™åˆ¶æš´éœ²çš„æ¥å£ï¼ˆè®¾ç½®æ¥å£ï¼‰ class SecureAPI: def __init__(self): self._internal_data = 100 def __dir__(self): return [\u0026#34;public_method\u0026#34;] # éšè—å†…éƒ¨å®ç° def public_method(self): return \u0026#34;Safe data\u0026#34; æ‹“å±•ï¼šå±æ€§åä»¥åŒä¸‹åˆ’çº¿ __ å¼€å¤´ä¸”ä¸ä»¥åŒä¸‹åˆ’çº¿ç»“å°¾ â€”â€” åç§°ä¿®é¥°ï¼Œé¿å…å­ç±»ä¸çˆ¶ç±»çš„ç§æœ‰å±æ€§å‘½åå†²çªï¼ŒPythonä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸ºï¼š_ç±»å__å±æ€§å\t(å¦‚åˆšæ‰çš„_MyClass__private_attr)\n1 2 3 4 5 6 7 8 class A: def __init__(self): self.__x = 1 # _A__x class B(A): def __init__(self): super().__init__() self.__x = 2 # _B__x hex ã€oct hex(x)ï¼šå°†10è¿›åˆ¶intè½¬ä¸º16è¿›åˆ¶ä¸”ä¸ºå­—ç¬¦ä¸²ï¼Œ0xä¸ºå‰ç¼€ã€‚\n1 2 3 4 5 a=16 print(type(a))\t# \u0026lt;class \u0026#39;int\u0026#39;\u0026gt; b=hex(a) print(b)\t# 0x10 print(type(b))\t# \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; hex(x)ï¼šå°†10è¿›åˆ¶intè½¬ä¸º8è¿›åˆ¶ä¸”ä¸ºå­—ç¬¦ä¸²ï¼Œ0oä¸ºå‰ç¼€ã€‚\n1 2 3 4 a=16 b=hex(a) print(b)\t# 0o20 print(type(b))\t# \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; next next()è¿”å›è¿­ä»£å™¨çš„çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼›è¦å’Œç”Ÿæˆè¿­ä»£å™¨å‡½æ•° iter() é…åˆä½¿ç”¨ã€‚ 1 next(iterable[, default]) ä¸€ä¸ªå‚æ•°æ˜¯iter()ç”Ÿæˆçš„è¿­ä»£å™¨å®ä¾‹ï¼Œå¦ä¸€ä¸ªæ˜¯é»˜è®¤å€¼ï¼Œå¦‚æœæŒ‡é’ˆè¶…å‡ºèŒƒå›´å°±è¾“å‡ºé»˜è®¤ã€‚\nå¸¸è§åº”ç”¨\n1 2 with open(file_path, \u0026#39;r\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;) as f: # å¼ºåˆ¶ä½¿ç”¨UTF-8ç¼–ç è¯»å– lines = [next(f) for _ in range(5)] # è¯»å–å‰5è¡Œåˆ°åˆ—è¡¨ æˆ‘ç†è§£çš„next()æ˜¯python å†…ç½®çš„__next__æ–¹æ³•ï¼Œå› ä¸ºiterç±»æœ‰__next__æ–¹æ³•ï¼Œè€Œå…¶ä»–çš„å¦‚ç”Ÿæˆå™¨ä¹Ÿæœ‰ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªç±»å¹¶å®šä¹‰__next__æ–¹æ³•ï¼Œè¯¥ç±»å¼„å‡ºçš„å®ä¾‹ä¹Ÿå¯ä»¥ç”¨next() 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # è‡ªå®šä¹‰è¿­ä»£å™¨ class MyClass: # è¿­ä»£ç›¸å…³ __iter__(self) # è¿­ä»£ï¼šfor i in obj __next__(self) # ä¸‹ä¸€ä¸ªï¼šnext(obj) # ç”Ÿæˆå™¨ï¼ˆæœ¬èº«å°±æ˜¯è¿­ä»£å™¨ï¼‰ # \u0026lt;class \u0026#39;generator\u0026#39;\u0026gt; ä¸æ˜¯ \u0026lt;class \u0026#39;list\u0026#39;\u0026gt;ï¼Œç”¨æ‹¬å·çš„ gen = (x for x in range(3))\tprint(next(gen)) # 0 print(next(gen)) # 1 # æ–‡ä»¶å¯¹è±¡ï¼ˆæœ¬èº«å°±æ˜¯è¿­ä»£å™¨ï¼‰ with open(\u0026#39;data.txt\u0026#39;) as f: print(next(f)) # ç›´æ¥è¯»å–ç¬¬ä¸€è¡Œ print(next(f)) # è¯»å–ç¬¬äºŒè¡Œ æ‹“å±• è¿™æ ·æœ‰åŒä¸‹åˆ’çº¿çš„æ–¹æ³•å’Œæ— åŒä¸‹åˆ’çº¿çš„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚__getitem__(self)ã€‚ â€”â€” Python çš„ç‰¹æ®Šæ–¹æ³•ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰æ˜¯ç”± Python è¯­è¨€è§„èŒƒå®šä¹‰çš„ã€‚è¿™äº›æ–¹æ³•ä¸ Python çš„å†…ç½®æ“ä½œç›´æ¥å…³è”ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 class MyClass: # åŸºæœ¬æ“ä½œ __init__(self) # å®ä¾‹åŒ–ï¼šobj = MyClass() __str__(self) # å­—ç¬¦ä¸²è½¬æ¢ï¼šstr(obj) __len__(self) # é•¿åº¦ï¼šlen(obj) # è¿­ä»£ç›¸å…³ __iter__(self) # è¿­ä»£ï¼šfor i in obj __next__(self) # ä¸‹ä¸€ä¸ªï¼šnext(obj) # è¿ç®—ç¬¦ __add__(self) # åŠ æ³•ï¼šobj + other __sub__(self) # å‡æ³•ï¼šobj - other # å®¹å™¨æ“ä½œ __getitem__(self) # ç´¢å¼•è®¿é—®ï¼šobj[key] __setitem__(self) # ç´¢å¼•èµ‹å€¼ï¼šobj[key] = value # ä½¿ç”¨è¿™äº›ç‰¹æ®Šæ–¹æ³• lst = MyList() len(lst) # è°ƒç”¨ __len__ 3 in lst # è°ƒç”¨ __contains__ åˆ¤æ–­æ˜¯å¦contain for x in lst: ... # è°ƒç”¨ __iter__ # æŸ¥çœ‹æ‰€æœ‰ç‰¹æ®Šæ–¹æ³• # æ–¹æ³•1ï¼šæŸ¥çœ‹å†…ç½®æ–‡æ¡£ help(object) # æ–¹æ³•2ï¼šdir() å‡½æ•° print([m for m in dir(object) if m.startswith(\u0026#39;__\u0026#39;)]) slice slice()è¿”å›ä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ã€‚\nslice(stop) slice(start, stop[, step])ï¼Œ(èµ·ç‚¹ï¼Œç»ˆç‚¹ï¼Œæ­¥é•¿)\nç›´æ¥ä½¿ç”¨ åˆ›å»ºslice [:5] slice(None, 5) / slice(None, 5) [3::2] slice(3, None, 2) [::-1] slice(None, None, -1) ç±»ä¼¼äºaâ€‹:b:c\n1 2 3 4 5 a=list(range(10)) print(lst[2:7:2]) print(slice(2, 7, 2)) assert lst[2:7:2] == lst[slice(2, 7, 2)] ä½†æ˜¯è¦ä¿å­˜ä¸ºå¯¹è±¡çš„è¯:\n1 2 x=2:7:2\t# âŒ éæ³•å†™æ³• x=slice(2, 7, 2)\t# âœ… æ­£ç¡®å†™æ³•\tå¯¹äº lst[slice(95, 105, 2)]ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ lst[95:105:2] ? â€”â€” å®šä¹‰sliceçš„ä¼˜åŠ¿\nåŠ¨æ€å‚æ•°é…ç½®\n1 2 3 4 5 6 7 def dynamic_slicer(config): \u0026#34;\u0026#34;\u0026#34;æ ¹æ®å¤–éƒ¨é…ç½®ç”Ÿæˆåˆ‡ç‰‡\u0026#34;\u0026#34;\u0026#34; return data[slice(*config)] # ä»é…ç½®æ–‡ä»¶è¯»å–å‚æ•° config = json.loads(\u0026#39;{\u0026#34;start\u0026#34;: 95, \u0026#34;stop\u0026#34;: 105, \u0026#34;step\u0026#34;: 2}\u0026#39;) print(dynamic_slicer(config.values())) # åŠ¨æ€åº”ç”¨åˆ‡ç‰‡å‚æ•° åˆ‡ç‰‡å¯¹è±¡å¤ç”¨\n1 2 3 4 5 6 # å®šä¹‰æ ‡å‡†åˆ‡ç‰‡è§„åˆ™ DOWNSAMPLE_SLICE = slice(None, None, 4) # æ¯4ä¸ªå…ƒç´ å–1ä¸ª # å¤ç”¨åˆ‡ç‰‡ video_frames = raw_frames[DOWNSAMPLE_SLICE] audio_samples = raw_audio[DOWNSAMPLE_SLICE] å¤šç»´åˆ‡ç‰‡åŸºç¡€\n1 2 3 4 5 6 7 8 9 10 11 12 13 import numpy as np arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]]) print(arr[0:2, 1:3]) # è¾“å‡º [[2 3], [5 6]] # å®šä¹‰è¡Œå’Œåˆ—çš„åˆ‡ç‰‡å¯¹è±¡ row_slice = slice(0, 2) # ç¬¬0è¡Œåˆ°ç¬¬1è¡Œï¼ˆä¸å«2ï¼‰ col_slice = slice(1, 3) # ç¬¬1åˆ—åˆ°ç¬¬2åˆ—ï¼ˆä¸å«3ï¼‰ print(arr[row_slice, col_slice]) # è¾“å‡º [[2 3], [5 6]] divmod divmod() å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•° x yï¼ˆé€šå¸¸æ˜¯ä¸¤ä¸ªæ•°å­—ï¼‰ï¼Œè¿”å›äºŒå…ƒç»„ï¼Œç¬¬ä¸€ä¸ªå€¼æ˜¯ x é™¤ä»¥ y çš„å•†ï¼ˆå³æ•´æ•°éƒ¨åˆ†ï¼‰ï¼Œç¬¬äºŒä¸ªå€¼æ˜¯ä½™æ•°ã€‚\nå¯¹äº3.xï¼Œå‚æ•°ä¸èƒ½æ˜¯å¤æ•°ï¼Œ x å¯ä»¥ä¸ºæ•´æ•°/æµ®ç‚¹æ•°ï¼Œy ä¹Ÿå¦‚æ­¤\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 a=13 b=3 x,y=divmod(a,b) print(x,y) # 4 1 a=13.6 b=3 x,y=divmod(a,b) print(x,y)\t# 4.0 1.5999999999999996 print(x,round(y,1))\t# 4.0 1.6 a=13.6 b=3.1 x,y=divmod(a,b) print(x,y)\t# 4.0 1.1999999999999993 åº”ç”¨åœºæ™¯\nè¿›åˆ¶è½¬æ¢\n1 2 3 4 5 6 7 8 def int_to_base(n, base): digits = [] while n \u0026gt; 0: n, rem = divmod(n, base)\t# é™¤ç•™ä½™æ•°æ³• digits.append(rem)\t# ä½™æ•°å…ˆå­˜è¿›å»ï¼Œæ˜¯ä½ä½ return digits[::-1]\t# é€†åº print(int_to_base(42, 16)) # [2, 10] è¡¨ç¤º 0x2A æ—¶é—´å•ä½è½¬æ¢\n1 2 3 4 total_seconds = 7541 hours, rem = divmod(total_seconds, 3600) minutes, seconds = divmod(rem, 60) print(f\u0026#34;{hours}:{minutes}:{seconds}\u0026#34;) # 2:5:41 å¾ªç¯ç¼“å†²åŒºå¤„ç†ï¼Œç±»ä¼¼å“ˆå¸Œè¡¨çš„â€œçº¿æ€§æ³•ç›´æ¥modâ€\n1 2 3 4 5 6 buffer_size = 1024 write_pos = 1500 # è®¡ç®—å®é™…å†™å…¥ä½ç½® chunk, offset = divmod(write_pos, buffer_size) print(f\u0026#34;å†™å…¥ç¬¬ {chunk} ä¸ªç¼“å†²åŒºçš„ {offset} ä½ç½®\u0026#34;) id id()å‡½æ•°è¿”å›å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚\nCPython ä¸­ id() å‡½æ•°è·å–çš„æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚ï¼ˆpython3.9â€”â€”CPython3.9ï¼‰\n1 2 3 4 5 a=13 b=3 print(id(a)) # 3054276471472 print(id(b))\t# 3054276471152 print(type(id(a)))\t# \u0026lt;class \u0026#39;int\u0026#39;\u0026gt; æ‹“å±•ï¼šä¸åŒçš„python\néœ€è¦æœ€ä½³å…¼å®¹æ€§ â†’ CPython ï¼ˆä¸»ï¼Œå…¼å®¹æ€§æœ€å¥½ï¼Œæ ‡å‡†ï¼‰\nä¸ Java ç”Ÿæ€æ•´åˆ â†’ Jython\néœ€è¦ .NET äº’æ“ä½œ â†’ IronPython\nè¿½æ±‚é«˜æ€§èƒ½ â†’ PyPy\nåµŒå…¥å¼å¼€å‘ â†’ MicroPython\nobject object()ï¼šä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ 1 2 3 4 5 6 x = object() print(dir(x)) # [\u0026#39;__class__\u0026#39;, \u0026#39;__delattr__\u0026#39;, \u0026#39;__dir__\u0026#39;, \u0026#39;__doc__\u0026#39;, \u0026#39;__eq__\u0026#39;, \u0026#39;__format__\u0026#39;, \u0026#39;__ge__\u0026#39;, # \u0026#39;__getattribute__\u0026#39;, \u0026#39;__gt__\u0026#39;, \u0026#39;__hash__\u0026#39;, \u0026#39;__init__\u0026#39;, \u0026#39;__init_subclass__\u0026#39;, \u0026#39;__le__\u0026#39;, \u0026#39;__lt__\u0026#39;, # \u0026#39;__ne__\u0026#39;, \u0026#39;__new__\u0026#39;, \u0026#39;__reduce__\u0026#39;, \u0026#39;__reduce_ex__\u0026#39;, \u0026#39;__repr__\u0026#39;, \u0026#39;__setattr__\u0026#39;, \u0026#39;__sizeof__\u0026#39;, # \u0026#39;__str__\u0026#39;, \u0026#39;__subclasshook__\u0026#39;] object() çš„æ ¸å¿ƒä»·å€¼ï¼š\næ‰€æœ‰ç±»çš„åŸºç±»ï¼šæä¾›é»˜è®¤è¡Œä¸º\nè½»é‡çº§å¯¹è±¡ï¼šç”¨äºç®€å•åœºæ™¯\næ–¹æ³•ç»§æ‰¿ï¼šæä¾›é»˜è®¤çš„ __str__ã€__eq__ ç­‰æ–¹æ³•\nsorted sorted() å¯¹ æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡ è¿›è¡Œæ’åºæ“ä½œã€‚\nsort ä¸ sorted åŒºåˆ«ï¼š\nsort æ˜¯ list çš„æ–¹æ³•ï¼Œsorted å¯å¯¹æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡åº”ç”¨ã€‚\nlist çš„ sort æ–¹æ³•è¿”å›çš„æ˜¯å¯¹å·²ç»å­˜åœ¨çš„åˆ—è¡¨è¿›è¡Œæ“ä½œï¼Œè€Œå†…å»ºå‡½æ•° sorted æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ listï¼Œè€Œä¸æ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿›è¡Œçš„æ“ä½œã€‚\nsorted(iterable, key=None, reverse=False)ï¼Œä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯ å¯è¿­ä»£å˜é‡ã€é€‰æ‹©å†…å±‚å…ƒç´ çš„å‡½æ•°æ–¹æ³•ã€å‡åºoré™åºã€‚\n1 2 3 4 ls=[(3,2),(1,4),(5,3),(2,6)] new_ls=sorted(ls,key=lambda x:x[0],reverse=True)\t# å¯¹è±¡ä¸ºåˆ—è¡¨ lsï¼Œæ–¹æ³•æ˜¯ é€šè¿‡é¦–å±‚å…ƒç´ çš„ç¬¬0ä¸ªå…ƒç´ æ’åºï¼ŒTrue-\u0026gt;é™åº print(ls)\t# [(3, 2), (1, 4), (5, 3), (2, 6)] print(new_ls)\t# [(5, 3), (3, 2), (2, 6), (1, 4)]\tå¾—åˆ° 5 3 2 1 é™åº sorted\u0026lt;-\u0026gt;sort reversed\u0026lt;-\u0026gt;reverse\nascii ascii(object) ï¼Œè¿”å›objectçš„å­—ç¬¦ä¸²ï¼Œå¯¹äºå­—ç¬¦ä¸²ä¸­çš„é ASCII å­—ç¬¦åˆ™é€šè¿‡ repr() å‡½æ•°ä½¿ç”¨ \\x, \\u æˆ– \\U ç¼–ç ã€‚\n1 2 3 4 a=[[1,2,3],[3,4,5]] b=ascii(a) print(type(b)) # \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; print(b.split(\u0026#39;,\u0026#39;)) # [\u0026#39;[[1\u0026#39;, \u0026#39; 2\u0026#39;, \u0026#39; 3]\u0026#39;, \u0026#39; [3\u0026#39;, \u0026#39; 4\u0026#39;, \u0026#39; 5]]\u0026#39;] enumerate enumerate(seq, [start=0])\nå°†seqçš„å…ƒç´ æŒ¨ä¸ªå–å‡ºå’Œ0,1,2,3\u0026hellip;.ç»„æˆäºŒå…ƒç»„ï¼Œå„ä¸ªäºŒå…ƒç»„ç»„æˆenumerateç±»å‹ï¼Œenumerateä¸å¯ç´¢å¼•ã€‚\n1 2 3 4 5 6 7 8 seasons=[[1,2,3],[4,5,6]] print(type(enumerate(seasons)))\t# \u0026lt;class \u0026#39;enumerate\u0026#39;\u0026gt; for i, element in enumerate(seasons): print(i, element)\t# 0 [1, 2, 3]\t1 [4, 5, 6] for j in enumerate(seasons): print(type(j))\t# \u0026lt;class \u0026#39;tuple\u0026#39;\u0026gt; print(j[0],j[1])\t# 0 [1, 2, 3] break ï¼ˆä¸»ï¼‰åŒæ—¶è·å–ç´¢å¼• iï¼Œå’Œå…ƒç´ æœ¬èº«elementï¼š\n1 2 for i, element in enumerate(seasons): print(i, element) input input([prompt]) ï¼šåœ¨å‘½ä»¤è¡Œæç¤ºpromptï¼Œç„¶åæ¥æ”¶å‘½ä»¤è¡Œè¾“å…¥çš„ä¿¡æ¯ä¸ºå­—ç¬¦ä¸²ã€‚\n1 2 a = input(\u0026#34;input:\u0026#34;) type(a) # \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; å’Œstripã€mapç»“åˆ\n1 2 3 4 5 6 7 # strip() å»æ‰æ–‡æœ«ç©ºæ ¼ a=input(\u0026#39;è¾“å…¥ï¼š\u0026#39;).strip()\t# è¾“å…¥â€œ123 â€\tå»æ‰æ–‡æœ«ç©ºå­—ç¬¦ print(len(a))\t# 3 a=input(\u0026#39;è¾“å…¥ï¼š\u0026#39;)\t# è¾“å…¥â€œ123 â€\tä¸å»æ‰æ–‡æœ«ç©ºå­—ç¬¦ print(len(a))\t# 4 b=list(map(int, input(\u0026#39;è¾“å…¥ï¼š\u0026#39;).split())) # è¾“å…¥â€œ1 2 3â€\tè¾“å‡º[1,2,3] æ ‡å‡†ç©ºç™½å­—ç¬¦ å­—ç¬¦åç§° è½¬ä¹‰åºåˆ— ç©ºæ ¼ \\x20 æ°´å¹³åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰ \\t æ¢è¡Œç¬¦ï¼ˆLFï¼‰ \\n å›è½¦ç¬¦ï¼ˆCRï¼‰ï¼ˆMac æ¢è¡Œ) \\r å‚ç›´åˆ¶è¡¨ç¬¦ \\v æ¢é¡µç¬¦ \\f staticmethod @staticmethod ç”¨äºå®šä¹‰é™æ€æ–¹æ³•çš„è£…é¥°å™¨ï¼Œè¿”å›å‡½æ•°çš„é™æ€æ–¹æ³•ã€‚\n1 2 3 4 class C(object): @staticmethod def add(a, b): return a + b ç‰¹ç‚¹ï¼š\nä»£ç ä¸­çš„addå‡½æ•°ä¸èƒ½æœ‰â€œselfâ€ï¼ˆå®ä¾‹å¼•ç”¨ï¼‰å’Œâ€œclsâ€ç±»å¼•ç”¨ æ˜¯ç±»å‘½åç©ºé—´ä¸­çš„å‡½æ•°ï¼Œä¸éœ€è¦å®ä¾‹ä¾¿å¯è°ƒç”¨ ä¸èƒ½ç›´æ¥è®¿é—®å®ä¾‹å±æ€§æˆ–ç±»å±æ€§ï¼Œå› ä¸ºæ— self/cls é™æ€æ–¹æ³•ä¸æ™®é€šæ–¹æ³•å¯¹æ¯”\nç‰¹å¾ æ™®é€šæ–¹æ³• é™æ€æ–¹æ³• ç¬¬ä¸€ä¸ªå‚æ•° selfï¼ˆå®ä¾‹å¼•ç”¨ï¼‰ éselféç±» è°ƒç”¨æ–¹å¼ å®ä¾‹è°ƒç”¨ ç±»/å®ä¾‹å‡å¯è°ƒç”¨ è®¿é—®æƒé™ å¯è®¿é—®å®ä¾‹å±æ€§ ä»…èƒ½è®¿é—®ä¼ å…¥å‚æ•° 1 2 3 4 5 6 7 class MyClass: def normal_method(self): print(f\u0026#34;å®ä¾‹æ–¹æ³•ï¼š{self}\u0026#34;) # ä¾èµ–å®ä¾‹ @staticmethod def static_method(): print(\u0026#34;é™æ€æ–¹æ³•\u0026#34;) # æ— ä¾èµ– bin bin() è¾“å…¥ï¼šä¸€ä¸ªæ•´æ•° int æˆ–è€…é•¿æ•´æ•° long intã€‚è¿”å›ï¼šäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 a=3 print(bin(a))\t# 0b11 print(type(bin(a)))\t# \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; for i in bin(a): print(i)\t# 0\\nb\\n1\\n1\\n help(bin) # bin(number, /) # Return the binary representation of an integer. # # \u0026gt;\u0026gt;\u0026gt; bin(2796202) # \u0026#39;0b1010101010101010101010\u0026#39; open open(name[, mode[, buffering]])\nå¸¸ä¸withè”ç”¨\n1 2 3 4 5 # ä¾‹å­ with open(\u0026#39;_20_data.txt\u0026#39;, \u0026#39;r\u0026#39;) as file: # è¯»å–æ•°æ® N\\n1 2 3 n = int(file.readline().strip()) data = list(map(int, file.read().split())) wä»å¤´å†™ råªè¯» aè¿½åŠ \nè¯»å†™æ–¹å¼ æ˜¯å¦ä¸º äºŒè¿›åˆ¶ æ˜¯å¦ä¸º å¯è¯»å¯å†™ r ç©º ç©º w b + a å…±\t3*2*2=12ç§\næ¨¡å¼å¯¹ç…§è¡¨ å’Œ f.seek(n)\næ¨¡å¼ æè¿° æ–‡ä»¶å­˜åœ¨ æ–‡ä»¶ä¸å­˜åœ¨ æŒ‡é’ˆä½ç½® r+ è¯»å†™ï¼ˆæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼‰ ä¸æ¸…ç©ºï¼Œä»æŒ‡é’ˆä½ç½®â€œè¦†ç›–å†™â€ æŠ¥é”™ å¼€å¤´ w+ å†™è¯»ï¼ˆæ¸…ç©ºåè¯»å†™ï¼‰ å¿…å®šæ¸…ç©ºï¼Œä»æŒ‡é’ˆä½ç½®å†™ åˆ›å»º å¼€å¤´ a+ è¿½åŠ è¯»å†™ å¿…å®šä»æœ«å°¾å†™ åˆ›å»º æœ«å°¾ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # åˆ›å»ºæ–‡ä»¶ with open(\u0026#39;test_r+.txt\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;æ—§å†…å®¹\u0026#39;) # r+ try:\t# ä¸å­˜åœ¨æ”¹æ–‡ä»¶ä¼šæŠ¥é”™ with open(\u0026#39;test_r+.txt\u0026#39;, \u0026#39;r+\u0026#39;) as f: print(f.read()) # è¾“å‡º: æ—§å†…å®¹^ ï¼ˆ^æŒ‡é’ˆä½ç½®ï¼‰ f.seek(0)\t# ^æ—§å†…å®¹\tï¼ˆç§»åŠ¨æŒ‡é’ˆä½ç½®åˆ°å¼€å¤´ï¼‰ f.write(\u0026#39;æ–°\u0026#39;) # æ–°^å†…å®¹\tï¼ˆä»æŒ‡é’ˆä½ç½®è¦†ç›–å†™å…¥ï¼‰ f.seek(0)\t# ^æ–°å†…å®¹ print(f.read()) # è¾“å‡º: æ–°å†…å®¹ except FileNotFoundError: print(\u0026#34;æ–‡ä»¶ä¸å­˜åœ¨\u0026#34;) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # åˆ›å»ºæ–‡ä»¶ with open(\u0026#39;test_w+.txt\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;åŸå§‹å†…å®¹\u0026#39;) # w+ with open(\u0026#39;test_w+.txt\u0026#39;, \u0026#39;w+\u0026#39;) as f: f.write(\u0026#39;å…¨æ–°å†…å®¹\u0026#39;) # æ¸…ç©ºåå†™å…¥ å…¨æ–°å†…å®¹^ f.seek(0)\t# ç§»åŠ¨æŒ‡é’ˆåˆ°å¼€å¤´\t^å…¨æ–°å†…å®¹ print(f.read()) # è¾“å‡º: å…¨æ–°å†…å®¹ # æ–‡ä»¶ä¸å­˜åœ¨æ—¶ import os with open(\u0026#39;new_w+.txt\u0026#39;, \u0026#39;w+\u0026#39;) as f: f.write(\u0026#39;åˆ›å»ºå†…å®¹\u0026#39;)\tf.seek(0) print(os.path.abspath(\u0026#39;new_w+.txt\u0026#39;)) # è¾“å‡º: åˆ›å»ºçš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # åˆ›å»ºæ–‡ä»¶ with open(\u0026#39;test_a+.txt\u0026#39;, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;åˆå§‹è¡Œ\\n\u0026#39;) # a+ with open(\u0026#39;test_a+.txt\u0026#39;, \u0026#39;a+\u0026#39;) as f: f.write(\u0026#39;è¿½åŠ è¡Œ\\n\u0026#39;) # è¿½åŠ è¡Œ\\n^ f.seek(0) # ^åˆå§‹è¡Œ\\nè¿½åŠ è¡Œ\\n print(f.read()) # è¾“å‡º: åˆå§‹è¡Œ\\nè¿½åŠ è¡Œ\\n # éªŒè¯æŒ‡é’ˆç‰¹æ€§ f.seek(5) # åˆå§‹è¡Œ\\nè¿½^åŠ è¡Œ\\n f.write(\u0026#39;ä¸­é—´æ’å…¥\u0026#39;) # ä»ç„¶è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼ f.seek(0) print(f.read()) # è¾“å‡º: åˆå§‹è¡Œ\\nè¿½åŠ è¡Œ\\nä¸­é—´æ’å…¥ eval eval(è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²[, globals[, locals]])ï¼Œæ‰§è¡Œä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¡¨è¾¾å¼çš„å€¼ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 # ç®€å•è¡¨è¾¾å¼ result = eval(\u0026#34;2 + 3 * 4\u0026#34;) print(result) # è¾“å‡º: 14 # å˜é‡å¼•ç”¨ x = 10 result = eval(\u0026#34;x + 5\u0026#34;) print(result) # è¾“å‡º: 15 # æŒ‡å®šå˜é‡ç©ºé—´ namespace = {\u0026#39;a\u0026#39;: 2, \u0026#39;b\u0026#39;: 3}\t# å¿…é¡»æ˜¯å­—å…¸ result = eval(\u0026#34;a + b\u0026#34;, namespace) print(result) # è¾“å‡º: 5 eval() æ‰§è¡Œä»£ç æœ‰å®‰å…¨é£é™©ï¼Œå¯èƒ½å¯¼è‡´ä»£ç æ³¨å…¥æ¼æ´ï¼Œå¹¶ç¡®ä¿ä»…æ‰§è¡Œå¯ä¿¡ä»»çš„å­—ç¬¦ä¸²è¡¨è¾¾å¼ã€‚ è®¾ç½®å‘½åç©ºé—´çš„å†…ç½®å‡½æ•°å’Œç±»å‹ â€”â€” __builtins__\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # å®‰å…¨æ²™ç®±ç¯å¢ƒé…ç½® safe_globals = { \u0026#39;__builtins__\u0026#39;: { \u0026#39;abs\u0026#39;: abs, \u0026#39;max\u0026#39;: max, \u0026#39;min\u0026#39;: min, \u0026#39;pow\u0026#39;: pow, \u0026#39;round\u0026#39;: round } } # å®‰å…¨è®¡ç®—ç¤ºä¾‹ result = eval(\u0026#34;pow(2, 3) + abs(-5)\u0026#34;, safe_globals) # è¾“å‡º: 13 # å±é™©æ“ä½œç¤ºä¾‹ï¼ˆå°†è¢«é˜»æ­¢ï¼‰ try: eval(\u0026#34;open(\u0026#39;test.txt\u0026#39;)\u0026#34;, safe_globals) except NameError as e: print(f\u0026#34;å®‰å…¨æ‹¦æˆª: {e}\u0026#34;) # è¾“å‡º: name \u0026#39;open\u0026#39; is not defined æ‹“å±•: __builtins__\n1 2 3 4 5 6 7 # æŸ¥çœ‹å†…ç½®å‡½æ•°åˆ—è¡¨ print(dir(__builtins__)) # è¾“å‡º: [\u0026#39;ArithmeticError\u0026#39;, \u0026#39;AssertionError\u0026#39;, ...,\u0026#39; iter\u0026#39;, \u0026#39;len\u0026#39;, \u0026#39;license\u0026#39;, \u0026#39;list\u0026#39;, \u0026#39;locals\u0026#39;, \u0026#39;map\u0026#39;, \u0026#39;max\u0026#39;, \u0026#39;memoryview\u0026#39;, \u0026#39;min\u0026#39;, \u0026#39;next\u0026#39;, \u0026#39;object\u0026#39;, \u0026#39;oct\u0026#39;, \u0026#39;open\u0026#39;, ...] # è°ƒç”¨å†…ç½®å‡½æ•° print(__builtins__.len([1,2,3])) # è¾“å‡º: 3 print(len([1,2,3])) # ç­‰ä»· int int(x, base=10) -\u0026gt; integerï¼Œå°†ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦ä¸²è½¬ä¸ºä¸€ä¸ªintç±»å‹æ•°æ®ï¼ˆ10è¿›åˆ¶ï¼‰, å¦‚æœæ²¡æœ‰å‚æ•°è¿”å›0ã€‚ å¦‚æœå¸¦å‚æ•°baseçš„è¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šè¦æ˜¯å­—ç¬¦ä¸²\n1 2 3 4 5 6 7 8 9 #å°æ•°ç‚¹åç›´æ¥åˆ äº† print(int(3.6))\t# 3 # å¦‚æœå¸¦å‚æ•°baseçš„è¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šè¦æ˜¯å­—ç¬¦ä¸²ã€‚1aä¸º 16è¿›åˆ¶ã€‚ print(int(\u0026#39;1a\u0026#39;,16)) # 26 # intè¢«printæ—¶éƒ½æ˜¯10è¿›åˆ¶ï¼Œintå…¶ä»–è¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¸º10è¿›åˆ¶è¡¨ç¤ºçš„int print(int(\u0026#39;0xaa\u0026#39;,16))\t# 16 * 10 + 1 * 10 = 70 print(int(\u0026#39;0b110\u0026#39;,2))\t# 4+2=6 int([x]) -\u0026gt; integerï¼Œ[x]å¯ä»¥æ˜¯str, bytes, or bytearray ä¸”ç¬¦åˆè¯¥è¿›åˆ¶ï¼ˆç”±baseç¡®å®šï¼‰çš„å­—é¢é‡ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 with open(\u0026#39;test.txt\u0026#39;,\u0026#39;wb+\u0026#39;) as f: # å†™å…¥bytesç±»å‹å†…å®¹ f.write(b\u0026#39;12\u0026#39;)\tf.seek(0) # è¯»å–bytes byte_ls=f.readline()\tprint(byte_ls)\t# b\u0026#39;12\u0026#39; print(type(byte_ls))\t# \u0026lt;class \u0026#39;bytes\u0026#39;\u0026gt; # é»˜è®¤10è¿›åˆ¶è½¬æ¢ int_ls=int(byte_ls)\tprint(int_ls)\t# 12 print(type(int_ls))\t# \u0026lt;class \u0026#39;int\u0026#39;\u0026gt; # è®¾ç½®ä¸º8è¿›åˆ¶ int_ls=int(byte_ls, 8)\tprint(int_ls)\t# 10 str str(object=\u0026rsquo;\u0026rsquo;)ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚\n1 print(type(str(123)))\t# \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; å¯¹æ¯”str()å’Œascii()\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 dict = {\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;} # è½¬æ¢ä¸€äº›æ•°æ®ç»“æ„æ˜¯ä¸€æ ·çš„ print(str(dict))\t# {\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;} print(ascii(dict))\t# {\u0026#39;a\u0026#39;: \u0026#39;b\u0026#39;} # å¯¹äºå­—ç¬¦ä¸²æ•°æ®ï¼Œsträ¸ä¼šå°†\u0026#39;è½¬å­—ç¬¦ä¸²é‡Œï¼Œasciiä¸¥æ ¼è½¬ s = \u0026#39;rooobeam\u0026#39; print(str(s))\t# RUNOOB print(ascii(s))\t# \u0026#39;RUNOOB\u0026#39; # å¯¹äºéASCIIå­—ç¬¦ï¼Œstræ²¡äº‹ï¼Œè½¬ä¹‰ä¸ºUnicodeç ç‚¹ ss = \u0026#39;é˜¿é“å¤«\u0026#39; print(str(ss))\t# é˜¿é“å¤« print(ascii(ss))\t# \u0026#39;\\u963f\\u9053\\u592b\u0026#39; è¾“å‡ºç›®æ ‡ éASCIIå­—ç¬¦å¤„ç† å­—ç¬¦å¤„ç† ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ ä¸»è¦ç”¨é€” str äººç±»å¯è¯»çš„å­—ç¬¦ä¸² åŸæ · æ—  ä»…è½¬ä¹‰æ§åˆ¶å­—ç¬¦å¦‚\\n ç”¨æˆ·å‹å¥½ ascii Pythonå¯è§£æstr Unicodeç ç‚¹(å¦‚\\u4e2d) å§‹ç»ˆç”¨å•å¼•å·åŒ…è£¹ è½¬ä¹‰æ‰€æœ‰éASCIIå­—ç¬¦ è°ƒè¯•å’Œå®‰å…¨ bool bool(x) å°†ç»™å®šå‚æ•°è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œè¿”å› Falseã€‚\n1 2 3 print(bool(0))\t# False print(bool(1))\t# Ture print(bool(2))\t# True ï¼ˆboolæ˜¯intçš„å­ç±»ï¼Œç„¶å¹¶åµã€‚ï¼‰\nReturns True when the argument x is true, False otherwise.\nexec exec(object[, globals[, locals]])ï¼Œæ‰§è¡Œå‚¨å­˜åœ¨å­—ç¬¦ä¸²æˆ–æ–‡ä»¶ä¸­çš„ Python è¯­å¥ï¼Œå¯æ‰§è¡Œæ›´å¤æ‚çš„ Python ä»£ç ã€‚\n1 2 3 4 exec(\u0026#39;\u0026#39;\u0026#39; print(\u0026#34;where you are\u0026#34;) print(\u0026#34;where is love\u0026#34;) \u0026#39;\u0026#39;\u0026#39;) globalsï¼Œlocalsç±»ä¼¼ evalã€‚\néå¸¸ä¸å®‰å…¨ï¼Œæ°¸è¿œä¸è¦æ‰§è¡Œæ²¡æœ‰æ£€éªŒè¿‡çš„ä»£ç ã€‚\nå¯ç”¨__builtins__é™åˆ¶å‘½åç©ºé—´ã€‚\nisinstance isinstance(object, classinfo)â€”â€”isinstance(å®ä¾‹a, ç±»A)ï¼Œåˆ¤æ–­å®ä¾‹a æ˜¯ä¸æ˜¯ A æˆ– Açš„å­ç±» çš„å®ä¾‹åŒ–ã€‚\n1 2 3 4 a = 2 isinstance(a,int)\t# True aæ˜¯intç±»å‹ isinstance(a,str)\t# False\taä¸æ˜¯strç±»å‹ isinstance(a,(str,int,list)) # True å…ƒç»„é‡Œæœ‰açš„ç±»å‹ isinstance() ä¸ type() åŒºåˆ«ï¼š\ntype() ä¸ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œä¸è€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚ isinstance() ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œè€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚ å¦‚æœè¦åˆ¤æ–­ä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒæ¨èä½¿ç”¨ isinstance()ã€‚\n1 2 3 4 5 6 7 8 a = bool() print(type(a)==int)\t# False # å­ç±»æ˜¯çˆ¶ç±»çš„ä¸€ç§ï¼Œaæ˜¯å­ç±»åˆ™aæ˜¯çˆ¶ç±» print(isinstance(a,int))\t# True # åä¹‹ä¸æˆç«‹ b = int() print(isinstance(b,bool))\t# False ordã€chr ord(c)ï¼Œcä¸ºå­—ç¬¦ï¼Œè¿”å› Unicode ç ç‚¹ (åè¿›åˆ¶int) for a one-character string.\n1 2 3 4 print(ord(\u0026#39;a\u0026#39;))\t# 97 print(ord(\u0026#34;a\u0026#34;))\t# 97 print(ord(\u0026#39;â‚¬\u0026#39;)) # 8364 print(type(ord(\u0026#39;a\u0026#39;)))\t# int chr(i) ï¼Œordçš„åå‘æ“ä½œ è¿”å›ä¸€ä¸ªone-character string å¯¹åº”è¾“å…¥çš„unicodeç ç‚¹(åè¿›åˆ¶int)ï¼Œ 0 \u0026lt;= i \u0026lt;= 0x10ffff (unicodeçš„æœ€å¤§ç ç‚¹).\n1 2 3 print(chr(65)) # \u0026#39;A\u0026#39;ï¼ˆ65å¯¹åº”\u0026#39;A\u0026#39;ï¼‰ print(chr(9731)) # \u0026#39;â˜ƒ\u0026#39;ï¼ˆ9731å¯¹åº”é›ªäººç¬¦å·ï¼‰ print(type(chr(9731)))\t# str sum å¯¹iterableçš„å…ƒç´ æ±‚å’Œ\n1 2 3 print(sum([1,2,3]),sum((1,2,3)),sum({1,2,3})) # 6 6 6 print(sum(1,2,3),1)\t# 7\tç»„è®¡ç®—æ€»å’Œåå†åŠ  1 bytesã€bytearray åˆå§‹åŒ–ç©ºbytearrayã€bytes bytearray() -\u0026gt; empty bytes array bytes() -\u0026gt; empty bytes object 1 print(bytearray())\t# bytearray(b\u0026#39;\u0026#39;) åˆå§‹åŒ–nä¸ª \\x00 bytearray(int) -\u0026gt; bytes array of size given by the parameter initialized with null bytes bytes() -\u0026gt; empty bytes object 1 2 print(bytearray(2))\t# bytearray(b\u0026#39;\\x00\\x00\u0026#39;) print(bytes(2))\t# b\u0026#39;\\x00\\x00\u0026#39; è½¬æ¢intçš„å¯è¿­ä»£ç±»å‹ï¼ˆ[1,2,3], (1,2,3), {1,2,3}ç­‰ï¼‰ bytearray(iterable_of_ints) -\u0026gt; bytearray bytes(iterable_of_ints) -\u0026gt; bytes 1 2 3 # æ¯ä¸ªintèŒƒå›´ in range(256) print(bytearray([1,2,3,4]))\t# bytearray(b\u0026#39;\\x01\\x02\\x03\\x04\u0026#39;) print(bytes([1,2,3,4]))\tè½¬æ¢å­—ç¬¦ä¸²ç±»å‹ 1 2 a=bytearray(\u0026#39;å…«å¯¸\u0026#39;, \u0026#39;utf-8\u0026#39;) print(a)\t# bytearray(b\u0026#39;\\xe5\\x85\\xab\\xe5\\xaf\\xb8\u0026#39;) bytesã€bytearrayã€memoryview å’Œå…¶ä»–è‡ªå®šä¹‰çš„ç¼“å†²åŒºå¯¹è±¡é—´ç›¸äº’è½¬æ¢ bytearray(bytes_or_buffer) -\u0026gt; mutable copy of bytes_or_buffer bytes(bytes_or_buffer) -\u0026gt; immutable copy of bytes_or_buffer 1 2 3 a=b\u0026#34;abc\u0026#34;\t# bytesç±»å‹ b=bytearray(a) print(b)\t# bytearray(b\u0026#39;abc\u0026#39;)\tbytearrayç±»å‹ å¯¹æ¯”ã€‚\nä¸åŒï¼š\næ˜¯å¦å¯ä¿®æ”¹\nä½¿ç”¨ b\u0026rsquo;\u0026rsquo; æˆ– bytes() åˆ›å»ºè¿˜æ˜¯ä½¿ç”¨ bytearray() åˆ›å»º\nfile.read()å¾—å‡ºçš„æ˜¯bytes\nç›¸åŒï¼š\nå­˜å‚¨å†…å®¹ï¼šéƒ½å­˜å‚¨å­—èŠ‚æ•°æ®ï¼ˆ0åˆ°255ä¹‹é—´çš„æ•´æ•°ï¼Œ\\x00~\\xffï¼‰ã€‚\näºŒè¿›åˆ¶æ•°æ®ï¼šéƒ½é€‚åˆå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚æ–‡ä»¶ã€ç½‘ç»œé€šä¿¡ç­‰ã€‚\nç´¢å¼•å’Œåˆ‡ç‰‡ï¼šéƒ½æ”¯æŒé€šè¿‡ç´¢å¼•å’Œåˆ‡ç‰‡è®¿é—®æ•°æ®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 4ea=bytearray(\u0026#39;abc\u0026#39;, \u0026#39;utf-8\u0026#39;) b=bytes(\u0026#34;ABC\u0026#34;,\u0026#39;utf-8\u0026#39;) print(a[0])\t# 97 a[0]=65 print(a[0])\t# 65 try: b[0]=97 except Exception as e: print(f\u0026#34;{e}\u0026#34;)\t# \u0026#39;bytes\u0026#39; object does not support item assignment filter filter(function or None, iterable) \u0026ndash;\u0026gt; filter object filter å‡½æ•°ç”¨äºè¿‡æ»¤åºåˆ—ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªfilterå¯¹è±¡ã€‚æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºå‡½æ•°ï¼Œç¬¬äºŒä¸ªä¸ºåºåˆ—ï¼Œåºåˆ—çš„æ¯ä¸ªå…ƒç´ ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œå‡½æ•°éœ€è¿”å› True æˆ– Falseï¼Œæœ€åå°†è¿”å› True çš„å…ƒç´ æ”¾åˆ°filterä¸­ã€‚ 1 2 3 4 5 6 def is_odd(n): return n % 2 == 1 a = filter(is_odd, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]) b = list(a) print(b)\t# [1, 3, 5, 7, 9] å¦‚æœfunctioné‚£é‡Œå¡«äº†Noneï¼Œåˆ™è¿”å›éç©ºå…ƒç´ ã€‚ 1 2 3 a = filter(None ,[1, 2, 0, 4, \u0026#39;\u0026#39;, 6]) b = list(a) print(b)\t# [1, 2, 4, 6] filter å¯¹è±¡æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œè¿™ç‚¹ç±»ä¼¼äºç”Ÿæˆå™¨ã€‚\nä¸€æ—¦è¿­ä»£è¿‡ filter å¯¹è±¡ï¼Œå…¶å†…å®¹å°±ä¼šè¢«æ¶ˆè€—ï¼Œæ— æ³•å†æ¬¡ä½¿ç”¨ã€‚\nå¦‚æœéœ€è¦å¤šæ¬¡è®¿é—®ï¼Œå¯è½¬æ¢ä¸ºåˆ—è¡¨æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ã€‚\n1 2 3 4 5 6 7 8 def is_odd(n): return n % 2 == 1 a = filter(is_odd, [1, 2, 3]) for i in a: print(i)\t# 1\\n3\\n b=list(a) print(b)\t# [] issubclass issubclass(class1, class2)ï¼Œåˆ¤æ–­ class1 æ˜¯å¦ä¸º class2 çš„å­ç±»ã€‚ 1 2 3 4 5 6 class A: pass class B(A): pass print(issubclass(B,A)) # True pow pow(base, exp, mod=None)\tpow(åº•æ•°ï¼ŒæŒ‡æ•°ï¼Œæ¨¡æ•°=None)\nä¸¤ä¸ªå‚æ•°æ—¶ï¼Œå¾—åˆ° base**expï¼Œä¸‰ä¸ªå‚æ•°æ—¶ï¼Œå¾—åˆ° base**exp % mod\nå¯¹äºä¸€äº›ç±»å‹çš„å‚æ•°å¦‚intå‹å‚æ•°å®ƒèƒ½ç®—å¾—æ›´å¿«ã€‚\n1 2 3 4 5 6 7 # ä¸¤ä¸ªå‚æ•° print(pow(2,3))\t# 8 print(pow(2.5,2))\t# 6.25 print(pow(2,2.5))\t# 5.656854249492381 # ä¸‰ä¸ªå‚æ•° print(pow(2,34,13))\t# 10 super ä¸€å¥è¯æ¦‚æ‹¬ï¼šè°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œæ”¹å˜ä¼ å…¥å®ä¾‹ã€‚\nsuper(class, obj )ï¼Œclassâ€”â€”æŒ‡å®šä»å“ªä¸ªç±»å¼€å§‹æŸ¥æ‰¾çˆ¶ç±»æ–¹æ³•ï¼Œobjâ€”â€”ä¼ å…¥çš„å¯¹è±¡\nè¯‘ä¸º åˆ›å»ºä¸€ä¸ª ä¼ å…¥äº†å¯¹è±¡objçš„ å¯è°ƒç”¨classçš„çˆ¶ç±»çš„æ–¹æ³•çš„ å¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12 13 class Parent: def greet(self): print(\u0026#39;Parent\u0026#39;) class Child(Parent): def greet(self): print(\u0026#39;Child\u0026#39;) def react(self): print(\u0026#39;c\u0026#39;) # åœ¨ç±»å¤–éƒ¨è°ƒç”¨çˆ¶ç±»æ–¹æ³• c = Child() super(Child, c).greet() # Parent åœ¨ä¸€ä¸ªç±»é‡Œï¼Œsuper()=super(å½“å‰ç±», self)ï¼Œä¼šè‡ªåŠ¨ç»‘å®šå½“å‰ç±»å’Œå®ä¾‹(self)ï¼Œé€‚ç”¨äºç±»æ–¹æ³•ä¸­ã€‚\nè¯‘ä¸º åˆ›å»ºä¸€ä¸ª ä¼ å…¥äº†selfçš„ å¯è°ƒç”¨å½“å‰ç±»çš„çˆ¶ç±»çš„æ–¹æ³•çš„ å¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Parent(object): def __init__(self): # å®šä¹‰ä¼ å…¥çš„å¯¹è±¡çš„å±æ€§ self.parent = \u0026#39;I\\\u0026#39;m the parent.\u0026#39;\t# è¯æ˜æ‰§è¡Œ__init__æ–¹æ³•çš„è¯­å¥ print (\u0026#39;Parent\u0026#39;) def bar(self, message): # è¯æ˜å¯è°ƒç”¨å…¶ä»–æ–¹æ³•å¦‚bar print (\u0026#34;%s from Parent\u0026#34; % message) class Child(Parent): def __init__(self): # è°ƒç”¨parentçš„åˆå§‹åŒ–å‡½æ•°ï¼Œå¦‚ç»§æ‰¿çˆ¶ç±»å±æ€§ super().__init__() print (\u0026#39;Child\u0026#39;) def bar(self, message): super(Child, self).bar(message) print (\u0026#39;Child bar fuction\u0026#39;) print (self.parent) if __name__ == \u0026#39;__main__\u0026#39;: Child = Child() Child.bar(\u0026#39;HelloWorld\u0026#39;) # è¾“å‡º # Parent # Child # HelloWorld from Parent # Child bar fuction # I\u0026#39;m the parent. å¯ä¸å¯ä»¥ç†è§£ä¸º super(Child,self) é¦–å…ˆæ‰¾åˆ° Child çš„çˆ¶ç±»ï¼ˆParentï¼‰ï¼Œç„¶åæŠŠç±» Child çš„å¯¹è±¡è½¬æ¢ä¸ºç±» Parent çš„å¯¹è±¡ï¼Ÿ â€”â€” False\nå¯èƒ½ä¼šå‘ç”Ÿæ­»å¾ªç¯å—ï¼Ÿ â€”â€” True\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Parent: def __init__(self): # Parent å¯¹è±¡å¿…æœ‰aå±æ€§ self.a=123\tdef react(self): self.react() class Child(Parent): def react(self): super().react() # è¯æ˜ä¸æ˜¯Parentçš„å¯¹è±¡ try: print(b.a) except Exception as e: print(f\u0026#34;{e}\u0026#34;)\t# \u0026#39;super\u0026#39; object has no attribute \u0026#39;a\u0026#39; # è¯æ˜æ­»å¾ªç¯ c = Child() b=super(Child, c) try: super(Child, c).react() except Exception as e: print(f\u0026#34;{e}\u0026#34;)\t# maximum recursion depth exceeded å¤šé‡ç»§æ‰¿é—®AI float å°†ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•´æ•°è½¬ä¸ºæµ®ç‚¹æ•°\n1 2 3 float(123)\t# 123.0 float(\u0026#39;123\u0026#39;)\t# 123.0 float(\u0026#39;123.123\u0026#39;)\t# 123.123 iter iter() ç”¨äºè·å–å¯è¿­ä»£å¯¹è±¡çš„è¿­ä»£å™¨ï¼Œä¸¤ç§ä¼ å‚ï¼š(iterable) ã€(callable, sentinel)\niter(iterable) -\u0026gt; iterator\tä¼ å…¥å¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ã€å­—ç¬¦ä¸²ï¼Œè½¬ä¸ºiter.\nï¼ˆâ€œç»™å¯¹è±¡ç”Ÿæˆ__iter__() å’Œ __next__()â€ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 # é…åˆ next() é€æ­¥è·å–å…ƒç´ æ—¶åº”ç”¨ a=iter(\u0026#34;123\u0026#34;) print(next(a))\t# 1 print(next(a))\t# 2 print(next(a))\t# 3 # iterator æƒ°æ€§è®¡ç®— print(list(a))\t# [] # åœ¨forå¾ªç¯ä¸­éšå¼è°ƒç”¨ a=iter(\u0026#34;123\u0026#34;) for i in a: print(i) iter(callable, sentinel) -\u0026gt; iteratorï¼Œé‡å¤è°ƒç”¨æ— å‚å‡½æ•°callableï¼Œç›´åˆ°å…¶è¿”å›å€¼ç­‰äºsentinelï¼ˆå“¨å…µå€¼ï¼‰æ—¶åœæ­¢ 1 2 3 4 5 6 7 8 import random def get_random(): return random.randint(1, 10) it = iter(get_random, 7) for num in it: print(num) # æŒç»­è¾“å‡ºéšæœºæ•°ï¼Œç›´åˆ°å‡ºç°7æ—¶åœæ­¢ æ‹“å±•ï¼ˆ__iter__ï¼‰\nPython çš„è¿­ä»£å™¨ï¼šå®ç° __iter__() å’Œ __next__() æ–¹æ³•çš„å¯¹è±¡è¢«è§†ä¸ºè¿­ä»£å™¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Counter: def __init__(self, low, high): self.current = low self.high = high def __iter__(self): return self def __next__(self): if self.current \u0026gt; self.high: raise StopIteration else: self.current += 1 return self.current - 1 # ä½¿ç”¨ counter = Counter(1, 3) for num in counter: print(num) # è¾“å‡º1, 2, 3 ä»¥åé‡åˆ°äº†å†è¡¥å……äº† print print(value, \u0026hellip;, sep=\u0026rsquo; \u0026lsquo;, end=\u0026rsquo;\\n\u0026rsquo;, file=sys.stdout, flush=False)\nsepé—´éš” é»˜è®¤ä¸€ä¸ªç©ºæ ¼ï¼Œprintå®Œæˆåè¡¥å……å†…å®¹ é»˜è®¤ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¾“å‡ºæ–‡ä»¶ é»˜è®¤æ§åˆ¶å°ï¼Œæ˜¯å¦åˆ·æ–°ç¼“å­˜é»˜è®¤å¦ã€‚\n1 2 3 4 5 6 # sep print(\u0026#34;apple\u0026#34;, \u0026#34;banana\u0026#34;, \u0026#34;cherry\u0026#34;, sep=\u0026#34;, \u0026#34;)\t# apple, banana, cherry # end for i in range(3): print(i, end=\u0026#34; | \u0026#34;) # 0 | 1 | 2 | ï¼ˆåŒä¸€è¡Œï¼‰ tuple tuple(iterable=(), /)ï¼Œå°†å¯è¿­ä»£å¯¹è±¡è½¬ä¸ºå…ƒç»„ç±»å‹ï¼Œå…ƒç»„æ•°æ®ä¸å¯ä¿®æ”¹ã€‚ 1 2 a=tuple([1,2,3]) print(a)\t# (1,2,3) åˆ¤æ–­æ˜¯å¦ä¸ºå¯è¿­ä»£å¯¹è±¡ 1 2 a=[1,2,3] print(\u0026#39;__iter__\u0026#39; in dir(a))\t# True callable callableï¼ˆå¯è°ƒç”¨å¯¹è±¡ï¼‰æ˜¯æŒ‡ä»»ä½•å¯ä»¥é€šè¿‡ () è¿ç®—ç¬¦è°ƒç”¨çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šå‡½æ•°ã€æ–¹æ³•ã€ç±»ï¼Œæˆ–è€…å®ç°äº† call æ–¹æ³•çš„å¯¹è±¡ï¼Œæ˜¯å¦å…·æœ‰__call__ 1 2 3 4 5 6 7 8 # ç”¨ def æˆ– lambda å®šä¹‰çš„å‡½æ•°æ˜¯callable def greet(): print(\u0026#34;Hello!\u0026#34;) add = lambda x, y: x + y print(callable(greet))\t# True print(callable(add))\t# True 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # ç±»æœ¬èº«æ˜¯ callable ï¼ˆç±»å¯è¢«è°ƒç”¨æ¥åˆ›å»ºå®ä¾‹ï¼Œä½†å¯¹è±¡æœªå¿…ï¼‰ class A: pass a=A() print(callable(A))\t# True print(callable(a))\t# False # ç±»é‡Œå®šä¹‰äº†__call__ï¼Œè¿™æ ·å¾—åˆ°çš„å¯¹è±¡æ˜¯callable ï¼ˆèƒ½å®ç°b()ï¼‰ class B: def __call__(self): return 0 b=B() print(callable(b))\t# True print(b())\t# 0 1 2 3 4 5 6 7 8 9 # å¯¹è±¡çš„æ–¹æ³•æ˜¯ callable class A: def react(self): print(\u0026#34;great!\u0026#34;) a = A() print(callable(a.react))\t# True\t# a.react()ä¸æ˜¯callableï¼Œæ–¹æ³•reactæ²¡æœ‰è¿”å›ä¸€ä¸ªæœ‰__call__çš„å¯¹è±¡ print(callable(a.react())\t# False\tæ‹“å±•ï¼šç±»è£…é¥°å™¨ï¼ˆé€šè¿‡ __call__ å®ç°ï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 class countcalls: def __init__(self, func): self.func = func self.count = 0 def __call__(self, *args, **kwargs): # ç±»å®ä¾‹æˆä¸º Callable self.count += 1 print(f\u0026#34;å‡½æ•°å·²è¢«è°ƒç”¨ {self.count} æ¬¡\u0026#34;) return self.func(*args, **kwargs) @CountCalls # è£…é¥°å™¨ç›¸å½“äºï¼šsay_hello=countcalls(say_hello) def say_hello(): print(\u0026#34;Hello!\u0026#34;) say_hello() # è¾“å‡ºï¼šå‡½æ•°å·²è¢«è°ƒç”¨ 1 æ¬¡ â†’ Hello! say_hello() # è¾“å‡ºï¼šå‡½æ•°å·²è¢«è°ƒç”¨ 2 æ¬¡ â†’ Hello! formatã€f-string åŸºç¡€ç”¨æ³•ï¼šåŸºæœ¬æ›¿æ¢ã€ä½ç½®ç´¢å¼•ã€ä¼ é€’å˜é‡å€¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 # format text = \u0026#34;{} is {}\u0026#34;.format(\u0026#39;a\u0026#39;,\u0026#39;b\u0026#39;) print(text) # a is b text=\u0026#34;{1} is {0}\u0026#34;.format(\u0026#39;a\u0026#39;,\u0026#39;b\u0026#39;) print(text) # b is a c=123 text=\u0026#34;hi,{}\u0026#34;.format(c)\t# hi,123 ls=[\u0026#39;1\u0026#39;,\u0026#39;2\u0026#39;] text=\u0026#34;{0[0]} {0[1]}\u0026#34;.format(ls) print(text)\t# 1 2 1 2 3 # f-string name=å…«å¯¸ text=f\u0026#34;i love {name}\u0026#34; å¸¸ç”¨æ§åˆ¶æ ¼å¼ï¼šå°æ•°ä½æ•°ã€è¿›åˆ¶è½¬æ¢ã€å°æ•°è½¬ç™¾åˆ†æ¯”\nç‰¹åˆ«æ˜¯\tf\u0026quot;{num:2f}\u0026quot;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # å°æ•°ä½æ•°æ§åˆ¶ decimal=123.125 a=\u0026#34;2ä½ï¼š{decimal:.2f}\u0026#34; b=\u0026#34;3ä½ï¼š{:3f}\u0026#34;.format(decimal) # è¿›åˆ¶ n = 255 print(\u0026#34;äºŒè¿›åˆ¶: {:b}\u0026#34;.format(n)) # äºŒè¿›åˆ¶: 11111111 print(\u0026#34;åå…­è¿›åˆ¶: {n:x}\u0026#34;) # åå…­è¿›åˆ¶: ff print(\u0026#34;åè¿›åˆ¶: {n:d}\u0026#34;) # åè¿›åˆ¶: 255 print(\u0026#34;å…«è¿›åˆ¶: {:o}\u0026#34;.format(n)) # å…«è¿›åˆ¶: 377 # å°æ•°è½¬ç™¾åˆ†æ¯”ï¼Œç™¾åˆ†å·è¦æ”¾å¤§æ‹¬å·{}é‡Œ rate = 0.8523 a = \u0026#34;å®Œæˆåº¦: {rate:.2%}\u0026#34; # å–æ•´ç™¾åˆ†æ¯” b= \u0026#34;å®Œæˆåº¦: {:.2}%\u0026#34;.format(rate) print(a) # è¾“å‡ºï¼šå®Œæˆåº¦: 85.23% print(b) # è¾“å‡ºï¼šå®Œæˆåº¦: 0.85% formatæˆ–f-stringä¸‹å¤§æ‹¬å·ç”¨{{}}(åŒé‡å¤§æ‹¬å·) 1 2 text = \u0026#34;æ ¼å¼å ä½ç¬¦: {{}}\u0026#34;.format() print(text) # æ ¼å¼å ä½ç¬¦: {} å…¶ä»–å¯¹é½ã€å¡«å……å•¥çš„è¦ç”¨å†æŸ¥å°±å¥½äº†ï¼Œå¤ªæ²¡ç”¨äº† len æ±‚å„ç§åºåˆ—çš„é•¿åº¦\næ•°æ®ç±»å‹ len() ç»“æœ å­—ç¬¦ä¸² å­—ç¬¦ä¸ªæ•°ï¼ˆåŒ…æ‹¬ç©ºæ ¼ \u0026quot; \u0026ldquo;ã€ \\tã€\\n ç­‰ï¼‰ åˆ—è¡¨/å…ƒç»„ å…ƒç´ æ•°é‡ å­—å…¸ é”®å€¼å¯¹æ•°é‡ é›†åˆ å…ƒç´ æ•°é‡ å­—èŠ‚/å­—èŠ‚æ•°ç»„ å­—èŠ‚æ•°é‡ è‡ªå®šä¹‰å¯¹è±¡ å–å†³äº __len__() æ–¹æ³•çš„å®ç° 1 2 3 4 5 text = \u0026#34;Hello, ä¸–ç•Œ!\\n\u0026#34; # åŒ…å«è‹±æ–‡ã€ä¸­æ–‡ã€ç¬¦å·ã€æ¢è¡Œç¬¦ print(len(text)) # 11 ls=[[],[]] print(len(ls)) # 2 property property çš„æ ¸å¿ƒç”¨é€”æ˜¯å°†ç±»çš„æ–¹æ³•è½¬æ¢ä¸ºâ€œè™šæ‹Ÿå±æ€§â€ï¼Œ1 å°†æ–¹æ³•ä¼ªè£…æˆ\u0026quot;å±æ€§\u0026rdquo;ï¼Œ ä¼˜é›…åœ°æ§åˆ¶\u0026quot;å±æ€§\u0026quot;ã€‚\n@property\t@ method.setter\t@method.deleter\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 class Circle: def __init__(self, radius): self._radius = radius # ç§æœ‰å˜é‡ self._pi = 3.141592653589793 @property # é€šè¿‡æ–¹æ³•è¿”å›å˜é‡ï¼Œèµ·åˆ°ä¿æŠ¤_radiusä½œç”¨ï¼ˆåªè¯»ï¼‰ def radius(self): return self._radius @property # å®æ—¶è®¡ç®—é¢ç§¯area def area(self): return self._pi*(self._radius**2) @radius.setter # æ§åˆ¶radiusçš„ä¿®æ”¹ def radius(self, value): if value \u0026lt; 0: raise ValueError(\u0026#34;åŠå¾„ä¸èƒ½ä¸ºè´Ÿ\u0026#34;) self._radius = value # åˆæ³•æ—¶å­˜å‚¨ @radius.deleter # æ§åˆ¶radiusçš„åˆ é™¤ def radius(self): print(\u0026#34;ç¦æ­¢åˆ é™¤åŠå¾„ï¼\u0026#34;) c = Circle(5) print(c.radius) # 5 print(c.area)\t# 78.53981633974483 å¯¹æ¯” \u0026ldquo;.\u0026rdquo; è®¿é—®å±æ€§ å’Œ ä½¿ç”¨property åœºæ™¯ ç›´æ¥è®¿é—®å±æ€§ ä½¿ç”¨ property ä¼˜åŠ¿å¯¹æ¯”è¯´æ˜ æ•°æ®æ ¡éªŒ âŒ æ— æ³•éªŒè¯ âœ… é€šè¿‡ setter æ§åˆ¶ é¿å…éæ³•å€¼èµ‹å€¼ï¼ˆå¦‚è´ŸåŠå¾„ï¼‰ åŠ¨æ€è®¡ç®—å±æ€§å€¼ âŒ éœ€æ‰‹åŠ¨è®¡ç®— âœ… å®æ—¶è®¡ç®—ï¼ˆå¦‚ é¢ç§¯ = Ï€rÂ²ï¼‰ å±æ€§å€¼éšä¾èµ–å˜é‡è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€é¢å¤–è°ƒç”¨æ–¹æ³• éšè—å†…éƒ¨å®ç° âŒ æš´éœ²å˜é‡å âœ… å°è£…ç§æœ‰å˜é‡ï¼ˆå¦‚ _radiusï¼‰ ä¿æŠ¤å†…éƒ¨æ•°æ®å‘½åï¼Œå¤–éƒ¨ä»…é€šè¿‡å±æ€§æ¥å£è®¿é—® æ¥å£å…¼å®¹æ€§ âŒ ä¿®æ”¹å˜é‡åä¼šç ´åå¤–éƒ¨è°ƒç”¨ âœ… å¤–éƒ¨ä»ç”¨ obj.xï¼Œå†…éƒ¨å¯è‡ªç”±ä¿®æ”¹ å†…éƒ¨å˜é‡åå¯é‡æ„ï¼ˆå¦‚ _radius â†’ _rï¼‰ï¼Œä¸å½±å“å¤–éƒ¨è°ƒç”¨ï¼Œå‡å°‘ä»£ç è€¦åˆæ€§ type type(object) -\u0026gt; the object\u0026rsquo;s type\tè¿”å›å¯¹è±¡çš„typeï¼Œæ‰“å°typeä¼šæ˜¾ç¤º\u0026lt;\u0026hellip;.\u0026gt; 1 2 print(type(5)) # \u0026lt;class \u0026#39;int\u0026#39;\u0026gt; print(type(\u0026#34;hello\u0026#34;)) # \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; æ˜¯å¦è€ƒè™‘ç»§æ‰¿å…³ç³»ï¼štypeä¸æ‰¿è®¤ï¼Œisinstance() ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ã€‚\nå³â€œaæ˜¯Açš„å®ä¾‹ï¼Œaæ˜¯Açš„çˆ¶ç±»çš„å®ä¾‹å—â€\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 class A: pass class B(A): pass a=A() b=B() # æ˜¯å­ç±» åˆ™ æ˜¯çˆ¶ç±» print( isinstance(B(), A) ) # True # ä¸æ‰¿è®¤ æ˜¯å­ç±»åˆ™æ˜¯çˆ¶ç±» print( type(a) == type(b) ) # False # æ˜¯çˆ¶ç±» ä¸èƒ½åˆ¤å®š æ˜¯å­ç±» print( isinstance(A(), B) ) # False type(name, bases, dict, **kwds) -\u0026gt; a new typeï¼Œäº†è§£ï¼Œé‡åˆ°äº†å†è¡¥å…… 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # å®šä¹‰æ–¹æ³• def __init__(self, name): self.name = name def bark(self): return \u0026#34;Woof!\u0026#34; # åŠ¨æ€åˆ›å»ºç±» Dog = type( \u0026#39;Dog\u0026#39;, (), # åŸºç±»ä¸ºç©ºï¼ˆé»˜è®¤ç»§æ‰¿ objectï¼‰ { \u0026#39;__init__\u0026#39;: __init__, \u0026#39;species\u0026#39;: \u0026#34;Canis familiaris\u0026#34;, \u0026#39;bark\u0026#39;: bark } ) set é›†åˆ set() -\u0026gt; new empty set object åˆ›å»ºç©ºé›†åˆï¼Œæ³¨æ„A={}åˆ›å»ºçš„æ˜¯ç©ºå­—å…¸ 1 2 3 4 a=set() b={} print(type(a),type(b))\t# \u0026lt;class \u0026#39;set\u0026#39;\u0026gt; \u0026lt;class \u0026#39;dict\u0026#39;\u0026gt; print(a,b)\t# set() {} set(iterable) -\u0026gt; new set object\tå°†å¯è¿­ä»£æ•°æ®å˜ä¸ºé›†åˆï¼Œèƒ½èµ·åˆ°å»é‡æ•ˆæœ 1 2 3 4 5 6 7 ls=[1,2,3,2] ns=set(ls) print(ns)\t# {1, 2, 3} s=\u0026#34;rooobeam\u0026#34; ns=set(s) print(ns)\t# {\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;, \u0026#39;r\u0026#39;, \u0026#39;o\u0026#39;, \u0026#39;e\u0026#39;, \u0026#39;m\u0026#39;} é›†åˆæ¨å¯¼å¼ å’Œ ç›´æ¥åˆå§‹åŒ– 1 2 3 4 5 a={x for x in range(5)} print(a)\t# {0, 1, 2, 3, 4} b={1,2,3} print(b)\t# {1, 2, 3} é›†åˆå¯¹è±¡çš„æ–¹æ³• æ–¹æ³• ä½œç”¨ è¿”å›å€¼/è¡Œä¸º add(element) æ·»åŠ å•ä¸ªå…ƒç´  åŸåœ°ä¿®æ”¹é›†åˆï¼Œæ— è¿”å›å€¼ remove(element) åˆ é™¤æŒ‡å®šå…ƒç´ ï¼ˆå…ƒç´ ä¸å­˜åœ¨æ—¶æŠ¥é”™ï¼‰ åŸåœ°ä¿®æ”¹é›†åˆï¼Œå…ƒç´ ä¸å­˜åœ¨æ—¶æŠ› KeyError discard(element) åˆ é™¤æŒ‡å®šå…ƒç´ ï¼ˆå…ƒç´ ä¸å­˜åœ¨æ—¶ä¸æŠ¥é”™ï¼‰ åŸåœ°ä¿®æ”¹é›†åˆï¼Œæ— è¿”å›å€¼ clear() æ¸…ç©ºé›†åˆ åŸåœ°æ¸…ç©ºé›†åˆï¼Œæ— è¿”å›å€¼ s.update({4, 5}) â†’ s åŒ…å«æ–°å…ƒç´  åˆå¹¶å¤šä¸ªé›†åˆï¼ˆåŸåœ°ä¿®æ”¹ï¼‰ åŸåœ°ä¿®æ”¹é›†åˆï¼Œæ— è¿”å›å€¼ s1.intersection_update(s2) åŸåœ°ä¿ç•™äº¤é›†ï¼ˆä»…ä¿ç•™å…±åŒå…ƒç´ ï¼‰ åŸåœ°ä¿®æ”¹é›†åˆï¼Œæ— è¿”å›å€¼ s1.difference_update(s2) åŸåœ°ä¿ç•™å·®é›†ï¼ˆç§»é™¤å…¶ä»–é›†åˆçš„å…ƒç´ ï¼‰ åŸåœ°ä¿®æ”¹é›†åˆï¼Œæ— è¿”å›å€¼ s1.isdisjoint(s2) â†’ True/False åˆ¤æ–­ä¸¤ä¸ªé›†åˆæ˜¯å¦æ— äº¤é›† è¿”å› True/False s2 = s1.copy() â†’ ç”Ÿæˆç‹¬ç«‹å‰¯æœ¬ æµ…æ‹·è´é›†åˆ è¿”å›æ–°é›†åˆçš„æµ…æ‹·è´ï¼ˆä¸åŸé›†åˆç‹¬ç«‹ï¼‰ frozenset ç›´è¯‘ä¸º å†»ç»“é›†åˆ\nfrozenset() -\u0026gt; empty frozenset object\nï¼ˆ ç©º frozenset æœ€é‡è¦çš„ä½œç”¨æ˜¯ ä½œä¸ºå®‰å…¨çš„ä¸å¯å˜é»˜è®¤å€¼ï¼Œé¿å…ä½¿ç”¨å¯å˜ç©ºé›†åˆå¦‚ set()æ—¶ï¼Œå› æ„å¤–ä¿®æ”¹å¯¼è‡´çš„ç¨‹åºé€»è¾‘é”™è¯¯ ï¼‰\n1 print(frozenset())\t# frozenset() frozenset(iterable) -\u0026gt; frozenset object\nBuild an immutable unordered collection of unique elements.\nåˆ›å»ºä¸€ä¸ª ä¸å¯ä¿®æ”¹çš„ æ— åºçš„ å…ƒç´ collectionï¼Œå…ƒç´ æœ‰å”¯ä¸€æ€§ã€‚\nå°† å¯è¿­ä»£æ•°æ® å˜æˆä¸€ä¸ª å†»ç»“çš„é›†åˆ\n1 2 3 4 5 6 7 ls=[1,2,3,2] fs=frozenset(ls) print(fs)\t# frozenset({1,2,3}) s=\u0026#34;hello\u0026#34; fs=frozenset(s) print(fs)\t# frozenset({\u0026#39;e\u0026#39;, \u0026#39;h\u0026#39;, \u0026#39;o\u0026#39;, \u0026#39;l\u0026#39;}) frozenset({A, B})ç±»ä¼¼ä¸€ä¸ªâ€œç»„åˆå€¼â€ï¼Œå¯ä»¥ä½œä¸ºå­—å…¸çš„é”®æˆ–é›†åˆçš„å…ƒç´ ï¼ˆå¯å“ˆå¸Œæ€§ï¼‰ 1 2 3 4 5 6 7 fs = frozenset({1, 2}) dict = {fs: \u0026#34;1, 2\u0026#34;} print(dict[fs])\t# 1, 2 fs_set={fs,1} print(fs_set)\t# {1, frozenset({1, 2})} æ”¯æŒé›†åˆæ“ä½œ ä½œç”¨ æ–¹æ³• è¿”å›å¹¶é›† fs1.union(fs2) â†’ åŒ `fs1 è¿”å›äº¤é›† fs1.intersection(fs2) â†’ åŒ fs1 \u0026amp; fs2 è¿”å›å·®é›†ï¼ˆA - Bï¼‰ fs1.difference(fs2) â†’ åŒ fs1 - fs2 åˆ¤æ–­æ˜¯å¦ä¸ºå­é›† fs1.issubset(fs2) â†’ False è¿”å›å‰¯æœ¬ï¼ˆä¸åŸå¯¹è±¡ç›¸åŒï¼‰ fs2=fs.copy() â†’ æ–° frozenset list list(iterable=(), /), å‡½æ•°/æ“ä½œ ä½œç”¨ ç¤ºä¾‹ å®šä¹‰åˆ—è¡¨ åˆ›å»ºåˆ—è¡¨ my_list = [1, \u0026quot;a\u0026quot;, True] ç´¢å¼• è®¿é—®å•ä¸ªå…ƒç´ ï¼ˆæ”¯æŒæ­£è´Ÿç´¢å¼•ï¼‰ my_list[0]ï¼Œmy_list[-1] åˆ‡ç‰‡ æˆªå–å­åˆ—è¡¨ my_list[1:3] ç›´æ¥èµ‹å€¼ ä¿®æ”¹å•ä¸ªå…ƒç´  my_list[0] = 100 åˆ‡ç‰‡èµ‹å€¼ ä¿®æ”¹æˆ–æ›¿æ¢å­åˆ—è¡¨ my_list[1:2] = [200, 300] append(x) åœ¨æœ«å°¾æ·»åŠ å•ä¸ªå…ƒç´  list = [1,2]; list.append(3) extend(iterable) åˆå¹¶å¯è¿­ä»£å¯¹è±¡åˆ°æœ«å°¾ list = [1,2]; list.extend([3,4]) â†’ [1,2,3,4] del list[0:2] åˆ é™¤å…ƒç´  list = [1,2,3]; del list[1] â†’ [1,3] åˆ—è¡¨æ¨å¯¼å¼ ç”Ÿæˆåˆ—è¡¨ y=[x if x\u0026gt;1 else -1 for x in [1,2,3] ] sort() åŸåœ°æ’åº list = [3,1,2]; list.sort() reverse() åŸåœ°åè½¬åˆ—è¡¨é¡ºåº list = [1,2,3]; list.reverse() copy() åˆ›å»ºæµ…æ‹·è´åˆ—è¡¨ new_list = list.copy() count(x) ç»Ÿè®¡å…ƒç´  x çš„å‡ºç°æ¬¡æ•° list = [1,2,2,3]; list.count(2) -\u0026gt; 2 index(x) è¿”å› x ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• list = [1,2,2,3]; list.index(2) -\u0026gt; 1 æµ…æ‹·è´ å¤åˆ¶å¤–å±‚å¯¹è±¡ï¼ˆåµŒå¥—å…±äº«å¼•ç”¨ï¼‰ a = [[1,2],3]; b = a.copy() len(list) è¿”å›åˆ—è¡¨é•¿åº¦ len([1,2,3]) max(list) è¿”å›æœ€å¤§å€¼ max([1,3,2]) min(list) è¿”å›æœ€å°å€¼ min([1,3,2]) sum(list) å¯¹æ•°å€¼åˆ—è¡¨æ±‚å’Œ sum([1,2,3]) any(list) æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸º True çš„å…ƒç´  any([0, False, 1]) all(list) æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ ä¸º True all([1, True, 0]) enumerate(list) è¿”å›ç´¢å¼•-å€¼å¯¹çš„è¿­ä»£å™¨ list(enumerate([\u0026quot;a\u0026quot;, \u0026quot;b\u0026quot;])) åˆ—è¡¨æ¨å¯¼å¼ enumerate åŒæ—¶è·å– ç´¢å¼•å’Œå…ƒç´  1 2 3 ls=[\u0026#34;i\u0026#34;,\u0026#34;love\u0026#34;,\u0026#34;you\u0026#34;] for i,elem in enumerate(ls): print(i,elem,end=\u0026#39; \u0026#39;)\t# 0 is i 1 is love 2 is you range range(end) -\u0026gt; [0, end,1) â€œä»0å¼€å§‹ï¼Œåˆ°endä¹‹å‰ï¼ŒåŒ…æ‹¬0ä¸åŒ…æ‹¬endï¼Œæ­¥é•¿ä¸º1â€ 1 2 for number in range(6): print(number,end=\u0026#39; \u0026#39;)\t# 0 1 2 3 4 5 range(start, end, step) -\u0026gt; [start, end, step) â€œä»startå¼€å§‹ï¼Œåˆ°endä¹‹å‰ï¼ŒåŒ…æ‹¬startä¸åŒ…æ‹¬endï¼Œæ­¥é•¿ä¸ºstepâ€ 1 2 for number in range(1, 6, 2): print(number,end=\u0026#39; \u0026#39;)\t# 1 3 5 range(start, end, -1) -\u0026gt; [start, end, -1) ä»å¤§åˆ°å°çš„rangeï¼Œstepä¸ºè´Ÿå€¼ï¼Œstartå¿…é¡»\u0026gt;=end 1 2 for number in range(6, 1, -2): print(number,end=\u0026#39; \u0026#39;)\t# 6 4 2 classmethod classmethodæ˜¯ä¸€ç§è£…é¥°å™¨ï¼Œç”¨äº**@classmethodå®šä¹‰ç±»æ–¹æ³•**ã€‚ æ–¹æ³•ç±»å‹ è£…é¥°å™¨ é¦–ä¸ªå‚æ•° è®¿é—®æƒé™ å…¸å‹åœºæ™¯ å®ä¾‹æ–¹æ³• æ—  self å®ä¾‹å±æ€§ã€ç±»å±æ€§ æ“ä½œå®ä¾‹æ•°æ® ç±»æ–¹æ³• @classmethod cls ç±»å±æ€§ã€å…¶ä»–ç±»æ–¹æ³• å·¥å‚æ–¹æ³•ã€æ“ä½œç±»çŠ¶æ€ é™æ€æ–¹æ³• @staticmethod æ—  æ— æ³•è®¿é—®ç±»å±æ€§ã€å®ä¾‹å±æ€§ å·¥å…·å‡½æ•°ï¼Œä¸ç±»é€»è¾‘ç›¸å…³ä½†ä¸ä¾èµ–æ•°æ® ç”¨äºéœ€è¦è®¿é—®æˆ–ä¿®æ”¹ç±»çŠ¶æ€ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 class A(object): bar = 1 def func1(self): print (\u0026#39;hi\u0026#39;) @classmethod def func2(cls): print (\u0026#39;func2\u0026#39;) # è®¿é—®ç±»å±æ€§ print (cls.bar) # è°ƒç”¨ ç±»ä¸­çš„æ™®é€šæ–¹æ³• cls().func1() A.func2() # ä¸éœ€è¦å®ä¾‹åŒ– å®ç°å·¥å‚æ¨¡å¼ â€”â€” ç±»æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œæ¯”å¦‚ï¼Œæ ¹æ®æ–‡ä»¶æ‰©å±•åï¼ˆå¦‚.jsonã€.xmlã€.csvï¼‰åˆ›å»ºç›¸åº”çš„è§£æå™¨å¯¹è±¡ï¼Œå°è£…äº† æ‰€æ”¯æŒçš„æ ¼å¼ çš„ ç±»å±æ€§ã€è·å–ç‰¹å®šæ ¼å¼å¯¹è±¡ çš„ ç±»æ–¹æ³•ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Parser: _supported_formats = [\u0026#34;.json\u0026#34;, \u0026#34;.xml\u0026#34;, \u0026#34;.csv\u0026#34;] @classmethod def create_parser(cls, file_path): # è®¿é—®ç±»å±æ€§è·å–æ”¯æŒæ ¼å¼ for fmt in cls._supported_formats: if file_path.endswith(fmt): return cls._get_parser_by_format(fmt) raise ValueError(\u0026#34;Unsupported format\u0026#34;) @classmethod def _get_parser_by_format(cls, fmt): # è°ƒç”¨å…¶ä»–ç±»æ–¹æ³• if fmt == \u0026#34;.json\u0026#34;: return JsonParser() elif fmt == \u0026#34;.xml\u0026#34;: return XmlParser() elif fmt == \u0026#34;.csv\u0026#34;: return CsvParser() # è°ƒç”¨ parser = Parser.create_parser(\u0026#34;data.json\u0026#34;) repr repr(obj, /)\tè¿”å›å¯¹è±¡çš„è§„èŒƒå­—ç¬¦ä¸²ï¼Œç”¨äºæ˜ç¡®æè¿°å¯¹è±¡çŠ¶æ€ã€‚\nå§‹ç»ˆä¸ºè‡ªå®šä¹‰ç±»å®šä¹‰__repr__ï¼Œé¿å…é»˜è®¤çš„\u0026lt;ClassName object at 0x...\u0026gt;è¾“å‡ºã€‚ä¼˜å…ˆä½¿ç”¨\nf-stringç”Ÿæˆè¿”å›å€¼ã€‚\nprint()æ—¶ æˆ– äº¤äº’å¼ç¯å¢ƒä¸­è¾“å…¥å¯¹è±¡åæ—¶ï¼ˆå¦‚\u0026gt;\u0026gt;\u0026gt; objï¼‰ è°ƒç”¨objçš„__repr__è¾“å‡ºç›¸å…³ä¿¡æ¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 class A: def __init__(self, x): self.x = x def __repr__(self): return f\u0026#34;x={self.x}\u0026#34; # æ˜ç¡®ä¸”å¯è¿˜åŸçš„è¡¨ç¤º a = A(3) print(a) # x=3 print(repr(a)) # x=3 class B: def __init__(self, x): self.x = x b=B(7) print(b)\t# \u0026lt;__main__.B object at 0x000001893F4A6E80\u0026gt; zip zip(*iterables) ï¼Œ*iterablesè¡¨åå¯æœ‰å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå…ƒç´ ä¸ºå…ƒç»„çš„ zip å¯¹è±¡ï¼Œä»¥æœ€çŸ­çš„å¯è¿­ä»£å¯¹è±¡ä¸ºç»ˆç‚¹ã€‚ 1 2 3 4 5 6 7 8 9 10 a = [1,2,3] b = [4,5,6] c = [4,5,6,7,8] zip_ab = zip(a,b) print(list(zip_ab)) # [(1, 4), (2, 5), (3, 6)] # å…ƒç´ ä¸ªæ•°ä¸æœ€çŸ­çš„åˆ—è¡¨ä¸€è‡´ zip_ac = zip(a,c) print(list(zip_ac)) # [(1, 4), (2, 5), (3, 6)] å…¶ä»–ï¼š Nä¸ªiterableçš„åˆ™Nå…ƒç»„ï¼Œ æƒ°æ€§è®¡ç®—ç±»ä¼¼ç”Ÿæˆå™¨ã€iter()ï¼Œè¿‡ä¸€éå°±æ²¡äº† zip(*) è§£å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 a=[\u0026#39;a\u0026#39;,\u0026#39;b\u0026#39;,\u0026#39;c\u0026#39;] b=[1,2,3,4] c=[\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;C\u0026#39;,\u0026#39;D\u0026#39;] # a,b,c -\u0026gt; ä¸‰å…ƒç»„ zip_abc=zip(a,b,c) print(list(zip_abc))\t# [(\u0026#39;a\u0026#39;, 1, \u0026#39;A\u0026#39;), (\u0026#39;b\u0026#39;, 2, \u0026#39;B\u0026#39;), (\u0026#39;c\u0026#39;, 3, \u0026#39;C\u0026#39;)] # è¿‡ä¸€éå°±æ²¡äº†ï¼Œè¦é‡ç”Ÿæˆ print(list(zip_abc))\t# [] # ä¸ zip ç›¸åï¼Œzip(*) å¯ç†è§£ä¸ºè§£å‹ï¼Œ aa, bb, cc = zip(*zip_abc) print(aa,bb,cc)\t# (\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;, \u0026#39;c\u0026#39;) (1, 2, 3) (\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;) æŠŠå„ä¸ªè¿­ä»£å¯¹è±¡å‹ç¼©åœ¨ä¸€èµ·ï¼Œå¯ä»¥ä¸€èµ·éå†ï¼Œä¸”æƒ°æ€§è®¡ç®—ã€‚ï¼ˆå ç©ºé—´å°ï¼‰ map map(func, *iterables)\tåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨(map)ï¼Œå­˜æœ‰å„å¯è¿­ä»£å¯¹è±¡çš„å‚æ•°ä¾æ¬¡æ‰§è¡Œå‡½æ•°è®¡ç®—çš„ç»“æœï¼Œå½“æœ€çŸ­çš„å¯è¿­ä»£å¯¹è±¡è€—å°½æ—¶ç»ˆæ­¢ã€‚ æ•°æ®å€¼å¤„ç† 1 2 3 4 5 a=[1,2,3,4] b=[10,20,30,40] map_ab=map(lambda x,y:x+y,a,b) for i in map_ab: print(i,end=\u0026#39; \u0026#39;)\t# 11 22 33 44 æ•°æ®ç±»å‹å¤„ç†ï¼Œç”¨ä¸Šå„ç§å†…ç½®å‡½æ•°å¦‚int list strï¼Œä½†ä¸æ‹¬å· 1 2 3 4 5 6 7 # è¾“å…¥1 2ï¼Œè¾“å‡º1 2ï¼Œè¾“å…¥å°æ•°ä¹Ÿä¼šè½¬ä¸ºintç±»å‹ a,b = map(int, input().split()) print(a,b) # å­—æ¯å¤§å†™ m = map(str.upper, [\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;]) print(list(m)) # [\u0026#39;A\u0026#39;, \u0026#39;B\u0026#39;] reversed reversed(sequence, /) Return a reverse iterator over the values of the given sequence. è¿­ä»£å™¨ç±»å‹ï¼Œå ç”¨ç©ºé—´æ²¡é‚£ä¹ˆå¤§ï¼Œæƒ°æ€§è®¡ç®—ï¼Œè¿‡ä¸€éå°±æ²¡äº†\u0026hellip; æ³¨æ„è¦åŠ \u0026rsquo;d\u0026rsquo; reversed 1 2 3 a=[1,2,3] b=reversed(a) print([e for e in b])\t# [3,2,1] -æ›´å¸¸ç”¨çš„æ–¹å¼ï¼š[::-1]ã€‚ä½†å¾—æ˜¯å¯åˆ‡ç‰‡å‹æ•°æ®ï¼Œå³è¦æœ‰__getitem__æ–¹æ³•\n1 2 3 ls = [1,2,3] new_ls=ls[::-1] print(new_ls)\t# [3,2,1] import_module åŠ¨æ€å¯¼å…¥æ¨¡å—ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶ï¼ˆå¦‚é…ç½®æ–‡ä»¶ã€ç”¨æˆ·è¾“å…¥ã€æ’ä»¶ç³»ç»Ÿç­‰ï¼‰å†³å®šåŠ è½½å“ªäº›æ¨¡å—ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 from importlib import import_module # æ ¹æ®é…ç½®(å­—å…¸)é€‰æ‹©æ¨¡å— config = {\u0026#34;DATABASE\u0026#34;: \u0026#34;mysql\u0026#34;} # å¯èƒ½çš„å€¼: \u0026#34;mysql\u0026#34;, \u0026#34;postgresql\u0026#34;, \u0026#34;sqlite\u0026#34; db_module = import_module(f\u0026#34;database.{config[\u0026#39;DATABASE\u0026#39;]}\u0026#34;) # main.py ä¸­åŠ¨æ€å¯¼å…¥ utils # ç›®å½•ç»“æ„ # mypackage / # |_ __init__.py # |_ utils.py # |_ main.py utils = import_module(\u0026#34;.utils\u0026#34;, package=\u0026#34;mypackage\u0026#34;) # package å‚æ•°æŒ‡å®šäº†ç›¸å¯¹å¯¼å…¥çš„åŸºå‡†åŒ…ï¼ˆå³ . çš„èµ·ç‚¹ï¼‰ï¼Œpackage=\u0026#34;mypackage\u0026#34;ï¼Œ # åˆ™ .utils è¡¨ç¤º mypackage.utils # åŠ è½½ plugins ç›®å½•ä¸‹çš„æ‰€æœ‰æ’ä»¶ plugin_names = [\u0026#34;plugin1\u0026#34;, \u0026#34;plugin2\u0026#34;] # å¯åŠ¨æ€æ‰«æç›®å½•è·å– plugins = [] for name in plugin_names: plugin = import_module(f\u0026#34;plugins.{name}\u0026#34;) complex complex([real[, imag]])ï¼Œè¿”å›å¤æ•° 1 2 3 4 5 6 7 8 9 10 11 12 a=complex(1, 2)\tprint(a)\t# (1 + 2j) a=complex(1) print(a) # (1 + 0j) a=complex(\u0026#34;1\u0026#34;) print(a)\t# (1 + 0j) # æ³¨æ„ï¼šè¿™ä¸ªåœ°æ–¹åœ¨\u0026#34;+\u0026#34;å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å†™æˆ\u0026#34;1 + 2j\u0026#34;ï¼Œåº”è¯¥æ˜¯\u0026#34;1+2j\u0026#34;ï¼Œå¦åˆ™ä¼šæŠ¥é”™ a=complex(\u0026#34;1+2j\u0026#34;) print(a)\t# (1 + 2j) hasattr hasattr(obj, name, /) Return whether the object has an attribute with the given name.\nhasattr(æ£€æŸ¥å¯¹è±¡, åå­—)\næ£€æŸ¥å¯¹è±¡ï¼ˆç±»å®ä¾‹ã€ç±»ã€æ¨¡å—ç­‰ï¼‰æ˜¯å¦æœ‰ æŒ‡å®šçš„ å±æ€§/æ–¹æ³•ï¼Œè¿”å›True/False\nå±æ€§/æ–¹æ³•ï¼šå­—ç¬¦ä¸²\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨ class A: def __init__(self, name): self.name = name a = A(\u0026#34;Alice\u0026#34;) print(hasattr(a, \u0026#34;name\u0026#34;)) # è¾“å‡º: True print(hasattr(a, \u0026#34;age\u0026#34;)) # è¾“å‡º: False # æ£€æŸ¥æ–¹æ³•æ˜¯å¦å­˜åœ¨ class B: def add(self, a, b): return a + b print(hasattr(B, \u0026#34;add\u0026#34;)) # è¾“å‡º: True print(hasattr(B, \u0026#34;multiply\u0026#34;)) # è¾“å‡º: False å¤ä¹ getattrã€setattr rooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\nrooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\nrooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\trooobeam â€¢ è‘—\n10000è¯ï¼\n","date":"2025-03-24T00:00:00Z","image":"https://rooobeam.github.io/p/python3%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/rz0sefu53fe_hu_359b55b65c1f5167.webp","permalink":"https://rooobeam.github.io/p/python3%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/","title":"Python3å†…ç½®å‡½æ•°"},{"content":"ç¬¬ä¸‰ç«  è¿›ç¨‹ç®¡ç† 3.1 æ¦‚è¿° 3.1.1 ç¨‹åºçš„é¡ºåºæ‰§è¡Œå’Œå¹¶å‘æ‰§è¡Œ 1. ç¨‹åºçš„é¡ºåºæ‰§è¡Œ ç‰¹ç‚¹ï¼š é¡ºåºæ€§ï¼šæŒ‰ç¨‹åºç»“æ„ä¾æ¬¡æ‰§è¡Œï¼ˆå¯èƒ½åŒ…å«åˆ†æ”¯æˆ–å¾ªç¯ï¼‰ã€‚ å°é—­æ€§ï¼šç‹¬å æ‰€æœ‰èµ„æºï¼Œç¨‹åºæ‰§è¡Œä¸å—å¤–ç•Œå½±å“ã€‚ å¯å†ç°æ€§ï¼šç›¸åŒåˆå§‹æ¡ä»¶å¿…å®šå¾—åˆ°ç›¸åŒç»“æœã€‚ 2. ç¨‹åºçš„å¹¶å‘æ‰§è¡Œ å®šä¹‰ï¼šå¤šä¸ªç¨‹åºæ®µåœ¨æ—¶é—´ä¸Šé‡å æ‰§è¡Œï¼ˆä¸€ä¸ªæœªç»“æŸï¼Œå¦ä¸€ä¸ªå·²å¼€å§‹ï¼‰ã€‚ å¹¶å‘ vs å¹¶è¡Œï¼š å¹¶å‘ å¹¶è¡Œ ä¸€æ®µæ—¶é—´å†…äº¤æ›¿æ‰§è¡Œ åŒä¸€ç‰©ç†æ—¶åˆ»åŒæ—¶æ‰§è¡Œ ç‰¹å¾ï¼š é—´æ–­æ€§ï¼šç¨‹åºæ‰§è¡Œâ€œèµ°èµ°åœåœâ€ï¼Œæ—¶åºå¯èƒ½è¢«æ‰“æ–­ã€‚ å¤±å»å°é—­æ€§ï¼šå…±äº«èµ„æºå¯¼è‡´çŠ¶æ€å—å…¶ä»–ç¨‹åºå½±å“ã€‚ å¤±å»å¯å†ç°æ€§ï¼šæ‰§è¡Œç»“æœå› è°ƒåº¦é¡ºåºä¸åŒè€Œä¸åŒã€‚ é—®é¢˜ä¸¾ä¾‹ï¼š å…±äº«å †æ ˆæ—¶ï¼Œgetaddr()å’Œreladdr()å¹¶å‘æ‰§è¡Œå¯èƒ½å¯¼è‡´é”™è¯¯ç»“æœã€‚ å¹¶å‘æ‰§è¡Œæ¡ä»¶ï¼š éœ€é¿å…å…±äº«èµ„æºå†²çªï¼ˆé€šè¿‡äº’æ–¥ã€åŒæ­¥æœºåˆ¶ï¼‰ã€‚ 3.1.2 è¿›ç¨‹çš„å®šä¹‰ä¸ç‰¹å¾ 1. è¿›ç¨‹å®šä¹‰ å®šä¹‰ï¼šç¨‹åºåœ¨æ•°æ®é›†ä¸Šçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œæ´»åŠ¨ï¼Œæ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚ ç»„æˆï¼šç¨‹åº + æ•°æ® + PCBï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰ã€‚ 2. è¿›ç¨‹ç‰¹å¾ ç‰¹å¾ è¯´æ˜ åŠ¨æ€æ€§ è¿›ç¨‹ä»åˆ›å»ºåˆ°æ¶ˆäº¡ç»å†çŠ¶æ€å˜åŒ–ï¼ˆè¿è¡Œã€å°±ç»ªã€é˜»å¡ï¼‰ã€‚ ç‹¬ç«‹æ€§ å„è¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œé™¤éé€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰äº¤äº’ã€‚ å¹¶å‘æ€§ å¤šä¸ªè¿›ç¨‹å¯åŒæ—¶æ¨è¿›æ‰§è¡Œã€‚ å¼‚æ­¥æ€§ è¿›ç¨‹æ‰§è¡Œé€Ÿåº¦ä¸å¯é¢„æµ‹ï¼Œéœ€åŒæ­¥æœºåˆ¶åè°ƒã€‚ ç»“æ„åŒ– ç”±ä»£ç æ®µã€æ•°æ®æ®µå’Œ PCB ç»„æˆã€‚ 3.1.3 è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ« å¯¹æ¯”é¡¹ è¿›ç¨‹ ç¨‹åº æœ¬è´¨ åŠ¨æ€æ‰§è¡Œå®ä½“ é™æ€æŒ‡ä»¤é›†åˆ ç”Ÿå‘½å‘¨æœŸ çŸ­æš‚ï¼ˆåˆ›å»ºâ†’è¿è¡Œâ†’ç»ˆæ­¢ï¼‰ æ°¸ä¹…å­˜å‚¨ ç»„æˆ ç¨‹åº + æ•°æ® + PCB ä»£ç æ–‡ä»¶ èµ„æºç«äº‰ æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ æ— èµ„æºç«äº‰ å¹¶å‘æ€§ æ”¯æŒå¹¶å‘/å¹¶è¡Œæ‰§è¡Œ æ—  3.1.4 è¿›ç¨‹ä¸ä½œä¸šçš„å…³ç³» ä½œä¸šï¼šç”¨æˆ·æäº¤çš„ä»»åŠ¡å®ä½“ï¼ˆå¦‚æ‰¹å¤„ç†ä½œä¸šï¼‰ã€‚ å…³ç³»ï¼š ä¸€ä¸ªä½œä¸šç”±å¤šä¸ªè¿›ç¨‹ç»„æˆï¼ˆè‡³å°‘ä¸€ä¸ªè¿›ç¨‹ï¼‰ã€‚ ä½œä¸šæ¦‚å¿µä¸»è¦ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿï¼›è¿›ç¨‹ç”¨äºæ‰€æœ‰å¤šé“ç³»ç»Ÿã€‚ ç¤ºä¾‹ï¼šç¼–è¯‘ä½œä¸šå¯èƒ½åŒ…å«é¢„å¤„ç†ã€ç¼–è¯‘ã€é“¾æ¥ç­‰å¤šä¸ªè¿›ç¨‹ã€‚ Q\u0026amp;A Q1: å¹¶å‘æ‰§è¡Œå¯èƒ½å¯¼è‡´ç»“æœä¸å¯å†ç°çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ Aï¼šå…±äº«èµ„æºå†²çªã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªè¿›ç¨‹åŒæ—¶ä¿®æ”¹å…±äº«å˜é‡ x æ—¶ï¼Œè‹¥æœªåŒæ­¥ï¼Œæ‰§è¡Œé¡ºåºä¸åŒä¼šå¯¼è‡´ç»“æœä¸åŒã€‚\nQ2: è¿›ç¨‹çš„åŸºæœ¬ç‰¹å¾åŒ…æ‹¬å“ªäº›ï¼Ÿ Aï¼šåŠ¨æ€æ€§ã€ç‹¬ç«‹æ€§ã€å¹¶å‘æ€§ã€å¼‚æ­¥æ€§ã€ç»“æ„åŒ–ã€‚\nQ3: è¿›ç¨‹å’Œç¨‹åºçš„æœ¬è´¨åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ Aï¼šåŠ¨æ€æ€§ vs é™æ€æ€§ã€‚è¿›ç¨‹æ˜¯æ‰§è¡Œä¸­çš„åŠ¨æ€å®ä½“ï¼Œç¨‹åºæ˜¯é™æ€ä»£ç ã€‚\nQ4: è¿›ç¨‹ä»è¿è¡Œæ€å˜ä¸ºé˜»å¡æ€çš„åŸå› å¯èƒ½æ˜¯ä»€ä¹ˆï¼Ÿ Aï¼šç­‰å¾… I/O å®Œæˆ æˆ– è¯·æ±‚ç³»ç»ŸæœåŠ¡æœªå°±ç»ªã€‚\nQ5: è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ Aï¼šè®°å½•è¿›ç¨‹çŠ¶æ€ã€èµ„æºåˆ†é…ã€è°ƒåº¦ä¿¡æ¯ï¼Œæ˜¯æ“ä½œç³»ç»Ÿæ„ŸçŸ¥å’Œç®¡ç†è¿›ç¨‹çš„å”¯ä¸€æ ‡è¯†ã€‚\n3.2 è¿›ç¨‹çš„æè¿° 3.2.1 è¿›ç¨‹çš„ç»„æˆ è¿›ç¨‹ = ç¨‹åº + æ•°æ® + PCBï¼ˆè¿›ç¨‹æ§åˆ¶å—ï¼‰ ç¨‹åºï¼šè¿›ç¨‹æ‰§è¡Œçš„ä»£ç æ®µã€‚ æ•°æ®ï¼šè¿›ç¨‹å¤„ç†çš„å¯¹è±¡ï¼ˆå˜é‡ã€å †æ ˆç­‰ï¼‰ã€‚ PCBï¼šè®°å½•è¿›ç¨‹çŠ¶æ€ã€èµ„æºåˆ†é…ã€è°ƒåº¦ä¿¡æ¯ç­‰ï¼Œæ˜¯æ“ä½œç³»ç»Ÿçš„ç®¡ç†ä¾æ®ã€‚ 3.2.2 è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ 1. PCBçš„åŠŸèƒ½ å”¯ä¸€æ ‡è¯†è¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡PCBæ„ŸçŸ¥å’Œç®¡ç†è¿›ç¨‹ã€‚ è®°å½•åŠ¨æ€ç‰¹æ€§ï¼ˆçŠ¶æ€ã€ä¼˜å…ˆçº§ã€èµ„æºå ç”¨ç­‰ï¼‰ã€‚ å­˜å‚¨CPUç°åœºä¿æŠ¤ä¿¡æ¯ï¼ˆå¯„å­˜å™¨å€¼ã€ç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰ã€‚ 2. PCBçš„ç‰¹å¾ å¸¸é©»å†…å­˜ï¼Œéšè¿›ç¨‹åˆ›å»º/æ’¤é”€è€Œå‡ºç°/æ¶ˆå¤±ã€‚ ä¸è¿›ç¨‹ä¸€ä¸€å¯¹åº”ï¼Œæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚ 3. PCBçš„å†…å®¹ åˆ†ç±» å…·ä½“å†…å®¹ æè¿°ä¿¡æ¯ è¿›ç¨‹IDã€è¿›ç¨‹åã€ç”¨æˆ·IDã€è¿›ç¨‹ç»„å…³ç³»ã€‚ æ§åˆ¶ä¿¡æ¯ å½“å‰çŠ¶æ€ã€ä¼˜å…ˆçº§ã€ä»£ç å…¥å£åœ°å€ã€åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä¿¡å·é‡ï¼‰ã€‚ èµ„æºä¿¡æ¯ è™šæ‹Ÿåœ°å€ç©ºé—´çŠ¶æ€ã€æ‰“å¼€æ–‡ä»¶åˆ—è¡¨ã€å†…å­˜åˆ†é…æƒ…å†µã€‚ CPUç°åœº å¯„å­˜å™¨å€¼ï¼ˆé€šç”¨å¯„å­˜å™¨ã€ç¨‹åºè®¡æ•°å™¨PCã€çŠ¶æ€å¯„å­˜å™¨PSWã€æ ˆæŒ‡é’ˆï¼‰ã€‚ 3.2.3 è¿›ç¨‹ä¸Šä¸‹æ–‡ 1. å®šä¹‰ è¿›ç¨‹æ‰§è¡Œå…¨è¿‡ç¨‹çš„é™æ€æè¿°ï¼ŒåŒ…æ‹¬ç”¨æˆ·åœ°å€ç©ºé—´ã€å¯„å­˜å™¨å’Œæ ¸å¿ƒæ•°æ®ç»“æ„ã€‚ 2. ç»„æˆ ç±»å‹ å†…å®¹ ç”¨æˆ·çº§ä¸Šä¸‹æ–‡ ç”¨æˆ·ç¨‹åºæ®µï¼ˆä»£ç ã€æ•°æ®ã€å †æ ˆï¼‰ã€‚ å¯„å­˜å™¨çº§ä¸Šä¸‹æ–‡ CPUå¯„å­˜å™¨å€¼ï¼ˆPCã€PSWã€æ ˆæŒ‡é’ˆç­‰ï¼‰ã€‚ ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡ é™æ€éƒ¨åˆ†ï¼ˆPCBï¼‰ã€åŠ¨æ€éƒ¨åˆ†ï¼ˆæ ¸å¿ƒæ ˆï¼Œç”¨äºç³»ç»Ÿè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰ã€‚ 3.2.4 PCBçš„ç»„ç»‡æ–¹å¼ 1. é“¾è¡¨æ–¹å¼ æŒ‰çŠ¶æ€åˆ†ç±»ï¼šå°±ç»ªé“¾è¡¨ã€é˜»å¡é“¾è¡¨ã€‚ ä¼˜ç‚¹ï¼šåŠ¨æ€ç®¡ç†çµæ´»ï¼Œé€‚åˆé¢‘ç¹æ’å…¥/åˆ é™¤ã€‚ ç¤ºä¾‹ï¼š\n2. ç´¢å¼•è¡¨æ–¹å¼ æ¯ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªç´¢å¼•è¡¨ï¼ˆå¦‚å°±ç»ªç´¢å¼•è¡¨ã€é˜»å¡ç´¢å¼•è¡¨ï¼‰ã€‚ ä¼˜ç‚¹ï¼šæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œé€‚åˆå›ºå®šçŠ¶æ€ç®¡ç†ã€‚ ç¤ºä¾‹ï¼š\n3.2.5 è¿›ç¨‹çš„çŠ¶æ€åŠå…¶è½¬æ¢ 1. ä¸‰ç§åŸºæœ¬çŠ¶æ€ çŠ¶æ€ è¯´æ˜ å°±ç»ªæ€ å·²å…·å¤‡è¿è¡Œæ¡ä»¶ï¼Œç­‰å¾…CPUåˆ†é…ã€‚ è¿è¡Œæ€ å ç”¨CPUæ‰§è¡ŒæŒ‡ä»¤ã€‚ é˜»å¡æ€ å› ç­‰å¾…äº‹ä»¶ï¼ˆå¦‚I/Oå®Œæˆï¼‰æ— æ³•ç»§ç»­æ‰§è¡Œã€‚ 2. çŠ¶æ€è½¬æ¢ æ­¤å¤„å°‘å†…å®¹\nè¿è¡Œâ†’å°±ç»ªï¼šæ—¶é—´ç‰‡ç”¨å®Œæˆ–é«˜ä¼˜å…ˆçº§è¿›ç¨‹æŠ¢å ã€‚ è¿è¡Œâ†’é˜»å¡ï¼šç­‰å¾…èµ„æºæˆ–äº‹ä»¶ï¼ˆå¦‚I/Oè¯·æ±‚ï¼‰ã€‚ é˜»å¡â†’å°±ç»ªï¼šç­‰å¾…äº‹ä»¶å®Œæˆï¼ˆå¦‚I/Oç»“æŸï¼‰ã€‚ 3. æ‰©å±•çŠ¶æ€ åˆ›å»ºæ€ï¼šè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼ˆåˆ†é…PCBã€åˆå§‹åŒ–èµ„æºï¼‰ã€‚ ç»ˆæ­¢æ€ï¼šè¿›ç¨‹å·²ç»“æŸï¼Œé‡Šæ”¾èµ„æºä½†ä¿ç•™PCBä¿¡æ¯ã€‚ æŒ‚èµ·æ€ï¼šè¿›ç¨‹è¢«ç§»åˆ°å¤–å­˜ï¼Œåˆ†ä¸ºå°±ç»ªæŒ‚èµ·å’Œé˜»å¡æŒ‚èµ·ã€‚ 4. æŒ‚èµ·æ¨¡å‹ æ­¤å¤„å°‘å†…å®¹\nçŠ¶æ€ å†…å­˜/å¤–å­˜ æ˜¯å¦å¯è¿è¡Œ å°±ç»ªæŒ‚èµ· å¤–å­˜ æ˜¯ï¼ˆéœ€æ¿€æ´»ï¼‰ é˜»å¡æŒ‚èµ· å¤–å­˜ å¦ï¼ˆéœ€äº‹ä»¶ï¼‰ Q\u0026amp;A Q1: PCBä¸­å­˜å‚¨å“ªäº›å…³é”®æ§åˆ¶ä¿¡æ¯ï¼Ÿ\nAï¼šåŒ…æ‹¬å½“å‰çŠ¶æ€ã€ä¼˜å…ˆçº§ã€ä»£ç å…¥å£åœ°å€ã€åŒæ­¥æœºåˆ¶ï¼ˆå¦‚ä¿¡å·é‡ï¼‰ã€èµ„æºå ç”¨ä¿¡æ¯ï¼ˆå¦‚æ‰“å¼€æ–‡ä»¶åˆ—è¡¨ï¼‰ã€‚\nQ2: è¿›ç¨‹ä»è¿è¡Œæ€è½¬ä¸ºé˜»å¡æ€çš„å¯èƒ½åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ\nAï¼šç­‰å¾…I/Oæ“ä½œå®Œæˆã€è¯·æ±‚ç³»ç»ŸæœåŠ¡æœªå°±ç»ªï¼ˆå¦‚ç”³è¯·å†…å­˜å¤±è´¥ï¼‰ã€‚\nQ3: æŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹å¦‚ä½•æ¢å¤æ‰§è¡Œï¼Ÿ\nAï¼šé€šè¿‡æ¿€æ´»åŸè¯­å°†è¿›ç¨‹ä»å¤–å­˜ç§»å›å†…å­˜ï¼ŒçŠ¶æ€è½¬æ¢ä¸ºå°±ç»ªæ€æˆ–é˜»å¡æ€ã€‚\nQ4: è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶ï¼Œå“ªäº›å†…å®¹éœ€è¦ä¿å­˜ï¼Ÿ\nAï¼šå¯„å­˜å™¨å€¼ï¼ˆPCã€PSWã€æ ˆæŒ‡é’ˆï¼‰ã€æ ¸å¿ƒæ ˆä¿¡æ¯ã€èµ„æºå ç”¨çŠ¶æ€ã€‚\nQ5: ä¸ºä»€ä¹ˆPCBéœ€è¦å¸¸é©»å†…å­˜ï¼Ÿ\nAï¼šæ“ä½œç³»ç»Ÿéœ€å¿«é€Ÿè®¿é—®PCBä»¥ç®¡ç†è¿›ç¨‹çŠ¶æ€ï¼Œè‹¥å­˜äºå¤–å­˜ä¼šå¯¼è‡´é¢‘ç¹I/Oï¼Œé™ä½æ•ˆç‡ã€‚\n3.3 è¿›ç¨‹æ§åˆ¶ 3.3.1 è¿›ç¨‹æ§åˆ¶çš„åŠŸèƒ½ æ ¸å¿ƒåŠŸèƒ½ï¼š åˆ›å»º/æ’¤é”€è¿›ç¨‹ã€æŒ‚èµ·/æ¿€æ´»è¿›ç¨‹ã€ç®¡ç†è¿›ç¨‹çŠ¶æ€è½¬æ¢ã€‚ ç¡®ä¿è¿›ç¨‹æœ‰åºå…±äº«èµ„æºå¹¶æ­£ç¡®æ‰§è¡Œã€‚ 1. åŸè¯­ï¼ˆPrimitiveï¼‰ å®šä¹‰ï¼šç”±å¤šæ¡æŒ‡ä»¤æ„æˆçš„åŸå­æ“ä½œï¼Œæ‰§è¡Œä¸å¯ä¸­æ–­ï¼ˆè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼‰ã€‚ ç±»å‹ï¼š ç±»å‹ è¯´æ˜ æœºå™¨æŒ‡ä»¤çº§åŸè¯­ ç¡¬ä»¶æ”¯æŒï¼Œç¦æ­¢ä¸­æ–­ï¼ˆå¦‚ test-and-set æŒ‡ä»¤ï¼‰ã€‚ åŠŸèƒ½çº§åŸè¯­ è½¯ä»¶å®ç°ï¼Œå…è®¸ä¸­æ–­ä½†ä¸å¯å¹¶å‘ï¼ˆå¦‚è¿›ç¨‹åˆ›å»ºåŸè¯­ fork()ï¼‰ã€‚ 3.3.2 è¿›ç¨‹æ§åˆ¶çš„ä¸»è¦åŸè¯­ 1. è¿›ç¨‹åˆ›å»ºåŸè¯­ ä¸»è¦ä»»åŠ¡ï¼š åˆ†é… PCBã€åˆ†é…å”¯ä¸€ PIDã€åˆå§‹åŒ–èµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶ï¼‰ã€è®¾ç½®è¿›ç¨‹ä¸Šä¸‹æ–‡ã€é“¾æ¥åˆ°å°±ç»ªé˜Ÿåˆ—ã€‚ è§¦å‘äº‹ä»¶ï¼š ç”¨æˆ·ç™»å½•ï¼ˆåˆ†æ—¶ç³»ç»Ÿï¼‰ ä½œä¸šè°ƒåº¦ï¼ˆæ‰¹å¤„ç†ç³»ç»Ÿï¼‰ æä¾›æœåŠ¡ï¼ˆå¦‚æ‰“å°è¿›ç¨‹ï¼‰ åº”ç”¨è¯·æ±‚ï¼ˆç”¨æˆ·ç¨‹åºä¸»åŠ¨åˆ›å»ºï¼‰ã€‚ å­è¿›ç¨‹åˆ›å»ºæ–¹å¼ï¼š æ–¹å¼ è¯´æ˜ fork() å¤åˆ¶çˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆæ–°è¿›ç¨‹ï¼ˆUNIX å¸¸ç”¨ï¼‰ã€‚ spawn() åˆ›å»ºæ–°è¿›ç¨‹å¹¶åŠ è½½æ–°ç¨‹åºï¼ˆWindows å¸¸ç”¨ï¼‰ã€‚ exec() åŠ è½½æ–°ç¨‹åºè¦†ç›–å½“å‰è¿›ç¨‹ï¼ˆä¸ç”Ÿæˆæ–°è¿›ç¨‹ï¼‰ã€‚ çˆ¶å­è¿›ç¨‹å…³ç³»ï¼š ç»§æ‰¿å†…å®¹ï¼šç¯å¢ƒå˜é‡ã€æ‰“å¼€æ–‡ä»¶ã€å…±äº«å­˜å‚¨åŒºã€ä¿¡å·å¤„ç†è¡¨ç­‰ã€‚ ä¸ç»§æ‰¿å†…å®¹ï¼šè¿›ç¨‹ IDï¼ˆPIDï¼‰ã€çˆ¶è¿›ç¨‹ PIDã€èµ„æºå ç”¨ç»Ÿè®¡ã€‚ 2. è¿›ç¨‹æ’¤é”€åŸè¯­ï¼ˆDestroyï¼‰ è§¦å‘åŸå› ï¼š è¿›ç¨‹æ­£å¸¸ç»“æŸã€å‘ç”Ÿè‡´å‘½é”™è¯¯ã€è¢«çˆ¶è¿›ç¨‹ç»ˆæ­¢ã€ç³»ç»Ÿèµ„æºä¸è¶³ã€‚ åŠŸèƒ½ï¼š é‡Šæ”¾èµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶ï¼‰ã€ç§»é™¤ PCBã€æ›´æ–°è¿›ç¨‹æ ‘ç»“æ„ã€‚ 3. è¿›ç¨‹é˜»å¡åŸè¯­ï¼ˆBlockï¼‰ è§¦å‘åŸå› ï¼š ç­‰å¾… I/O å®Œæˆã€è¯·æ±‚èµ„æºæœªå°±ç»ªã€ç­‰å¾…åŒæ­¥ä¿¡å·ï¼ˆå¦‚ä¿¡å·é‡ï¼‰ã€‚ å¤„ç†è¿‡ç¨‹ï¼š ä¿å­˜ CPU ç°åœº â†’ æ›´æ–° PCB çŠ¶æ€ä¸ºé˜»å¡ â†’ ç§»å…¥é˜»å¡é˜Ÿåˆ— â†’ è§¦å‘è°ƒåº¦ã€‚ 4. è¿›ç¨‹å”¤é†’åŸè¯­ï¼ˆWakeupï¼‰ è§¦å‘åŸå› ï¼š ç­‰å¾…äº‹ä»¶å®Œæˆï¼ˆå¦‚ I/O ç»“æŸï¼‰ã€å…¶ä»–è¿›ç¨‹é‡Šæ”¾èµ„æºã€‚ å¤„ç†æ–¹å¼ï¼š æ›´æ–° PCB çŠ¶æ€ä¸ºå°±ç»ª â†’ ç§»å…¥å°±ç»ªé˜Ÿåˆ— â†’ è§¦å‘è°ƒåº¦ã€‚ 5. æŒ‚èµ·åŸè¯­ï¼ˆSuspendï¼‰ åŸå› ï¼š ç³»ç»Ÿè´Ÿè½½è¿‡é«˜ã€è°ƒè¯•éœ€è¦ã€ç”¨æˆ·ä¸»åŠ¨æŒ‚èµ·ã€‚ æ“ä½œï¼š å°†è¿›ç¨‹å†…å­˜æ˜ åƒç§»è‡³å¤–å­˜ â†’ æ›´æ–°çŠ¶æ€ä¸ºå°±ç»ªæŒ‚èµ·/é˜»å¡æŒ‚èµ·ã€‚ 6. æ¿€æ´»åŸè¯­ï¼ˆActivateï¼‰ åŠŸèƒ½ï¼š å°†æŒ‚èµ·è¿›ç¨‹ç§»å›å†…å­˜ â†’ çŠ¶æ€è½¬æ¢ä¸ºå°±ç»ªæ€/é˜»å¡æ€ã€‚ 3.3.3 Unix çš„è¿›ç¨‹ç®¡ç† 1. è¿›ç¨‹å»ºç«‹è¿‡ç¨‹ fork()ï¼š å¤åˆ¶çˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡ç”Ÿæˆå­è¿›ç¨‹ï¼Œè¿”å›å­è¿›ç¨‹ PIDï¼ˆçˆ¶è¿›ç¨‹ï¼‰å’Œ 0ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚ exec()ï¼š åŠ è½½æ–°ç¨‹åºè¦†ç›–å½“å‰è¿›ç¨‹ç©ºé—´ï¼ˆä¸ç”Ÿæˆæ–°è¿›ç¨‹ï¼‰ã€‚ 2. è¿›ç¨‹çŠ¶æ€è½¬æ¢ UNIX è¿›ç¨‹çŠ¶æ€ï¼š è¿è¡Œæ€ï¼ˆç”¨æˆ·æ€/å†…æ ¸æ€ï¼‰ã€å°±ç»ªæ€ã€ç¡çœ æ€ï¼ˆå¯ä¸­æ–­/ä¸å¯ä¸­æ–­ï¼‰ã€åƒµæ­»æ€ï¼ˆZombieï¼‰ã€‚ çŠ¶æ€è½¬æ¢è§¦å‘ï¼š ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ read() å¯¼è‡´é˜»å¡ï¼‰ã€ä¿¡å·å¤„ç†ï¼ˆå¦‚ SIGKILL ç»ˆæ­¢è¿›ç¨‹ï¼‰ã€‚ 3. è¿›ç¨‹æ§åˆ¶ç›¸å…³ç³»ç»Ÿè°ƒç”¨ ç³»ç»Ÿè°ƒç”¨ åŠŸèƒ½ fork() åˆ›å»ºå­è¿›ç¨‹ï¼Œç»§æ‰¿çˆ¶è¿›ç¨‹ä¸Šä¸‹æ–‡ã€‚ exec() åŠ è½½æ–°ç¨‹åºè¦†ç›–å½“å‰è¿›ç¨‹ã€‚ wait() çˆ¶è¿›ç¨‹é˜»å¡ï¼Œç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢ã€‚ exit() ç»ˆæ­¢å½“å‰è¿›ç¨‹ï¼Œé‡Šæ”¾èµ„æºã€‚ Q\u0026amp;A Q1: ä»€ä¹ˆæ˜¯åŸè¯­ï¼Ÿä¸ºä»€ä¹ˆè¿›ç¨‹æ§åˆ¶éœ€è¦åŸè¯­ï¼Ÿ\nAï¼šåŸè¯­æ˜¯åŸå­æ“ä½œçš„æŒ‡ä»¤é›†åˆï¼Œä¸å¯åˆ†å‰²æ‰§è¡Œã€‚è¿›ç¨‹æ§åˆ¶éœ€ä¿è¯æ“ä½œçš„å®Œæ•´æ€§ï¼ˆå¦‚åˆ›å»ºè¿›ç¨‹æ—¶åˆ†é… PCB å’Œèµ„æºå¿…é¡»ä¸€æ¬¡æ€§å®Œæˆï¼‰ï¼Œé¿å…å› ä¸­æ–­å¯¼è‡´ç³»ç»ŸçŠ¶æ€ä¸ä¸€è‡´ã€‚\nQ2: fork() å’Œ exec() çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nAï¼š\nfork() ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹ç”Ÿæˆæ–°è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹ç‹¬ç«‹æ‰§è¡Œã€‚ exec() åŠ è½½æ–°ç¨‹åºè¦†ç›–å½“å‰è¿›ç¨‹ï¼Œä¸ç”Ÿæˆæ–°è¿›ç¨‹ï¼Œä»…æ›¿æ¢ä»£ç æ®µå’Œæ•°æ®æ®µã€‚ Q3: è¿›ç¨‹é˜»å¡å’ŒæŒ‚èµ·çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nAï¼š\né˜»å¡ï¼šè¿›ç¨‹å› ç­‰å¾…äº‹ä»¶ï¼ˆå¦‚ I/Oï¼‰ç•™åœ¨å†…å­˜ï¼ŒçŠ¶æ€ä¸ºé˜»å¡ã€‚ æŒ‚èµ·ï¼šè¿›ç¨‹è¢«ç§»è‡³å¤–å­˜ï¼ŒçŠ¶æ€ä¸ºæŒ‚èµ·ï¼ˆå¦‚å°±ç»ªæŒ‚èµ·ã€é˜»å¡æŒ‚èµ·ï¼‰ã€‚ Q4: UNIX ä¸­ Zombie è¿›ç¨‹æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿ\nAï¼šå½“è¿›ç¨‹ç»ˆæ­¢ä½†çˆ¶è¿›ç¨‹æœªè°ƒç”¨ wait() å›æ”¶å…¶èµ„æºæ—¶ï¼ŒPCB ä»ä¿ç•™åœ¨ç³»ç»Ÿä¸­ï¼Œå½¢æˆåƒµæ­»è¿›ç¨‹ã€‚\nQ5: æ¿€æ´»åŸè¯­çš„æ“ä½œæ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ\nAï¼š\nå°†è¿›ç¨‹ä»å¤–å­˜ç§»å›å†…å­˜ï¼› æ›´æ–°çŠ¶æ€ä¸ºå°±ç»ªæ€æˆ–é˜»å¡æ€ï¼› è‹¥å°±ç»ªï¼ŒåŠ å…¥å°±ç»ªé˜Ÿåˆ—ç­‰å¾…è°ƒåº¦ã€‚ ","date":"2025-03-22T00:00:00Z","permalink":"https://rooobeam.github.io/p/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86ppt%E6%80%BB%E7%BB%93/","title":"æ“ä½œç³»ç»ŸåŸç†PPTæ€»ç»“"},{"content":"é¡¹ç›® ç›®çš„ æç®€ç‰ˆ å¾—åˆ° æ–‡æœ¬å—ï¼Œå¤„ç†ä¸º å®ä½“ å’Œ å…³ç³»\na. æ–‡æœ¬å—ï¼ˆchunksï¼‰ æ–‡æœ¬å†…å®¹ï¼š\u0026ldquo;Alice and Bob are collaborating on quantum computing research.\u0026rdquo; æ¥æºidï¼šdoc-1 b. å®ä½“ï¼ˆentitiesï¼‰ å®ä½“åç§° ç±»å‹ æè¿° æ¥æº Alice person é‡å­ç‰©ç†é¢†åŸŸçš„ç ”ç©¶å‘˜ doc-1 Bob person æ•°å­¦å®¶ doc-1 Quantum Computing technology åˆ©ç”¨é‡å­åŠ›å­¦ç°è±¡è¿›è¡Œè®¡ç®—çš„æŠ€æœ¯ doc-1 c. å…³ç³»ï¼ˆrelationshipsï¼‰ å…³ç³»ç¼–å· èµ·ç‚¹ï¼ˆsrc_idï¼‰ ç»ˆç‚¹ï¼ˆtgt_idï¼‰ æè¿° å…³é”®è¯ æƒé‡ æ¥æº 1 Alice Bob Aliceå’ŒBobæ˜¯ç ”ç©¶ä¼™ä¼´ collaboration, research 1.0 doc-1 2 Alice Quantum Computing Aliceä»äº‹é‡å­è®¡ç®—ç ”ç©¶ research, expertise 1.0 doc-1 3 Bob Quantum Computing Bobç ”ç©¶é‡å­è®¡ç®—çš„åº”ç”¨ research, application 1.0 doc-1 é¡¹ç›®ç»“æ„ è¾¹çœ‹è¾¹æ›´æ–°\nLightRAG-main |__examples |\t|__lightrag_ollama_demo.py | |__lightrag |\t|__ kg |\t|\t|__ json_kv_impl.py |\t| |\t|__ __init__.py |\t|__ base.py |\t|__ lightrag.py |\t|__ utils.py | | |__setup.py | |\nmain()å¼€å§‹\tï¼ˆlightrag_ollama_demo.pyï¼‰\nmain()å†…å®¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 def main(): # Initialize RAG instance rag = asyncio.run(initialize_rag()) # Insert example text with open(\u0026#34;./book.txt\u0026#34;, \u0026#34;r\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: rag.insert(f.read()) # Test different query modes print(\u0026#34;\\nNaive Search:\u0026#34;) print( rag.query( \u0026#34;What are the top themes in this story?\u0026#34;, param=QueryParam(mode=\u0026#34;naive\u0026#34;) ) ) print(\u0026#34;\\nLocal Search:\u0026#34;) print( rag.query( \u0026#34;What are the top themes in this story?\u0026#34;, param=QueryParam(mode=\u0026#34;local\u0026#34;) ) ) print(\u0026#34;\\nGlobal Search:\u0026#34;) print( rag.query( \u0026#34;What are the top themes in this story?\u0026#34;, param=QueryParam(mode=\u0026#34;global\u0026#34;) ) ) print(\u0026#34;\\nHybrid Search:\u0026#34;) print( rag.query( \u0026#34;What are the top themes in this story?\u0026#34;, param=QueryParam(mode=\u0026#34;hybrid\u0026#34;) ) ) # stream response resp = rag.query( \u0026#34;What are the top themes in this story?\u0026#34;, param=QueryParam(mode=\u0026#34;hybrid\u0026#34;, stream=True), ) if inspect.isasyncgen(resp): asyncio.run(print_stream(resp)) else: print(resp) åˆå§‹åŒ–: rag = asyncio.run(initialize_rag()) è¿›å…¥initialize_rag()ï¼Œ\tï¼ˆlightrag_ollama_demo.pyï¼‰\n1 2 3 4 5 async def initialize_rag(): rag = LightRAG(...........)\tawait rag.initialize_storages() await initialize_pipeline_status() return rag rag = LightRAG(\u0026hellip;\u0026hellip;\u0026hellip;..) ï¼ˆlightrag_ollama_demo.pyï¼‰\nåˆå§‹åŒ– LightRAGçš„å¯¹è±¡ å„ä¸ªå±æ€§ï¼Œä¸»è¦æ˜¯llm_model_Xå’Œembedding_funcï¼Œä¸¤ä¸ªæ¨¡å‹å‡ç”±æœ¬ä¾‹ollamaæä¾›\næ˜¾å¼ä¼ å…¥çš„å‚æ•°æ˜¯__init__é‡Œçš„ï¼Œå®ƒè¿˜æœ‰__post_init__ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 rag = LightRAG(\t# lightrag_ollama_demo.py - line 22 working_dir=WORKING_DIR, llm_model_func=ollama_model_complete, llm_model_name=\u0026#34;deepseek-r1:7b\u0026#34;, llm_model_max_async=4, llm_model_max_token_size=32768, llm_model_kwargs={ \u0026#34;host\u0026#34;: \u0026#34;http://localhost:6006\u0026#34;,\t# æœ¬åœ°ollamaæä¾›æœåŠ¡çš„ç«¯å£ä¸º6006 \u0026#34;options\u0026#34;: {\u0026#34;num_ctx\u0026#34;: 32768}, }, embedding_func=EmbeddingFunc( embedding_dim=768, max_token_size=8192, func=lambda texts: ollama_embed( texts, embed_model=\u0026#34;nomic-embed-text\u0026#34;, host=\u0026#34;http://localhost:6006\u0026#34; ), ), ) await rag.initialize_storages() ï¼ˆlightrag_ollama_demo.pyï¼‰\næ¯ä¸ªstoragesçš„åˆå§‹åŒ–éƒ½ç±»ä¼¼ï¼Œå…¶çˆ¶ç±»éƒ½æ—¶baseé‡Œçš„Base\u0026hellip;Storage\nkgæ–‡ä»¶å¤¹é‡Œçš„ å„ç§_implé‡Œå®šä¹‰å…·ä½“çš„å­ç±»ï¼ˆå¦‚JsonDocStatusStorageï¼‰ ç»§æ‰¿äº†çˆ¶ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 async def initialize_storages(self):\t# lightrag.py - line 456 \u0026#34;\u0026#34;\u0026#34;Asynchronously initialize the storages\u0026#34;\u0026#34;\u0026#34; # StoragesStatus.CREATEDå³\u0026#39;created\u0026#39; str # self._storages_statusä»€ä¹ˆæ—¶å€™å®šä¹‰çš„ï¼Ÿé»˜è®¤å€¼ï¼Ÿ # ç­”ï¼š__post_init__é‡Œå®šä¹‰çš„ã€‚ # __post_init__ æ˜¯ @dataclass æä¾›çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³• # \u0026#34;ç¬¬äºŒåˆå§‹åŒ–\u0026#34;ï¼Œåœ¨è‡ªåŠ¨__init__åæ‰§è¡Œ # ç”¨äºåœ¨å¯¹è±¡åˆå§‹åŒ–å®Œæˆåæ‰§è¡Œé¢å¤–çš„æ“ä½œã€‚ # post æ˜¯æ‹‰ä¸è¯­å‰ç¼€ï¼Œè¡¨ç¤ºâ€œåœ¨â€¦â€¦ä¹‹åâ€ if self._storages_status == StoragesStatus.CREATED: tasks = [] # ====== æ­¤æ—¶è·³åˆ°ä¸‹ä¸€ä¸ªä¸‰çº§æ ‡é¢˜æŸ¥çœ‹__post_init__çš„å†…å®¹ ====== for storage in ( self.full_docs, self.text_chunks, self.entities_vdb, self.relationships_vdb, self.chunks_vdb, self.chunk_entity_relation_graph, self.llm_response_cache, self.doc_status, ): if storage: # æ¯ä¸ªå­˜å‚¨æ¨¡å—çš„åˆå§‹åŒ– tasks.append(storage.initialize()) await asyncio.gather(*tasks) # ä¿®æ”¹self._storages_status self._storages_status = StoragesStatus.INITIALIZED logger.debug(\u0026#34;Initialized Storages\u0026#34;) __post_init__ ï¼ˆlightrag.pyï¼‰\nç”±äºä½¿ç”¨äº†@dataclassï¼Œæ•…__init__è‡ªåŠ¨å®ç°äº†ï¼Œè€Œè¦å†…éƒ¨å†initåˆ™ç”¨__post_init__\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 def __post_init__(self): from lightrag.kg.shared_storage import ( initialize_share_data, ) ... # Initialize all storages self.key_string_value_json_storage_cls: type[BaseKVStorage] = self._get_storage_class(self.kv_storage) # type: ignore self.vector_db_storage_cls: type[BaseVectorStorage] = self._get_storage_class( self.vector_storage ) # type: ignore self.graph_storage_cls: type[BaseGraphStorage] = self._get_storage_class( self.graph_storage ) # type: ignore self.key_string_value_json_storage_cls = partial( # type: ignore self.key_string_value_json_storage_cls, global_config=global_config ) ... # line 429 self._storages_status = StoragesStatus.CREATED è¿™é‡Œåˆå§‹åŒ–äº†å„ä¸ªç»„ä»¶çš„ï¼Œè°ƒç”¨å„ç§æ¨¡å—\nå°±æ‹¿self.full_docsä¸¾ä¾‹è€Œè¨€ï¼Œå®ƒæ˜¯ BaseKVStorageçš„å®ä¾‹åŒ–ï¼Œè¯¥å®ä¾‹çš„åˆå§‹åŒ–ï¼Œç”±key_string_value_json_storage_cls ç±» ä¼ å…¥ namespaceå’Œembedding_funcè¿”å›\ninitialize_pipeline_status() ï¼ˆshared_storage.pyï¼‰\nåˆå§‹åŒ–pipelineçš„å„ç§çŠ¶æ€å€¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 async def initialize_pipeline_status(): \u0026#34;\u0026#34;\u0026#34; Initialize pipeline namespace with default values. This function is called during FASTAPI lifespan for each worker. \u0026#34;\u0026#34;\u0026#34; pipeline_namespace = await get_namespace_data(\u0026#34;pipeline_status\u0026#34;) # _manager.list() async with get_internal_lock(): # é€šè¿‡æ£€æŸ¥å¿…è¦å­—æ®µï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ– if \u0026#34;busy\u0026#34; in pipeline_namespace: return # Create a shared list object for history_messages history_messages = _manager.list() if is_multiprocess else [] pipeline_namespace.update( { \u0026#34;busy\u0026#34;: False, # Control concurrent processes \u0026#34;job_name\u0026#34;: \u0026#34;Default Job\u0026#34;, # Current job name (indexing files/indexing texts) \u0026#34;job_start\u0026#34;: None, # Job start time \u0026#34;docs\u0026#34;: 0, # Total number of documents to be indexed \u0026#34;batchs\u0026#34;: 0, # Number of batches for processing documents \u0026#34;cur_batch\u0026#34;: 0, # Current processing batch \u0026#34;request_pending\u0026#34;: False, # Flag for pending request for processing \u0026#34;latest_message\u0026#34;: \u0026#34;\u0026#34;, # Latest message from pipeline processing \u0026#34;history_messages\u0026#34;: history_messages, # ä½¿ç”¨å…±äº«åˆ—è¡¨å¯¹è±¡ } ) direct_log(f\u0026#34;Process {os.getpid()} Pipeline namespace initialized\u0026#34;) æ’å…¥: rag.insert(f.read()) rag.insert(f.read())\nâ€‹\t-\u0026gt; self.ainsert(input)\nâ€‹\t-\u0026gt; self.apipeline_enqueue_documents\nâ€‹\t-\u0026gt; self.apipeline_process_enqueue_documents\nè¿›å…¥rag.insertå†… rag.insert(f.read()) -\u0026gt; è½¬åˆ° self.ainsert(input)ï¼Œinputå³ f.read()ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 def insert( self, input: str | list[str], split_by_character: str | None = None, split_by_character_only: bool = False, ids: str | list[str] | None = None, ) -\u0026gt; None: # åˆ›å»ºäº‹ä»¶å¾ªç¯ï¼Œç„¶åæŠŠself.ainsertåŠ å…¥å¾ªç¯ï¼Œæ‰§è¡Œæ—¶ä¼ å…¥inputï¼Œå…¶ä»–å‚æ•°éƒ½é»˜è®¤ loop = always_get_an_event_loop() loop.run_until_complete( self.ainsert(input, split_by_character, split_by_character_only, ids) ) è¿›å…¥self.ainsertå†… ä¸¤ä¸ªå†…å®¹ï¼Œä¸€ä¸ªæ˜¯ æ·»åŠ  æ–‡æ¡£çŠ¶æ€ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªæ˜¯ å¤„ç†æ–‡æ¡£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 async def ainsert( self, input: str | list[str], split_by_character: str | None = None, split_by_character_only: bool = False, ids: str | list[str] | None = None, ) -\u0026gt; None: # å°†inputï¼Œå³æ–‡æ¡£æˆ–list of æ–‡æ¡£ çš„statusä¿¡æ¯åŠ å…¥doc_statusæ•°æ®åº“ await self.apipeline_enqueue_documents(input, ids) # å¤„ç†æ–‡æ¡£ï¼Œåˆ›å»ºçŸ¥è¯†åº“çš„ä¸»è¦éƒ¨åˆ† await self.apipeline_process_enqueue_documents( split_by_character, split_by_character_only ) self.apipeline_enqueue_documents ","date":"2025-03-20T00:00:00Z","permalink":"https://rooobeam.github.io/p/lightrag1.2.6%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/","title":"Lightrag1.2.6ä»£ç è§£è¯»"},{"content":"Windowç³»ç»Ÿå’Œå®‰å…¨ å®éªŒå¹³å°ä¸ºwin2008ï¼Œéƒ¨åˆ†æ¯”å¯¹win11ã€‚\nWindows è´¦æˆ·ã€è´¦æˆ·å£ä»¤ã€æ–‡ä»¶ç³»ç»Ÿã€å®¡æ ¸ã€æ—¥å¿—ã€æ•°æ®åŠ å¯†EFSã€å®‰å…¨æ¨¡æ¿\nè´¦æˆ· è®¡ç®—æœº å³é”® â€”â€” ç®¡ç† â€”â€” é…ç½® â€”â€” æœ¬åœ°ç”¨æˆ·å’Œç»„ â€”â€” ç”¨æˆ· â€”â€” ç‚¹å‡»å…·ä½“ç”¨æˆ· å³é”® â€”â€” å±æ€§\nå¯å‹¾é€‰ â€œç”¨æˆ·ä¸èƒ½æ›´æ”¹å¯†ç â€â€œå¯†ç æ°¸ä¸è¿‡æœŸâ€â€œè´¦æˆ·å·²ç¦ç”¨â€\nè´¦æˆ·ç­–ç•¥ å¼€å§‹ |_ç®¡ç†å·¥å…· |_æœ¬åœ°å®‰å…¨ç­–ç•¥ |_è´¦æˆ·ç­–ç•¥ |_å¯†ç ç­–ç•¥ |_è´¦æˆ·é”å®šç­–ç•¥ |_æœ¬åœ°ç­–ç•¥ |_å®‰å…¨é€‰é¡¹\nè´¦æˆ·ç­–ç•¥-å¯†ç ç­–ç•¥ â€‹\tå¯¹æ¯ä¸ªç­–ç•¥å³é”® â€”â€” å±æ€§ â€”â€” å¯é€‰å¯ç”¨orç¦ç”¨ï¼Œå¯æŸ¥çœ‹ è¯´æ˜ é€‰é¡¹å¡\nâ€‹\tç­–ç•¥æœ‰ï¼šå¯†ç å¤æ‚æ€§è¦æ±‚ã€é•¿åº¦è¦æ±‚ã€æœ€çŸ­ä½¿ç”¨æœŸé™ï¼ˆé˜²ä¿®æ”¹ï¼‰ã€æœ€é•¿ä½¿ç”¨æœŸé™ï¼ˆé˜²é•¿æœŸå¯†ç ä¸æ›´æ–°ï¼‰ã€å¼ºåˆ¶å¯†ç å†å²ï¼ˆè®°å½•ä¸ªæ•°æ§åˆ¶ï¼‰ã€åŠ å¯†å­˜å‚¨ã€‚\nè´¦æˆ·ç­–ç•¥-è´¦æˆ·é”å®šç­–ç•¥ â€‹\tå¯¹æ¯ä¸ªç­–ç•¥å³é”® â€”â€” å±æ€§ â€”â€” å¯é€‰å¯ç”¨orç¦ç”¨ï¼Œå¯æŸ¥çœ‹ è¯´æ˜ é€‰é¡¹å¡\nâ€‹\tè´¦æˆ·é”å®šæ—¶é—´ï¼ˆä¸Šé”åå¤šä¹…è§£é”ï¼‰ã€é”å®šé˜ˆå€¼ï¼ˆå‡ æ¬¡é”™è¯¯åä¸Šé”ï¼‰ã€é‡ç½®é”å®šè®¡æ•°å™¨ï¼ˆå¤šä¹…åé”™è¯¯æ•°å˜å›0ï¼‰\næœ¬åœ°ç­–ç•¥-å®‰å…¨é€‰é¡¹ ä¸è‡ªåŠ¨æ˜¾ç¤ºä¸Šæ¬¡ç™»å½•çš„è´¦æˆ·\nâ€‹\tå¯ç”¨ç­–ç•¥ä¸­ï¼š â€œäº¤äº’å¼ç™»å½•ï¼šä¸æ˜¾ç¤ºæœ€åçš„ç”¨æˆ·åâ€\nç¦æ­¢æšä¸¾è´¦æˆ·å\nâ€‹\tç¦æ­¢è¿œç¨‹ç”¨æˆ·é€šè¿‡ç©ºè¿æ¥æšä¸¾å¤„æ‰€æœ‰æœ¬åœ°è´¦æˆ·å\nâ€‹\tå¯ç”¨ç­–ç•¥ä¸­ï¼šâ€œç½‘ç»œè®¿é—®ï¼šä¸å…è®¸SAMè´¦æˆ·å’Œå…±äº«çš„åŒ¿åæšä¸¾â€\næ–‡ä»¶ç³»ç»Ÿå®‰å…¨è®¾ç½® åŠ å¯†æ•°æ® â€‹\tNTFSç£ç›˜ä¸­æ–‡ä»¶ï¼Œadministratorç”¨æˆ·ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶å¤¹ï¼Œæ–°å»ºtxtå¹¶å†™ç‚¹ã€‚\nâ€‹\tæ–‡ä»¶å¤¹å³é”® â€”â€” å¸¸è§„ â€”â€” é«˜çº§ â€”â€” å‹¾é€‰â€œåŠ å¯†å†…å®¹ä»¥ä¾¿ä¿æŠ¤æ•°æ®â€\nâ€‹\tç”¨æ–°å»ºç”¨æˆ·è¿›å…¥ï¼Œå‘ç°æ— æ³•æ‰“å¼€æ–‡ä»¶å¤¹\nå‘½ä»¤è¡Œæ“ä½œï¼š\n1 2 cipher test1 /e cipher test1 /d EFSè¯ä¹¦ å¼€å§‹ |_è¿è¡Œ |_mmc |_æ–‡ä»¶ |_tæ·»åŠ /åˆ é™¤ç®¡ç†å•å…ƒ |_è¯ä¹¦\nadministratorç”Ÿæˆè¯ä¹¦ â€‹\tå›åˆ°administratorç”¨æˆ·ä¸‹ï¼ŒæŒ‰ç…§æ ‘æµç¨‹æ‰¾åˆ°è¯ä¹¦ï¼Œæ·»åŠ ï¼Œå‹¾é€‰â€œæˆ‘çš„ç”¨æˆ·è´¦æˆ·â€ï¼ˆç”Ÿæˆå½“å‰ç”¨æˆ·çš„è¯ä¹¦ï¼‰\nâ€‹\tåœ¨æ§åˆ¶å°ç•Œé¢ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ‘æ‰¾åˆ°ï¼Œæ³¨æ„ï¼è¦å…ˆç”¨äº†EFSåŠ å¯†äº†æ•°æ®æ‰ä¼šæœ‰ï¼Œå½“ç„¶äº†å¦‚æœç”¨äº†å…¶ä»–è½¯ä»¶åŠ å¯†ä¹Ÿå¯èƒ½ä¼šæœ‰ï¼Œå› ä¸ºè¿™æ ·åŠ å¯†åæ‰ä¼šåœ¨ ä¸ªäºº ä¸‹ ç”Ÿæˆè¯ä¹¦ã€‚\næ§åˆ¶å°æ ¹èŠ‚ç‚¹ |_è¯ä¹¦ |_ä¸ªäºº |_è¯ä¹¦ å¯¹ç•Œé¢ä¸­ä»…æœ‰çš„è¯ä¹¦ï¼ˆå› ä¸ºæ²¡ç”¨å…¶ä»–è½¯ä»¶åŠ å¯†è¿‡ï¼‰,å³é”® â€”â€” æ‰€æœ‰ä»»åŠ¡ â€”â€” å¯¼å‡º\nâ€‹\tå‹¾é€‰å¯¼å‡ºç§é’¥ï¼Œè¾“å…¥å¯†ç 123123ï¼Œé€‰æ‹©Dç›˜æ ¹ç›®å½•ä¸‹ï¼Œæ–‡ä»¶å123123\ntestå¯¼å…¥è¯ä¹¦ â€‹\tæ¢testç”¨æˆ·ï¼Œè¿è¡Œ-mmc æ‰“å¼€æ§åˆ¶å°ï¼Œæ·»åŠ /åˆ é™¤ç®¡ç†å•å…ƒï¼Œæ·»åŠ è¯ä¹¦ã€‚\nâ€‹\tåˆ° æ§åˆ¶å°æ ¹èŠ‚ç‚¹-è¯ä¹¦-ä¸ªäººï¼Œç©ºç™½å¤„å³é”®ï¼Œæ‰€æœ‰ä»»åŠ¡-å¯¼å…¥ï¼Œé€‰æ‹©administratorå¯¼å‡ºä¿å­˜çš„è¯ä¹¦ï¼Œè¾“å…¥å¯†ç 123123ï¼Œä¸€ç›´é»˜è®¤åˆ°å®Œæˆï¼Œå‘ç°å¯ä»¥æ‰“å¼€æ–‡ä»¶äº†ã€‚\n","date":"2025-03-20T00:00:00Z","permalink":"https://rooobeam.github.io/p/windows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/","title":"Windowsæ“ä½œç³»ç»Ÿå®‰å…¨"},{"content":"ç¬¬ä¸€ä¸ªç¨‹åº âœ…\næºç¨‹åºå†™å‡ºåˆ°æ‰§è¡Œç®€è¦è¿‡ç¨‹ï¼Œåæ–‡æœ‰å®ä¾‹ï¼š ç¼–å†™æºç¨‹åº â€”â€” å†™ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ â€”â€” ä½¿ç”¨editã€ç¬”è®°æœ¬ç­‰ã€‚ ç¼–è¯‘è¿æ¥ â€”â€” ç”¨æ±‡ç¼–è¯­è¨€ç¼–è¯‘ç¨‹åºå¯¹æ–‡æœ¬æ–‡ä»¶ç¼–è¯‘äº§ç”Ÿç›®æ ‡æ–‡ä»¶ï¼›å†ç”¨è¿æ¥ç¨‹åºå¯¹ç›®æ ‡æ–‡ä»¶è¿›è¡Œè¿æ¥ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ åœ¨æ“ä½œç³»ç»Ÿä¸­æ‰§è¡Œæ–‡ä»¶ã€‚ âœ…\næºç¨‹åºç®€å•ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 assume å¯„å­˜å™¨:æŸsegmentæ®µ, å¯„å­˜å™¨:æŸsegmentæ®µ, å¯„å­˜å™¨:æŸsegmentæ®µ XXX segment : : : XXX ends YYY segment : mov ax,4c00H int 21H YYY ends end ä¼ªæŒ‡ä»¤ï¼šæä¾›ç»™ç¼–è¯‘å™¨çš„ï¼Œç¼–è¯‘å™¨æ ¹æ®ä¼ªæŒ‡ä»¤è¿›è¡Œç¼–è¯‘å·¥ä½œã€‚ä¸Šé¢ä»£ç ä¸­assumeï¼ŒXXX segmentâ€¦â€¦XXX ends å’Œ endã€‚ æ ‡å·ï¼Œå¦‚segmentæ®µçš„åç§° ä¸Šé¢ä»£ç ä¸­çš„XXXã€YYYï¼Œä¸€ä¸ªæ ‡å·æŒ‡ä»£ä¸€ä¸ªåœ°å€ã€‚ ç¨‹åºè¿”å›ï¼šå°†CPUçš„æ§åˆ¶æƒè¿˜ç»™ ä½¿ä»–å¾—ä»¥è¿è¡Œçš„ç¨‹åºï¼ˆshell)ã€‚ä»£ç ä¸­çš„ mov ax,4C00H \\n int 21H ã€‚ âœ…\nå®ä¾‹\nç¼–å†™æºç¨‹åº svg\nâ€‹\tæ¡Œé¢å³é”®æ–°å»ºtxtå‘½å123ï¼Œè®°äº‹æœ¬é‡Œå†™å¥½æºç¨‹åºã€‚\nç¼–è¯‘ svg\nwin+R è¾“å…¥commandæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥â€œcd masmâ€ï¼ˆmasm.exeæ‰€åœ¨ç›®å½•ï¼‰ï¼Œè¾“å…¥â€œmasmâ€å¯åŠ¨masm.exeã€‚ æç¤ºæˆ‘ä»¬è¾“å…¥æºæ–‡ä»¶åï¼Œtxtæ–‡ä»¶æ”¾åœ¨äº†c:\\asmï¼Œä¸”ä¸æ˜¯asmæ–‡ä»¶ï¼Œè¾“å…¥c:\\asm\\123.txtã€‚ï¼ˆæ³¨æ„æ­¤å¤„çš„æ–œæ æ˜¯å’Œ\\n\\tä¸€æ ·çš„ï¼‰ è¯¢é—®ç”Ÿæˆobjæ–‡ä»¶åï¼Œæˆ‘ä»¬é€‰æ‹©é»˜è®¤ï¼Œå›è½¦å³å¯ã€‚ æç¤ºè¾“å…¥åˆ—è¡¨æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶ä¸ºç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶çš„ä¸­é—´ç»“æœï¼Œæˆ‘ä»¬ä¸ç”Ÿæˆï¼Œå›è½¦å³å¯ã€‚ æç¤ºè¾“å…¥äº¤å‰å¼•ç”¨æ–‡ä»¶åï¼Œä¹Ÿæ˜¯ä¸­é—´ç»“æœï¼Œä¸ç”Ÿæˆï¼Œå›è½¦å³å¯ã€‚ æ— é”™è¯¯åˆ™masm.exeæ‰€åœ¨ç›®å½•ä¸‹ç”Ÿæˆ123.obj è¿æ¥ svg\nè¿›å…¥DOSæ–¹å¼(win+R è¾“command)ï¼Œè¿›å…¥c:/masm (Overlay Linker3.60ï¼Œlink.exeæ‰€åœ¨ç›®å½•),è¾“å…¥linkå¯åŠ¨link.exeã€‚ æç¤ºè¾“å…¥ç›®æ ‡æ–‡ä»¶åï¼Œ[.OBJ]æç¤ºé»˜è®¤æ‰©å±•åä¸ºobjï¼Œæ­£åˆæˆ‘æ„ï¼Œè¾“å…¥123å³å¯ã€‚ æç¤ºç”Ÿæˆçš„exeæ–‡ä»¶åï¼Œé»˜è®¤åå°±è¡Œï¼Œå›è½¦å³å¯ã€‚ æç¤ºè¾“å…¥æ˜ åƒæ–‡ä»¶åï¼Œæç¤ºè¾“å…¥åº“æ–‡ä»¶åï¼Œæˆ‘ä»¬éƒ½å›è½¦å³å¯ã€‚ æ— erroråˆ™å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ123.exeã€‚ æ‰§è¡Œï¼Œå‘½ä»¤è¡Œè¾“å…¥æ–‡ä»¶åå°±è¡Œäº†ï¼Œmasm.exe æˆ– masm 123.exe æˆ– 123 ã€‚\ndebugè·Ÿè¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ï¼šdebug å¯ä»¥å°†ç¨‹åºè½½å…¥å†…å­˜ï¼Œè®¾ç½®CS:IPæŒ‡å‘ç¨‹åºçš„å…¥å£ï¼Œä½†debugä¸æ”¾å¼ƒcpuçš„æ§åˆ¶æƒ\nå…·ä½“æ–¹æ³•ï¼šdebug 123.exe svg è¿ç”¨ç¬¬äºŒç« çš„debugçš„ä½¿ç”¨æ–¹æ³• Rå‘½ä»¤æŸ¥çœ‹ã€æ”¹å˜å¯„å­˜å™¨å†…å®¹ DæŸ¥çœ‹å†…å­˜ä¸­å†…å®¹ Eæ”¹å†™å†…å­˜å†…å®¹ Uå°†å†…å­˜ä¸­æœºå™¨æŒ‡ä»¤(01\u0026hellip;)ç¿»è¯‘ä»¥ä¸ºæ±‡ç¼–å‘½ä»¤(mov\u0026hellip;) Tæ‰§è¡Œä¸€æ¡æœºå™¨æŒ‡ä»¤ Aä»¥æ±‡ç¼–æŒ‡ä»¤æ ¼å¼å¾€å†…å­˜å†™å…¥æœºå™¨æŒ‡ä»¤ Pæ­£å¸¸ç»“æŸç¨‹åºã€‚ å®æ“å¦‚ä¸‹å›¾ï¼š svg âœ…\nexeæ‰§è¡Œè¿‡ç¨‹ä¸shell DOSä¸­ï¼Œ123.exeè‹¥è¦è¿è¡Œï¼Œè¦æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºp2å°†å…¶è½½å…¥å†…å­˜ï¼Œ123.exeè¿è¡Œå®Œåå³å°†cpuæ§åˆ¶æƒäº¤è¿˜ç¨‹åºp2ã€‚ p2å³command.comï¼Œè¢«æˆä¸ºå‘½ä»¤è§£é‡Šå™¨ï¼Œå³DOSç³»ç»Ÿçš„shellã€‚è¾“å…¥cdã€dirã€typeç­‰éƒ½ç”±commandæ‰§è¡Œã€‚ æç¤ºç¬¦\u0026quot;c:\\masmâ€œåè¾“å…¥123.exeï¼Œæ­¤æ—¶command.comè¿è¡Œã€‚ è¾“å…¥123.3exeåï¼Œcommandæ ¹æ®æ–‡ä»¶åæ‰¾åˆ°è¯¥å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†ç¨‹åºè½½å…¥å†…å­˜ï¼Œè®¾ç½®CS:IPæŒ‡å‘ç¨‹åºå…¥å£ï¼Œéšåæ‰§è¡Œç¨‹åºã€‚ æ‰§è¡Œå®Œå›åˆ°commandã€‚ dosä¸­.exeçš„åŠ è½½è¿‡ç¨‹ï¼ˆä¸Šé¢ç¬¬äºŒæ­¥â€”â€”è½½å…¥å†…å­˜ï¼‰ æ‰¾åˆ°SA:0000ç©ºé—²å†…å­˜åŒºâ€”â€”\u0026gt;å‰256å³åç§»åœ°å€0-255åˆ›ç¨‹åºæ®µå‰ç¼€(PSP)ï¼ŒDOSè¦ç”¨å®ƒå’Œ.exeé€šä¿¡â€”â€”\u0026gt;åé¢è£…å…¥ç¨‹åºï¼Œå³ä»SA+10H:0000â€”â€”\u0026gt;CS:IP=SA+10H:0000 åŠ è½½.svg âœ…\nä¹ é¢˜ ä¹ é¢˜.svg ","date":"2025-03-16T00:00:00Z","image":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E5%9B%9B%E7%AB%A0/%E4%B8%89%E9%BE%99_hu_87bde1cf9b7bc30f.jpg","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E5%9B%9B%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬å››ç« "},{"content":"è‡ªåŠ¨gitæäº¤ .batæ–‡ä»¶å‡†å¤‡ æ–°å»ºtxtï¼Œå†™å…¥ä¸€ä¸‹å†…å®¹ 1 2 3 4 5 6 7 8 9 10 11 12 @echo off REM åˆ‡æ¢åˆ° ä»“åº“æ‰€åœ¨ç›®å½• cd /d \u0026#34;D:\\github_blog\\\u0026#34; REM æ‰§è¡Œ Git å‘½ä»¤ git add . git commit -m \u0026#34;update\u0026#34; git push REM å“åº”ä¸€ä¸‹å•¦ï¼ echo gooo_job! pause å¦å­˜ä¸ºâ€œæ‰€æœ‰æ–‡ä»¶(*)â€ï¼Œç¼–ç ç±»å‹é€‰æ‹©ANSIï¼Œå‘½åä¸ºauto_git_commit.batï¼Œæ”¾åœ¨å¦‚ D:/script ä¸‹ã€‚\næ³¨æ„äº‹é¡¹\ncd \\d \u0026ldquo;D:/\u0026rdquo; ä¸€å®šè¦æœ‰åŒå¼•å·ï¼Œå¦åˆ™æ‰¾ä¸åˆ°ã€‚\nå¦‚ä½•è®°ä½å“ªä¸ªæ˜¯è½¬ä¹‰å­—ç¬¦çš„æ–œæ ï¼Œå“ªä¸ªæ˜¯ç›®å½•çš„æ–œæ  tips: \\n\\tå·²è®°ä½ï¼Œæ‰€ä»¥\\æ˜¯è½¬ä¹‰ï¼Œæ‰€ä»¥/æ˜¯ç›®å½•çš„\nå‘½åæ–‡ä»¶å¤¹ã€æ–‡ä»¶ ä¸è¦æœ‰ ç©ºæ ¼ æˆ– . . å¼€å¤´ä¼šå¯¼è‡´ä»¥ä¸ºæ˜¯ â€Œ**â€œç‚¹æ–‡ä»¶â€ï¼ˆDot Filesï¼‰ï¼ˆéšè—æ–‡ä»¶ï¼‰**å¦‚.bat\necho åé¢çš„å†…å®¹ä¸è¦æœ‰ç©ºæ ¼ï¼Œè¦è¿ç»­\nç¼–ç æ ¼å¼è¦ä¸ºANSIï¼Œutf-8ä¸è¡Œ\nä»»åŠ¡è®¡åˆ’ç¨‹åºå†…åˆ›å»ºåŸºæœ¬ä»»åŠ¡ win+r è¾“å…¥æŒ‡ä»¤ taskschd.msc\tä»»åŠ¡è®¡åˆ’ç¨‹åºï¼ˆTask Scheduler â€”â€” taskschdï¼‰\næ‰“å¼€(O):taskschd.msc\næœ€å³ä¾§ä¸€æ  æ‰¾åˆ° åˆ›å»ºåŸºæœ¬ä»»åŠ¡\nè¾“å…¥åç§°ã€æè¿°\nå¸Œæœ›è¯¥ä»»åŠ¡ä½•æ—¶å¼€å§‹?\tâ€”â€”\tæ¯å¤©(D)\nå¡«1ï¼Œæ¯éš”1å¤©å‘ç”Ÿä¸€æ¬¡\nå¸Œæœ›è¯¥ä»»åŠ¡æ‰§è¡Œä»€ä¹ˆæ“ä½œ?\tâ€”â€”\tå¯åŠ¨ç¨‹åº(Tï¼‰\nç¨‹åºæˆ–è„šæœ¬(P):\tâ€”â€”\tç‚¹å‡»æµè§ˆ(R)ï¼Œæ‰¾åˆ°auto_git_commit.batï¼Œå¦‚åœ¨ D:/script ä¸‹ã€‚\nå®Œæˆ\nåˆ›å»ºæ–°blogçš„ .batæ–‡ä»¶ é™¤äº†å†…å®¹ï¼Œå…¶ä»–å’Œå‰è€…åˆ›å»º.batæ–‡ä»¶ä¸€æ ·\nç”¨åˆ°hugoæ¡†æ¶ï¼Œæ•…ç”¨hugo new contentåˆ›å»ºç›®å½•ã€æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 @echo off setlocal enabledelayedexpansion :input_blog_name cls echo è¯·è¾“å…¥åšå®¢åç§°ï¼ˆä¸å«ç©ºæ ¼ï¼Œä¸è¦ . å¼€å¤´ï¼‰ï¼š set /p \u0026#34;blog_name=\u0026gt;\u0026gt; \u0026#34; REM æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºç©º if \u0026#34;%blog_name%\u0026#34;==\u0026#34;\u0026#34; ( echo é”™è¯¯ï¼šåšå®¢åç§°ä¸èƒ½ä¸ºç©ºï¼ timeout /t 2 /nobreak \u0026gt;nul goto input_blog_name ) REM æ‰§è¡Œæ“ä½œ cd /d \u0026#34;D:\\github_blog\\\u0026#34; hugo new content post/%blog_name%/index.md REM ç»“æœåé¦ˆ if exist \u0026#34;D:\\github_blog\\\u0026#34; ( echo D:\\github_blog\\content\\post\\%blog_name%\\index.md ç°å·²å­˜åœ¨ ) pause ","date":"2025-03-14T00:00:00Z","permalink":"https://rooobeam.github.io/p/bat%E6%96%87%E4%BB%B6%E5%AE%9E%E9%AA%8C/","title":"batæ–‡ä»¶å®éªŒ"},{"content":"è¾ƒå…¨é¢çš„æ•™ç¨‹å‚è€ƒï¼šLinux Vimæœ€å…¨é¢çš„æ•™ç¨‹-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº\n","date":"2025-03-14T00:00:00Z","permalink":"https://rooobeam.github.io/p/vim%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/","title":"Vimå¸¸ç”¨æ“ä½œ"},{"content":"è½¬ç§»æŒ‡ä»¤åŸç† offset è·å¾—æ ‡å·çš„åç§»åœ°å€\nå¤§å°ä¸ºä¸€ä¸ªå­—\næ€§è´¨ç›¸å½“äºè¡¨ç¤ºIPçš„idata\njmp æ ‡å· jmp short s\tçŸ­è½¬ç§» jmp near s\tè¿‘è½¬ç§» jmp far s\tè¿œè½¬ç§» å¯„å­˜å™¨/idata jmp reg/ä¸€å­—idata\njmp sreg:reg/ä¸€å­—idata:ä¸€å­—idata\nå†…å­˜å•å…ƒ jmp word ptr å†…å­˜åœ°å€\njmp dword ptr å†…å­˜åœ°å€\njcxz jump if (cx) == zero\nç­‰ä»·äºif((cx)==0) jmp short æ ‡å·\tçŸ­è½¬ç§»\nloop çŸ­è½¬ç§»ç±»å‹\n(cx)\u0026ndash;\nif((cx)!=0)jmp short æ ‡å·\nå®éªŒ8 å®éªŒ9 ","date":"2025-03-12T00:00:00Z","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%B9%9D%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬ä¹ç« "},{"content":"pythonè°ƒè¯• å‚è€ƒLinux ä¸‹å¦‚ä½•è°ƒè¯• Pythonï¼Ÿ - hoxis - åšå®¢å›­\nåœ¨å‘½ä»¤è¡Œï¼Œå°†ç¨‹åºä½œä¸ºå‚æ•°ä¼ é€’æ¥è°ƒè¯•ï¼Œâ€œ\u0026hellip; -m pdb \u0026hellip;pyâ€ï¼Œâ€”â€” å‘½ä»¤è¡Œä¼ pdbæ–¹å¼\npython3 -m pdb test1.py\n1 2 3 4 root@autodl-container-c00844b981-267cf857:~/autodl-tmp/test_script# python3 -m pdb test1.py \u0026gt; /root/autodl-tmp/test_script/test1.py(3)\u0026lt;module\u0026gt;() -\u0026gt; def add(a, b): (Pdb) _\u0026lt;-å…‰æ ‡åœ¨æ­¤å¤„ åœ¨ä»£ç ä¸­import pdbï¼Œå†™pdb.set_trace()ä»£ç  â€”â€” import pdb æ–¹å¼\nimport pdb\npdb.set_trace()\npython3 test1.py\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # -*- coding: utf-8 -*- import pdb def add(a, b): return a + b if __name__ == \u0026#39;__main__\u0026#39;: print(\u0026#34;===start===\u0026#34;) pdb.set_trace() c = add(1, 3) print(\u0026#34;===end===\u0026#34;) ======= å‘½ä»¤è¡Œæƒ…å†µå¦‚ä¸‹ ======== root@autodl-container-c00844b981-267cf857:~/autodl-tmp/test_script# python3 test1.py ===start=== \u0026gt; /root/autodl-tmp/test_script/test1.py(9)\u0026lt;module\u0026gt;() -\u0026gt; c = add(1, 3) (Pdb) è¿›å…¥è°ƒè¯•åå¸¸ç”¨æŒ‡ä»¤\n(Pdb) l\tï¼ˆâ€œå°å†™LæŒ‡ä»¤â€ï¼šæŸ¥çœ‹ï¼‰ï¼ˆè‹¥è¿ç»­è¾“å…¥ä¸¤æ¬¡ï¼Œåˆ™ç¬¬äºŒæ¬¡è¿”å›[EOF]ï¼‰\n(Pdb) p å˜é‡å\tï¼ˆæŸ¥çœ‹å½“å‰å¯æŸ¥å˜é‡ï¼‰\n(Pdb)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 ===========\tå‘½ä»¤è¡Œä¼ pdb root@autodl-container-c00844b981-267cf857:~/autodl-tmp/test_script# python3 -m pdb test1.py \u0026gt; /root/autodl-tmp/test_script/test1.py(3)\u0026lt;module\u0026gt;() -\u0026gt; def add(a, b): (Pdb) 1 1 # -*- coding: utf-8 -*- 2 3 -\u0026gt; def add(a, b): 4 return a + b 5 6 if __name == \u0026#39;__main__\u0026#39;: 7 print(\u0026#34;==start==\u0026#34;) 8 c = add(1, 3) 9 print(\u0026#34;==end==\u0026#34;) [EOF] (Pdb) b 8 Breakpoint 1 at /root/autodl-tmp/test_script/test1.py:8 (Pdb) b 9 Breakpoint 2 at /root/autodl-tmp/test_script/test1.py:9 (Pdb) b Num Type Disp Enb Where 1 breakpoint keep yes at /root/autodl-tmp/test_script/test1.py:8 2 breakpoint keep yes at /root/autodl-tmp/test_script/test1.py:9 (Pdb) c ===start=== \u0026gt; /root/autodl-tmp/test_script/test1.py(8)\u0026lt;module\u0026gt;() -\u0026gt; c = add(1, 3) (Pdb) c \u0026gt; /root/autodl-tmp/test_script/test1.py(9)\u0026lt;module\u0026gt;() -\u0026gt; print(\u0026#34;===end==\u0026#34;) (Pdb) p c 4 (Pdb) p a *** NameError: name \u0026#39;a\u0026#39; is not defined (Pdb) p b *** NameError: name \u0026#39;b\u0026#39; is not defined (Pdb) s ===end=== --Return- \u0026gt; /root/autodl-tmp/test_script/test1.py(9)\u0026lt;module\u0026gt;()-\u0026gt;None -\u0026gt; print(\u0026#34;===end==\u0026#34;) (Pdb) s --Return- \u0026gt; \u0026lt;string\u0026gt;(1)\u0026lt;module\u0026gt;()-\u0026gt;None (Pdb) s \u0026gt; /root/miniconda3/lib/python3.12/bdb.py(604)run() -\u0026gt; self.guitting = True (Pdb) s The program finished and will be restarted Cç¼–è¯‘è°ƒè¯• gcc -g test.c -o test å°† test.c ç¼–è¯‘ä¸ºå¯è°ƒå¼ã€å¯æ‰§è¡Œæ–‡ä»¶ test(.exe) Vimä¹±è®° xåˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦\nuæ’¤é”€ä¸€æ¬¡æ“ä½œï¼ˆé™¤uä»¥å¤–ï¼‰\nyyå¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ\npæ–°å¢ä¸€è¡Œå¹¶å†™å…¥å‰ªè´´æ¿å†…å®¹\n","date":"2025-03-11T00:00:00Z","permalink":"https://rooobeam.github.io/p/linux%E5%91%BD%E4%BB%A4/","title":"Linuxå‘½ä»¤"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 assume cs:codesg data segment db \u0026#39;1975\u0026#39;,\u0026#39;1976\u0026#39;,\u0026#39;1977\u0026#39;,\u0026#39;1978\u0026#39;,\u0026#39;1979\u0026#39;,\u0026#39;1980\u0026#39;,\u0026#39;1981\u0026#39;,\u0026#39;1982\u0026#39;,\u0026#39;1983\u0026#39; db \u0026#39;1984\u0026#39;,\u0026#39;1985\u0026#39;,\u0026#39;1986\u0026#39;,\u0026#39;1987\u0026#39;,\u0026#39;1988\u0026#39;,\u0026#39;1989\u0026#39; dd 16,22,345,4567,6475,4567,12345,34526,65734,465436,234234 dd 123345,463654,867887,1567689 dw 4,13,76,89,99,345,567,789,890,1234,5467 dw 6789,12345,14357,16776 data ends table segment db 15 dup (\u0026#39;year summ ne ?? \u0026#39;) table ends codesg segment start: ;set sreg (segment register) mov ax,data mov ds,ax mov ax,table mov es,ax ;set reg (register) mov bx,0 ;bx add 4 bytes mov si,0 ;si add 2 bytes mov bp,0 ;bp add 16 bytes mov cx,0fh s: ;year mov ax,[bx] ;30th row mov es:[bp+0],ax mov ax,2[bx] mov es:[bp+2],ax ;sum of money mov ax,60[bx] ;low -\u0026gt; ax mov es:[bp+5],ax mov dx,62[bx] ;high -\u0026gt; dx mov es:[bp+7],dx ;n of employee mov di,120[si] mov es:[bp+10],di ;?? â€”â€” average money div di mov es:[bp+13],ax add bx,4h add bp,10h add si,2h loop s mov ax,4c00h int 21h codesg ends end start ","date":"2025-03-06T00:00:00Z","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E5%85%AB%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬å…«ç« "},{"content":"â˜å†…å­˜å•å…ƒ ã€\u0026quot;()\u0026quot;ã€ loop å’Œ idata [bx]\nç±»ä¼¼[0]ï¼Œ[bx]è¡¨ç¤º ds:bxä¸Šçš„å­—èŠ‚å•å…ƒæˆ–å­—å•å…ƒçš„å†…å­˜å†…å®¹ï¼Œbxå†…çš„4ä½ä½œä¸ºåç§»åœ°å€\n[0] [bx] mov ax, [0] å°†åœ°å€ä¸ºds:0 çš„å†…å­˜å­—å•å…ƒå­˜å…¥ax mov ax, [bx] å°†åœ°å€ä¸ºds:bxçš„å†…å­˜å•å…ƒå­˜å…¥ax mov al, [0] å°†åœ°å€ä¸ºds:0 çš„å†…å­˜åŠå­—å•å…ƒå­˜å…¥al mov al, [bx] å°†åœ°å€ä¸ºds:bxçš„å†…å­˜åŠå­—å•å…ƒå­˜å…¥al å®ä¾‹ é—®é¢˜5.1.svg\n1 å¿˜äº†è¦å†™å•¥äº† â€œ()\u0026quot;ï¼Œæœºç»„ä¸­â€œ(åœ°å€)â€â€”â€”æè¿°æŸåœ°å€ä¸Šçš„å†…å®¹\n()ä¸­çš„å…ƒç´ æœ‰ä¸‰ç§ç±»å‹ï¼š å¯„å­˜å™¨åï¼Œæ®µå¯„å­˜å™¨å å’Œ äº”ä½åå…­è¿›åˆ¶çš„ç‰©ç†åœ°å€\nå¦‚ (ax)ã€(al)ã€(ds)ã€(20000H)ã€**((ds)*16+(bx))**æ³¨æ„é‡Œé¢çš„dsã€bxéƒ½æœ‰æ‹¬å·\nax=10000Hï¼Œåˆ™(ax)=(10000H)å³åœ°å€10000Hä¸Šçš„å­—èŠ‚å•å…ƒæˆ–å­—å•å…ƒ\nloop ç±»ä¼¼â€œgotoâ€\n1 2 3 4 5 6 7 8 9 10 assume cs:code code segment cx=8 s:\tax=0 loop s mov ax,4c00h int 21 code ends end â€‹\té¦–å…ˆ(cx)=(cx)-1ï¼Œç„¶ååˆ¤æ–­(cx)æ˜¯å¦ç­‰äº0ï¼Œå¦‚æœç­‰äº0åˆ™æ‰§è¡Œä¸‹ä¸€æŒ‡ä»¤ï¼Œå¦‚æœä¸ç­‰äº0åˆ™è·³è½¬åˆ°så¤„æ‰§è¡Œã€‚\nloop å¯èƒ½æƒ…å¢ƒ cxåˆå§‹åŒ–8ï¼Œå¾ªç¯8æ¬¡åç»§ç»­æ‰§è¡Œ cxä¸ºäººä¸ºåˆå§‹åŒ–ï¼Œç„¶åä¸º0ï¼Œ(cx)=(cx)-1å˜æˆå¤§æ•°(å¦‚65535) cxè®¾ç½®æŒ‡ä»¤åœ¨å¾ªç¯ä½“å†…ï¼Œæ­»å¾ªç¯ idata\nçº¦å®šç¬¦å·å¥½idataè¡¨ç¤ºå¸¸é‡ï¼Œmov ax,[idata]ä»£è¡¨mov ax,[1]ã€mov ax,[2]ç­‰ã€‚\nåˆå¦‚ mov ds,idata éƒ½æ˜¯éæ³•æŒ‡ä»¤\nâ˜å®éªŒå›› ç¨‹åº ç¼–ç¨‹ï¼Œå‘å†…å­˜0:2000:23Fä¾æ¬¡ä¼ é€æ•°æ®063(3FH)ï¼Œç¨‹åºä¸­åªèƒ½ä½¿ç”¨9æ¡æŒ‡ä»¤ï¼Œ9æ¡æŒ‡ä»¤ä¸­åŒ…æ‹¬â€˜mov ax,4c00hâ€™å’Œâ€˜int 21hâ€™ã€‚\nåœ¨å¸¸è§çš„x86æ±‡ç¼–è¯­è¨€ï¼ˆå¦‚MASMã€NASMï¼‰ä¸­ï¼Œåˆ†å· ; æ˜¯æ ‡å‡†çš„è¡Œæ³¨é‡Šç¬¦å·ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 assume cs:codesg codesg segment mov ax,020H\tmov ds,ax\t; åˆå§‹åŒ–dsï¼Œä¸èƒ½ç›´æ¥å°†æ•°å­—ä¼ å…¥æ®µå¯„å­˜å™¨ mov bx,0H\t; åˆå§‹åŒ–bxå› ä¸ºä»0 mov cx,40H\t; cx=40Hå³å¾ªç¯64æ¬¡å­˜å…¥æ•°æ®0~63 s:\t; æ ‡è®°loopè·³è½¬ä½ç½® mov [bx],bl\t; å†…å­˜0:200~0:23Fæ˜¯40Hä¸ªå­—èŠ‚æ•°æ®,è¦å­˜å…¥å­—èŠ‚æ•°æ®ï¼Œblå­˜å…¥cs:bxçš„å­—èŠ‚å•å…ƒï¼Œå› ä¸ºè¦å¯¹åº”blçš„å¤§å°æ˜¯1å­—èŠ‚ inc bx\t; æŠŠbx+=1 ç§»åŠ¨åç§»åœ°å€ loop s\t; å‡å°cx, æ£€æŸ¥åˆ¤æ–­æ˜¯å¦è·³è½¬ mov ax,4c00H\tint 21H\t; ç»“æŸ codesg ends end â˜å®éªŒäº”å€’äºŒé¢˜ ç¼–å†™codeæ®µä¸­çš„ä»£ç ï¼Œå°†aæ®µå’Œbæ®µä¸­çš„æ•°æ®ä¾æ¬¡ç›¸åŠ ï¼Œå°†ç»“æœä¿å­˜åˆ°cæ®µä¸­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 assume cs:code a segment db 1,2,3,4,5,6,7,8 ; a åŸå§‹æ•°æ® a ends b segment db 1,2,3,4,5,6,7,8 ; b åŸå§‹æ•°æ® b ends c segment db 0,0,0,0,0,0,0,0 ; c ç»“æœå­˜å‚¨åŒº c ends code segment start: mov bx,0\t; åˆå§‹åŒ–åç§»ï¼Œä»0å¼€å§‹ mov cx,8\t; è®¾ç½®å¥½å¾ªç¯æ¬¡æ•° s:\tmov dx,a\tmov ds,dx\t; ds=a mov al,[bx]\t; al=a[bx] mov dx,b\tmov ds,dx\t; ds=b add al,[bx]\t; al= mov dx,c\tmov ds,dx\t; ds=c mov [bx],al\t; c[bx]=al=a[bx]+b[bx] inc bx\t;bx++ loop s\t;è·³è½¬ mov ax,4c00h\tint 21h\t; ç¨‹åºé€€å‡º code ends end start\t# æŒ‡æ˜ç¨‹åºçš„å¼€å§‹ç»“å°¾ï¼Œstartå¤„è®¾ç½®cs=start åˆ›å»ºtxtï¼Œå°†ä¸Šè¿°ä»£ç å†™å…¥ï¼Œä¿å­˜ã€‚ win+Rè¿›å…¥DOSï¼Œè¾“å…¥\u0026quot;cd masm5\u0026quot;ï¼Œå†è¾“å…¥\u0026quot;masm\u0026quot;å¯åŠ¨ã€‚ æºæ–‡ä»¶è¾“å…¥ \u0026ldquo;file_name.txt\u0026rdquo; ç„¶åå››ä¸ªå›è½¦ æ²¡æœ‰erroråï¼Œè¾“å…¥\u0026quot;link\u0026quot;ï¼Œobjæ–‡ä»¶è¾“å…¥file_nameï¼Œç„¶åå›è½¦å›è½¦å›è½¦ è¾“å…¥\u0026quot;debug file_name.exe\u0026quot;ï¼Œè¿›å…¥å¯¹è¯¥exeçš„debugæ¨¡å¼ è¾“å…¥\u0026quot;u\u0026quot;æŸ¥çœ‹å½“å‰èƒ½çœ‹åˆ°çš„æŒ‡ä»¤ï¼Œçœ‹ä¸åˆ°\u0026quot;mov ax,4c00H\u0026quot;å°±è¾“å…¥tæ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œè¾“å…¥ä¸ªä¸‰å››ä¸ªå†è¾“å…¥\u0026quot;u\u0026quot;æŸ¥çœ‹ï¼Œæ€»ä¹‹çœ‹åˆ°ç»“æŸæŒ‡ä»¤çš„åç§»åœ°å€bx è¾“å…¥\u0026quot;g bx\u0026quot;ï¼Œç›´æ¥æ‰§è¡Œåˆ°bxå¤„ è¾“å…¥\u0026quot;r\u0026quot;ï¼ŒæŸ¥çœ‹DSï¼Œå› ä¸ºå®ƒæ˜¯cæ®µçš„é¦–åœ°å€ï¼Œå› ä¸ºæœ€åä¸€æ¬¡è®¾ç½®DSå°±æ˜¯ç”¨çš„c å®éªŒä¸­ds=0c25ï¼Œè¾“å…¥â€œd 0c25:0\u0026quot;ä¾¿èƒ½æŸ¥çœ‹cå¤„çš„å€¼æ˜¯ä¸æ˜¯2 4 6 8\u0026hellip;ï¼Œæˆ–è€…è¾“å…¥\u0026quot;d 0c23:0\u0026quot;èƒ½å¯¹æ¯”aã€bã€cæ®µçš„å†…å®¹ã€‚ dbã€dwï¼šå®šä¹‰æ•°æ®ï¼Œdbå³define bytesï¼Œdwå³define wordsï¼Œ â˜å®éªŒäº”æœ€åä¸€é¢˜ ç¼–å†™codeæ®µä»£ç ï¼Œç”¨pushæŒ‡ä»¤å°†aæ®µä¸­çš„å‰8ä¸ªå­—å‹æ•°æ®ï¼Œé€†åºå­˜å‚¨åˆ°bæ®µã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 assume cs:code a segment ; æ•°æ®æ®µa dw 1,2,3,4,5,6,7,8,0ah,0bh,0ch,0dh,0fh,0ffh a ends b segment ; æ•°æ®æ®µb dw 0,0,0,0,0,0,0,0 b ends code segment start: mov ax, a ; èµ‹å€¼dsä¸ºaæ®µçš„æ®µåœ°å€ mov ds, ax mov ax, b ; èµ‹å€¼å †æ ˆæ®µssä¸ºbæ®µçš„æ®µåœ°å€ mov ss, ax mov sp,10h\t;åç§»åˆ°å †æ ˆæœ€åçš„å­—å‹æ•°æ®åï¼Œ8ä¸ªå­—ï¼Œ16ä¸ªå­—èŠ‚ï¼Œ0c24:0~0c24:0fï¼Œss:spæŒ‡å‘0c24:10ï¼Œå³å‰è€…åŠ ä¸€ã€‚ mov bx, 0 ; åˆå§‹åŒ–åç§»é‡ mov cx, 8 ; å¾ªç¯æ¬¡æ•° s: push [bx] ; å°†aæ®µç¬¬iä¸ªå­—å‹æ•°æ®å­˜å…¥bæ®µå€’æ•°ç¬¬iä¸ªå­—å•å…ƒå†… add bx, 2h ; æŒ‰å­— (word) å¤„ç†æ•°æ®ï¼Œæ•…+2 loop s mov ax, 4c00h ; é€€å‡ºç¨‹åº int 21h code ends end start è¯»ä»£ç ä»£ç åæ€è€ƒï¼šå„ç§æ®µæ˜¯å¦‚ä½•å®‰æ’çš„ï¼Œæ€ä¹ˆè®©CPUä¼šæŠŠdodeæ®µå½“ä½œä»£ç æ®µ\nâŒ\ncode data stackç­‰æ®µåå¦‚ä½•è®¾ç½®åªæ˜¯ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œä¸èƒ½èµ·åˆ°ä¿®æ”¹cs ds ssçš„ä½œç”¨\nassume cs:code,ds:data,ss:stack ä¹Ÿä¸èƒ½\nâœ…\nç¨‹åºæœ«å°¾end startå¯ä»¥è®¾ç½®ç¨‹åºå…¥å£CS:IP\nâœ…\nmov ax,stack\nmov ss,ax\nmov sp,20h\nè®¾ç½®å †æ ˆæ®µï¼ŒstacKæ˜¯ä½ è®¾ç½®çš„ä½œä¸ºå †æ ˆæ®µçš„æ®µåï¼Œå¯ä»¥æ˜¯aã€c what ever you want ç¬¦åˆä¸€å®šå‘½åè§„èŒƒå³å¯ã€‚\nâœ…\nmov ax,data\nmov ds,ax\nè®¾ç½®æ•°æ®æ®µ\næ¯ä¸ªæ®µåŠ¿å¿…å æ®Nè¡Œï¼Œå³ï¼š\nå‰ä¸€ä¸ªæ®µæœ€åä¸€ä¸ªå­—èŠ‚å•å…ƒä¸ºæ‰€åœ¨è¡Œè¢«å‰ä¸€ä¸ªæ®µå æœ‰ï¼Œå½“å‰æ®µä»ä¸‹ä¸€è¡Œå¼€å§‹ï¼Œæ¯è¡Œ16å­—èŠ‚ã€‚\nå‰ä¸€ä¸ªæ®µæœ€åä¸€ä¸ªå­—èŠ‚å•å…ƒ a:bï¼Œåˆ™å½“å‰æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚å•å…ƒä¸ºa+[b/10h]+1:0ï¼Œ[ ]å–æ•´æ•°ï¼Œ10håå…­ä¸ªå­—èŠ‚\na:b=2:34h\ta+[34h/10h]+1:0=2+3+1:0=6:0\n","date":"2025-03-02T00:00:00Z","image":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%BA%94%E5%85%AD%E7%AB%A0/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250222101607_hu_56fa5440ce86c489.jpg","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%BA%94%E5%85%AD%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬äº”ã€å…­ç« "},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 # deepseek-r1ç”Ÿæˆååˆ å‡å¾—æ¥ import sys import platform import subprocess from importlib.metadata import distributions def get_environment_info(): env_info = { # ç³»ç»Ÿä¿¡æ¯ \u0026#34;æ“ä½œç³»ç»Ÿ\u0026#34;: f\u0026#34;{platform.system()} {platform.release()} {platform.version()}\u0026#34;, \u0026#34;ç³»ç»Ÿæ¶æ„\u0026#34;: platform.architecture()[0], \u0026#34;ä¸»æœºå\u0026#34;: platform.node(), # Pythonç¯å¢ƒ \u0026#34;Pythonç‰ˆæœ¬\u0026#34;: sys.version.replace(\u0026#39;\\n\u0026#39;, \u0026#39; \u0026#39;), \u0026#34;è™šæ‹Ÿç¯å¢ƒ\u0026#34;: \u0026#34;æ˜¯\u0026#34; if hasattr(sys, \u0026#39;real_prefix\u0026#39;) or sys.prefix != sys.base_prefix else \u0026#34;å¦\u0026#34;, # åŒ…ç®¡ç†ä¿¡æ¯ \u0026#34;å·²å®‰è£…åŒ…\u0026#34;: [f\u0026#34;{dist.metadata[\u0026#39;Name\u0026#39;]}=={dist.version}\u0026#34; for dist in distributions()], } # è·å–condaä¿¡æ¯ï¼ˆå¦‚æœå¯ç”¨ï¼‰ try: result = subprocess.run([\u0026#39;conda\u0026#39;, \u0026#39;list\u0026#39;], capture_output=True, text=True, check=True) env_info[\u0026#34;CondaåŒ…åˆ—è¡¨\u0026#34;] = result.stdout.splitlines() except: env_info[\u0026#34;CondaåŒ…åˆ—è¡¨\u0026#34;] = \u0026#39;conda list fail\u0026#39; pass return env_info if __name__ == \u0026#34;__main__\u0026#34;: info = get_environment_info() # æ‰“å°æ‘˜è¦ä¿¡æ¯ print(\u0026#34;=\u0026#34; * 50 + \u0026#34;\\nç¯å¢ƒé…ç½®æ‘˜è¦:\\n\u0026#34; + \u0026#34;=\u0026#34; * 50) print(f\u0026#34;æ“ä½œç³»ç»Ÿ: {info[\u0026#39;æ“ä½œç³»ç»Ÿ\u0026#39;]}\u0026#34;) print(f\u0026#34;Pythonç‰ˆæœ¬: {info[\u0026#39;Pythonç‰ˆæœ¬\u0026#39;].split(\u0026#39; [\u0026#39;)[0]}\u0026#34;) print(f\u0026#34;è™šæ‹Ÿç¯å¢ƒ: {info[\u0026#39;è™šæ‹Ÿç¯å¢ƒ\u0026#39;]}\u0026#34;) print(f\u0026#34;å·²å®‰è£…åŒ…æ•°é‡: {len(info[\u0026#39;å·²å®‰è£…åŒ…\u0026#39;])}\u0026#34;) # ä¿å­˜å®Œæ•´ä¿¡æ¯åˆ°æ–‡ä»¶ with open(\u0026#34;environment_report.txt\u0026#34;, \u0026#34;w\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: for key, value in info.items(): f.write(f\u0026#34;\\n=== {key} ===\\n\u0026#34;) if isinstance(value, list): f.write(\u0026#39;\\n\u0026#39;.join(value)) elif isinstance(value, dict): for k, v in value.items(): f.write(f\u0026#34;{k}: {v}\\n\u0026#34;) else: f.write(str(value)) print(\u0026#34;\\nå®Œæ•´ç¯å¢ƒæŠ¥å‘Šå·²ä¿å­˜åˆ° environment_report.txt\u0026#34;) ","date":"2025-02-22T00:00:00Z","image":"https://rooobeam.github.io/p/%E7%94%9F%E6%88%90%E5%BD%93%E5%89%8D%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%9A%84txt/preview%281%29_hu_f70373dca115e4ca.jpg","permalink":"https://rooobeam.github.io/p/%E7%94%9F%E6%88%90%E5%BD%93%E5%89%8D%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%9A%84txt/","title":"ç”Ÿæˆå½“å‰ç¯å¢ƒé…ç½®çš„txt"},{"content":"This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.\nHeadings The following HTML \u0026lt;h1\u0026gt;â€”\u0026lt;h6\u0026gt; elements represent six levels of section headings. \u0026lt;h1\u0026gt; is the highest section level while \u0026lt;h6\u0026gt; is the lowest.\nH1 H2 H3 H4 H5 H6 Paragraph Xerum, quo qui aut unt expliquam qui dolut labo. Aque venitatiusda cum, voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur, offic to cor sequas etum rerum idem sintibus eiur? Quianimin porecus evelectur, cum que nis nust voloribus ratem aut omnimi, sitatur? Quiatem. Nam, omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus, sin conecerem erum fuga. Ri oditatquam, ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost, temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat.\nItatur? Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum, core et que aut hariosam ex eat.\nBlockquotes The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a footer or cite element, and optionally with in-line changes such as annotations and abbreviations.\nBlockquote without attribution Tiam, ad mint andaepu dandae nostion secatur sequo quae. Note that you can use Markdown syntax within a blockquote.\nBlockquote with attribution Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.\nâ€” Rob Pike1\nTables Tables aren\u0026rsquo;t part of the core Markdown spec, but Hugo supports supports them out-of-the-box.\nName Age Bob 27 Alice 23 Inline Markdown within tables Italics Bold Code italics bold code A B C D E F Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ultricies, sapien non euismod aliquam, dui ligula tincidunt odio, at accumsan nulla sapien eget ex. Proin eleifend dictum ipsum, non euismod ipsum pulvinar et. Vivamus sollicitudin, quam in pulvinar aliquam, metus elit pretium purus Proin sit amet velit nec enim imperdiet vehicula. Ut bibendum vestibulum quam, eu egestas turpis gravida nec Sed scelerisque nec turpis vel viverra. Vivamus vitae pretium sapien Code Blocks Code block with backticks 1 2 3 4 5 6 7 8 9 10 \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Code block indented with four spaces \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Code block with Hugo\u0026rsquo;s internal highlight shortcode 1 2 3 4 5 6 7 8 9 10 \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Diff code block 1 2 3 4 5 [dependencies.bevy] git = \u0026#34;https://github.com/bevyengine/bevy\u0026#34; rev = \u0026#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13\u0026#34; - features = [\u0026#34;dynamic\u0026#34;] + features = [\u0026#34;jpeg\u0026#34;, \u0026#34;dynamic\u0026#34;] List Types Ordered List First item Second item Third item Unordered List List item Another item And another item Nested list Fruit Apple Orange Banana Dairy Milk Cheese Other Elements â€” abbr, sub, sup, kbd, mark GIF is a bitmap image format.\nH2O\nXn + Yn = Zn\nPress CTRL + ALT + Delete to end the session.\nMost salamanders are nocturnal, and hunt for insects, worms, and other small creatures.\nHyperlinked image The above quote is excerpted from Rob Pike\u0026rsquo;s talk during Gopherfest, November 18, 2015.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2025-02-19T00:00:00Z","image":"https://rooobeam.github.io/p/markdown-syntax-guide/pawel-czerwinski-8uZPynIu-rQ-unsplash_hu_e95a4276bf860a84.jpg","permalink":"https://rooobeam.github.io/p/markdown-syntax-guide/","title":"Markdown Syntax Guide"},{"content":"å¯„å­˜å™¨ï¼ˆå†…å­˜è®¿é—®ï¼‰ âœ…\n(âŠ™ï¹âŠ™) ","date":"2025-02-19T00:00:00Z","image":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%B8%89%E7%AB%A0/%E6%95%96%E5%85%89_hu_ca55c6edaf6ec37c.jpg","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%B8%89%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬ä¸‰ç« "},{"content":"å¯„å­˜å™¨ âœ…\n8086cpuæœ‰14ä¸ªå¯„å­˜å™¨ï¼šAX BX CX DS SI DI SP BP IP CS SS DS ES PSWã€‚\n8086cpuå¯„å­˜å™¨éƒ½æ˜¯16ä½çš„ã€‚\nABCD-Xé€šå¸¸ç”¨æ¥å­˜æ”¾ä¸€èˆ¬æ€§æ•°æ®ï¼Œè¢«æˆä¸ºé€šç”¨å¯„å­˜å™¨ã€‚\nå¯„å­˜å™¨?Xå¯è¢«åˆ†ä¸º?Hå’Œ?Lï¼Œå¦‚AXåˆ†ä¸ºAH ALï¼Œå³åˆ†ä¸ºAHigh ALowï¼Œå‰è€…æ˜¯é«˜å…«ä½ï¼Œåè€…æ˜¯ç¬¬å…«ä½ã€‚\næ‰€è°“é«˜ä½å’Œæ•°å­—çš„é«˜ä½è”æƒ³ï¼Œéƒ½æ˜¯å·¦è¾¹æ˜¯é«˜ä½ã€‚\nâœ…\nå‡ æ¡æ±‡ç¼–æŒ‡ä»¤ï¼šmov addï¼Œç”¨æ³•ä¸€æ ·ã€‚add ax,18H; add ax,8Hã€‚\næ•°å­—é»˜è®¤16è¿›åˆ¶ã€‚\nmov ax,bx; mov ax,7ã€‚\nä¸¤ä¸ªæ“ä½œå¯¹è±¡ä½æ•°ä¸€è‡´ï¼Œç¬¬ä¸€ä¸ªä½ç½®è¦æ˜¯å˜é‡ï¼Œå¦‚mov ah,bl; mov bh, AAã€‚\nâœ…\nç‰©ç†åœ°å€å³å†…å­˜åœ¨ç»Ÿä¸€çš„é€»è¾‘å­˜å‚¨å™¨ä¸­çš„åœ°å€ã€‚\nå†…å­˜åœ°å€ç©ºé—´:cpuå°†ç³»ç»Ÿä¸­å„ç±»å­˜å‚¨å™¨çœ‹ä½œä¸€ä¸ªé€»è¾‘å­˜å‚¨å™¨ã€‚\nç‰©ç†åœ°å€=æ®µåœ°å€*16+åç§»åœ°å€ï¼Œé€šå¸¸å†™ä½œ æ®µåœ°å€:åç§»åœ°å€ï¼Œå¦‚cpuæŒ‡ä»¤è¯»å–å¼€å§‹åœ°å€CS:IPã€‚\nç”±äºåå…­è¿›åˆ¶ï¼Œæ•…å…¶å®å³ â€œæ®µåœ°å€0+åç§»åœ°å€â€ï¼Œç”±ä¸€ä¸ªåœ°å€åŠ æ³•å™¨åˆæˆã€‚\næ®µçš„æ¦‚å¿µï¼šæ®µåœ°å€å›ºå®šï¼Œåç§»åœ°å€è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚æ•…å…¶æœ€å¤§èŒƒå›´0000~FFFFã€‚å®è·µå‘ç°ï¼Œ0-1ä¼šè‡ªåŠ¨å˜æˆFFFFï¼ŒFFFF+1å˜æˆ0000ã€‚\nâœ…\n8086æœ‰å››ä¸ªæ®µå¯„å­˜å™¨ï¼šCS DS SS ESã€‚\nCSå’ŒIPï¼šCSå«ä»£ç  æ®µå¯„å­˜å™¨ï¼ŒIP å«æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼ŒCSå­˜æ®µåœ°å€IPå­˜åç§»é‡ã€‚\ncpuå°†ä»CS:IPå•å…ƒå¼€å§‹è¯»å–ä¸€æ¡æŒ‡ä»¤å¹¶æ‰§è¡Œã€‚\nå–æŒ‡æ‰§è¡Œè¿‡ç¨‹ï¼šä»CS:IPè¯»å–æŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤è¿›å…¥æŒ‡ä»¤ç¼“å†²å™¨ï¼›IP=IP+è¯¥æŒ‡ä»¤é•¿åº¦ï¼Œä»è€ŒæŒ‡å‘ä¸‹ä¸€æŒ‡ä»¤é¦–å•å…ƒï¼›æ‰§è¡ŒæŒ‡ä»¤ï¼›ä»CS:IPè¯»å–æŒ‡ä»¤\u0026hellip;\u0026hellip;.\nä¿®æ”¹CS IPå‘½ä»¤â€”â€”jmp jmp æ®µåœ°å€:åç§»åœ°å€\tæ®µåœ°å€ä¿®æ”¹CS åç§»åœ°å€ä¿®æ”¹IP jmp â€œå››ä½æ•°â€ ä»…ä¿®æ”¹IP jmp æŸåˆæ³•å¯„å­˜å™¨\tä»…ä¿®æ”¹IPï¼ŒIP=æŸåˆæ³•å¯„å­˜å™¨çš„å€¼\n","date":"2025-02-19T00:00:00Z","image":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%BA%8C%E7%AB%A0/vglcjtiwyh9bnm0o_hu_b0d85bfc829806f3.webp","permalink":"https://rooobeam.github.io/p/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%BA%8C%E7%AB%A0/","title":"æ±‡ç¼–è¯­è¨€ç¬¬äºŒç« "},{"content":"ï¿½è·µ' +++\næ­£æ–‡ è®¾å¤‡ï¼šwin2000VMè™šæ‹Ÿæœºï¼Œwin11å®¿ä¸»æœº\nwin11ä¸Šï¼šå¦‚ä½•æ­å»ºFTPï¼šhttps://zhuanlan.zhihu.com/p/36070173\nwin2000ä¸Šï¼š\nè°ƒä¸ºNATæ¨¡å¼ï¼› æˆ‘çš„ç”µè„‘-\u0026gt;ç½‘ä¸Šé‚»å±…-\u0026gt;åœ°å€æ è¾“å…¥ftp://å®¿ä¸»æœºwlanåœ°å€ æå®šã€‚\nï¼Ÿï¼Ÿï¼Ÿ\n","date":"2025-02-12T00:00:00Z","permalink":"https://rooobeam.github.io/p/ftp%E5%AE%9E%E8%B7%B5/","title":"Ftpå®è·µ"},{"content":"","date":"2025-01-18T00:00:00Z","permalink":"https://rooobeam.github.io/p/newblog/","title":"Newblog"},{"content":"","date":"2025-01-18T00:00:00Z","permalink":"https://rooobeam.github.io/p/newtest/","title":"Newtest"},{"content":"hello hi fine æµ‹è¯•ç®€ä½“ä¸­æ–‡èƒ½å¦æ˜¾ç¤º\n","date":"2025-01-17T00:00:00Z","permalink":"https://rooobeam.github.io/p/firstblog/","title":"FirstBlog"},{"content":"Lorem est tota propiore conpellat pectoribus de pectora summo.\nRedit teque digerit hominumque toris verebor lumina non cervice subde tollit usus habet Arctonque, furores quas nec ferunt. Quoque montibus nunc caluere tempus inhospita parcite confusaque translucet patri vestro qui optatis lumine cognoscere flos nubis! Fronde ipsamque patulos Dryopen deorum.\nExierant elisi ambit vivere dedere Duce pollice Eris modo Spargitque ferrea quos palude Rursus nulli murmur; hastile inridet ut ab gravi sententia! Nomine potitus silentia flumen, sustinet placuit petis in dilapsa erat sunt. Atria tractus malis.\nComas hunc haec pietate fetum procerum dixit Post torum vates letum Tiresia Flumen querellas Arcanaque montibus omnes Quidem et Vagus elidunt The Van de Graaf Canon\nMane refeci capiebant unda mulcebat Victa caducifer, malo vulnere contra dicere aurato, ludit regale, voca! Retorsit colit est profanae esse virescere furit nec; iaculi matertera et visa est, viribus. Divesque creatis, tecta novat collumque vulnus est, parvas. Faces illo pepulere tempus adest. Tendit flamma, ab opes virum sustinet, sidus sequendo urbis.\nIubar proles corpore raptos vero auctor imperium; sed et huic: manus caeli Lelegas tu lux. Verbis obstitit intus oblectamina fixis linguisque ausus sperare Echionides cornuaque tenent clausit possit. Omnia putatur. Praeteritae refert ausus; ferebant e primus lora nutat, vici quae mea ipse. Et iter nil spectatae vulnus haerentia iuste et exercebat, sui et.\nEurytus Hector, materna ipsumque ut Politen, nec, nate, ignari, vernum cohaesit sequitur. Vel mitis temploque vocatus, inque alis, oculos nomen non silvis corpore coniunx ne displicet illa. Crescunt non unus, vidit visa quantum inmiti flumina mortis facto sic: undique a alios vincula sunt iactata abdita! Suspenderat ego fuit tendit: luna, ante urbem Propoetides parte.\n","date":"2025-01-17T00:00:00Z","image":"https://rooobeam.github.io/p/placeholder-text/matt-le-SJSpo9hQf7s-unsplash_hu_c1ca39d792aee4ab.jpg","permalink":"https://rooobeam.github.io/p/placeholder-text/","title":"Placeholder Text"},{"content":"Mathematical notation in a Hugo project can be enabled by using third party JavaScript libraries.\nIn this example we will be using KaTeX\nCreate a partial under /layouts/partials/math.html Within this partial reference the Auto-render Extension or host these scripts locally. Include the partial in your templates like so: 1 2 3 {{ if or .Params.math .Site.Params.math }} {{ partial \u0026#34;math.html\u0026#34; . }} {{ end }} To enable KaTeX globally set the parameter math to true in a project\u0026rsquo;s configuration To enable KaTeX on a per page basis include the parameter math: true in content files Note: Use the online reference of Supported TeX Functions\nExamples Inline math: $\\varphi = \\dfrac{1+\\sqrt5}{2}= 1.6180339887â€¦$\nBlock math: $$ \\varphi = 1+\\frac{1} {1+\\frac{1} {1+\\frac{1} {1+\\cdots} } } $$","date":"2019-03-08T00:00:00Z","permalink":"https://rooobeam.github.io/p/math-typesetting/","title":"Math Typesetting"}]